<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icons8-fox-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icons8-fox-16.png">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif:300,300italic,400,400italic,700,700italic%7CJetBrains+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/black/pace-theme-center-atom.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"hqj2221.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":280,"display":"post","padding":18,"offset":20},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Learning about computer network and communication protocol">
<meta property="og:type" content="article">
<meta property="og:title" content="CS305 计算机网络">
<meta property="og:url" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/index.html">
<meta property="og:site_name" content="Ho Kai Kwan&#39;s Personal Pages">
<meta property="og:description" content="Learning about computer network and communication protocol">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn1.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn2.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn3.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn4.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn5.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn6.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn7.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn8.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn9.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn10.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn11.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn12.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn13.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn14.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn15.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn16.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn17.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn18.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn19.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn20.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn21.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn22.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn23.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn24.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn25.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn26.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn27.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn28.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn29.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn30.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn31.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn32.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn33.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn34.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn35.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn36.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn37.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn38.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn39.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn40.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn41.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn42.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn43.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn44.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn45.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn46.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn47.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn48.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn49.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn50.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn51.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn52.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn53.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn54.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn55.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn56.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn57.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn58.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn59.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn60.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn61.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn62.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn63.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn64.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn65.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn66.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn67.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn68.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn68.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn70.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn71.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn72.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn73.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn74.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn75.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn76.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn77.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn78.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn79.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn80.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn81.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn82.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn83.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn84.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn85.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn89.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn90.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn91.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn92.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn97.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn98.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn99.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn100.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn86.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn87.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn88.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn101.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn102.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn93.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn94.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn95.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn96.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn103.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn104.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn105.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn106.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn107.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn108.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn109.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn110.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn111.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn112.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn113.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/lab1.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/lab2.png">
<meta property="article:published_time" content="2024-09-09T06:08:56.000Z">
<meta property="article:modified_time" content="2025-01-01T15:39:50.430Z">
<meta property="article:author" content="Bionic l&#39;Hôpital">
<meta property="article:tag" content="CSE Learning">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hqj2221.github.io/2024/09/09/Computer-Networks/cn1.png">


<link rel="canonical" href="http://hqj2221.github.io/2024/09/09/Computer-Networks/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://hqj2221.github.io/2024/09/09/Computer-Networks/","path":"2024/09/09/Computer-Networks/","title":"CS305 计算机网络"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>CS305 计算机网络 | Ho Kai Kwan's Personal Pages</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Ho Kai Kwan's Personal Pages</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">A personal site by Ho Kai Kwan,</br>junior student from South University of Science and Technology.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">13</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">11</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fas fa-list fa-fw"></i>Categories<span class="badge">7</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-1-Introduction"><span class="nav-text">Chapter 1: Introduction</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-Structure-of-Internet"><span class="nav-text">1.1. Structure of Internet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-Network-edge"><span class="nav-text">1.2. Network edge</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Plus-Access-Networks-%E6%8E%A5%E5%85%A5%E7%BD%91"><span class="nav-text">Plus: Access Networks(接入网)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-Network-Core-%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83"><span class="nav-text">1.3. Network Core(网络核心)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Packet-switching-vs-Circuit-switching"><span class="nav-text">Packet switching vs. Circuit switching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Network-Structure"><span class="nav-text">Network Structure</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-Performance-Metric"><span class="nav-text">1.4. Performance Metric</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Delay-Nodal-vs-End-to-end"><span class="nav-text">Delay: Nodal vs. End-to-end</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Throughput-%E5%90%9E%E5%90%90%E9%87%8F"><span class="nav-text">Throughput(吞吐量)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-Protocol-layers-amp-Service-models"><span class="nav-text">1.5. Protocol layers &amp; Service models</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-6-Security"><span class="nav-text">1.6. Security</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-2-Application-Layer"><span class="nav-text">Chapter 2: Application Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-Principles-of-network-applications"><span class="nav-text">2.1. Principles of network applications</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Architecture-of-network"><span class="nav-text">Architecture of network</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transport-layer-protocol"><span class="nav-text">Transport layer protocol</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Interface-between-Process-and-Computer-Networks-Sockets"><span class="nav-text">Interface between Process and Computer Networks: Sockets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Brief-looking-on-transport-protocols"><span class="nav-text">Brief looking on transport protocols</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-level-protocols-Brief"><span class="nav-text">Application-level protocols (Brief)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-Web-and-HTTP"><span class="nav-text">2.2. Web and HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP"><span class="nav-text">HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HTTP-overview-TCP"><span class="nav-text">HTTP overview: TCP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Messages"><span class="nav-text">Messages</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cookies"><span class="nav-text">Cookies</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Web-caches-proxy-%E4%BB%A3%E7%90%86-server"><span class="nav-text">Web caches: proxy(代理) server</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-Electronic-Mail"><span class="nav-text">2.3. Electronic Mail</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Overview"><span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Simple-Mail-Transfer-Protocol-SMTP"><span class="nav-text">Simple Mail Transfer Protocol(SMTP)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mail-Message-Format"><span class="nav-text">Mail Message Format</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mail-Access-Protocol"><span class="nav-text">Mail Access Protocol</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-Domain-Name-System-DNS-%E9%87%8D%E7%82%B9"><span class="nav-text">2.4. Domain Name System(DNS) [重点!]</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS-Services"><span class="nav-text">DNS Services</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS-Structure"><span class="nav-text">DNS Structure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS-Protocol"><span class="nav-text">DNS Protocol</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inserting-records-into-DNS"><span class="nav-text">Inserting records into DNS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-P2P-applications"><span class="nav-text">2.5. P2P applications</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#P2P-vs-Client-Server"><span class="nav-text">P2P vs. Client-Server</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#P2P-file-distribution-BitTorrent"><span class="nav-text">P2P file distribution: BitTorrent</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-video-streaming-and-content-distribution-networks"><span class="nav-text">2.6. video streaming and content distribution networks</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Streaming-multimedia-DASH"><span class="nav-text">Streaming multimedia: DASH</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Content-Distribution-Network-CDN"><span class="nav-text">Content Distribution Network(CDN)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-7-Socket-programming-with-UDP-and-TCP"><span class="nav-text">2.7. Socket programming with UDP and TCP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-programming-with-UDP"><span class="nav-text">Socket programming with UDP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Socket-programming-with-TCP"><span class="nav-text">Socket programming with TCP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-3-Transport-Layer"><span class="nav-text">Chapter 3: Transport Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-Transport-Layer-Services"><span class="nav-text">3.1. Transport Layer Services</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-Multiplexing-Demultiplexing"><span class="nav-text">3.2. Multiplexing &#x2F; Demultiplexing</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-Connectionless-demux"><span class="nav-text">UDP: Connectionless demux</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-Connection-oriented-demux"><span class="nav-text">TCP: Connection-oriented demux</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-Connectionless-transport-UDP"><span class="nav-text">3.3. Connectionless transport: UDP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-Checksum"><span class="nav-text">UDP Checksum</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-Principles-of-Reliable-Data-Transfer-rdt"><span class="nav-text">3.4. Principles of Reliable Data Transfer (rdt)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Overview-1"><span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt-1-0"><span class="nav-text">rdt 1.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt-2-0"><span class="nav-text">rdt 2.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt-2-1"><span class="nav-text">rdt 2.1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt-2-2"><span class="nav-text">rdt 2.2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rdt-3-0"><span class="nav-text">rdt 3.0</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary"><span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pipelined-Protocols"><span class="nav-text">Pipelined Protocols</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Go-Back-N"><span class="nav-text">Go-Back-N</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Selective-Repeat"><span class="nav-text">Selective Repeat</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-Connection-Oriented-Transport-TCP"><span class="nav-text">3.5. Connection-Oriented Transport: TCP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Overview-2"><span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-RDT"><span class="nav-text">TCP RDT</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Segment-Structure"><span class="nav-text">Segment Structure</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#RTT-estimation"><span class="nav-text">RTT estimation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reliable-Data-Transfer"><span class="nav-text">Reliable Data Transfer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Flow-Control"><span class="nav-text">Flow Control</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Control-Managment"><span class="nav-text">Control Managment</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-Principles-of-Congestion-Control"><span class="nav-text">3.6. Principles of Congestion Control</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Causes-Costs-of-congestion"><span class="nav-text">Causes &#x2F; Costs of congestion</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-7-TCP-Congestion-Control"><span class="nav-text">3.7. TCP Congestion Control</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Congestion-Control-Details"><span class="nav-text">Congestion Control: Details</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP-Fairness"><span class="nav-text">TCP Fairness</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-4-Network-Layer"><span class="nav-text">Chapter 4: Network Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-Overview-of-Network-Layer"><span class="nav-text">4.1. Overview of Network Layer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2-What%E2%80%99s-inside-a-router"><span class="nav-text">4.2. What’s inside a router</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Router-Overview"><span class="nav-text">Router Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-port-amp-Output-port-function"><span class="nav-text">Input port &amp; Output  port function</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Switching-Fabrics"><span class="nav-text">Switching Fabrics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Queueing-calculation"><span class="nav-text">Queueing calculation</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-IP-Internet-Protocol"><span class="nav-text">4.3. IP: Internet Protocol</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Outline"><span class="nav-text">Outline</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Datagram-format"><span class="nav-text">Datagram format</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP-fragmentation"><span class="nav-text">IP fragmentation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv4"><span class="nav-text">IPv4</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Addressing"><span class="nav-text">Addressing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Subnet"><span class="nav-text">Subnet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#How-to-assign-obtain-IP-address"><span class="nav-text">How to assign&#x2F;obtain IP address?</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NAT-Network-Address-Translation"><span class="nav-text">NAT (Network Address Translation)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IPv6"><span class="nav-text">IPv6</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Format"><span class="nav-text">Format</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Tunneling"><span class="nav-text">Tunneling</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-Generalized-Forward-and-SDN"><span class="nav-text">4.4. Generalized Forward and SDN</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#OpenFlow-data-plane-abstraction"><span class="nav-text">OpenFlow data plane abstraction</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-5-Network-Layer-%E2%80%93-The-Control-Plane"><span class="nav-text">Chapter 5: Network Layer – The Control Plane</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-Intro"><span class="nav-text">5.1. Intro</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-routing-protocols"><span class="nav-text">5.2. routing protocols</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#link-state-%E2%80%94%E2%80%94-getting-global-info"><span class="nav-text">link state —— getting global info</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#distance-vector-%E2%80%94%E2%80%94-getting-decentralized-info"><span class="nav-text">distance vector —— getting decentralized info</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Comparison-of-LS-and-DV"><span class="nav-text">Comparison of LS and DV</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-intra-AS-routing-in-the-Internet-OSPF"><span class="nav-text">5.3. intra-AS routing in the Internet: OSPF</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Intra-AS-Routing"><span class="nav-text">Intra-AS Routing</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OSPF-Open-Shortest-Path-First"><span class="nav-text">OSPF (Open Shortest Path First)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-Routing-among-the-ISPs-BGP"><span class="nav-text">5.4. Routing among the ISPs: BGP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Overview-3"><span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BGP"><span class="nav-text">BGP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Route-Selection"><span class="nav-text">Route Selection</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IP-Anycast-Service-CDN-DNS"><span class="nav-text">IP Anycast Service: CDN&#x2F;DNS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BGP-Routing-Policy"><span class="nav-text">BGP Routing Policy</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-The-SDN-control-plane"><span class="nav-text">5.5. The SDN control plane</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Components-of-SDN-controller"><span class="nav-text">Components of SDN controller</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-ICMP-The-Internet-Control-Message-Protocol"><span class="nav-text">5.6. ICMP: The Internet Control Message Protocol</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Traceroute-and-ICMP"><span class="nav-text">Traceroute and ICMP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary-1"><span class="nav-text">Summary</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-6-Link-Layer"><span class="nav-text">Chapter 6: Link Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-Introduction-amp-Services"><span class="nav-text">6.1. Introduction &amp; Services</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2-Error-detection-amp-correction"><span class="nav-text">6.2. Error detection &amp; correction</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Parity-Check"><span class="nav-text">Parity Check</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cyclic-redundancy-check"><span class="nav-text">Cyclic redundancy check</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-Multiple-Access-Protocol"><span class="nav-text">6.3. Multiple Access Protocol</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#multiple-access-protocol"><span class="nav-text">multiple access protocol</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Channel-partitioning-MAC-protocols"><span class="nav-text">Channel partitioning MAC protocols</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Random-access-protocols"><span class="nav-text">Random access protocols</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Slotted-ALOHA-example-of-RAP"><span class="nav-text">Slotted ALOHA: example of RAP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E2%80%9CTaking-turns%E2%80%9D-MAC-protocols"><span class="nav-text">“Taking turns” MAC protocols</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-4-LANs"><span class="nav-text">6.4 LANs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ARP"><span class="nav-text">ARP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ARP-protocol"><span class="nav-text">ARP protocol</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ethernet"><span class="nav-text">Ethernet</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Switch"><span class="nav-text">Switch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VLANs"><span class="nav-text">VLANs</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Port-based-VLAN"><span class="nav-text">Port-based VLAN</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-6-data-center-networking-%E7%95%A5"><span class="nav-text">6.6 data center networking (略)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-7-a-day-in-the-life-of-a-web-request"><span class="nav-text">6.7 a day in the life of a web request</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Chapter-7-Wireless-and-Mobile-Networks"><span class="nav-text">Chapter 7. Wireless and Mobile Networks</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-Intro"><span class="nav-text">7.1 Intro</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Elements"><span class="nav-text">Elements</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-Wireless-links"><span class="nav-text">7.2 Wireless links</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CDMA-Code-Division-Multiple-Access"><span class="nav-text">CDMA: Code Division Multiple Access</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-IEEE-802-11-Wireless-LAN"><span class="nav-text">7.3 IEEE 802.11 Wireless LAN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4-Cellular-Internet-access"><span class="nav-text">7.4 Cellular Internet  access</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-5-Principles-addressing-and-routing-to-mobile-users"><span class="nav-text">7.5 Principles: addressing  and routing to mobile  users</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Labs"><span class="nav-text">Labs</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-1"><span class="nav-text">Week 1</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-2"><span class="nav-text">Week 2</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Wireshark-%E4%BD%BF%E7%94%A8"><span class="nav-text">Wireshark 使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-8"><span class="nav-text">Week 8</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SACK"><span class="nav-text">SACK</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#QUIC-Quick-UDP-Internet-Connections"><span class="nav-text">QUIC: Quick UDP Internet Connections</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Week-11"><span class="nav-text">Week 11</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-of-eNSP"><span class="nav-text">Use of eNSP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Appendix"><span class="nav-text">Appendix</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Bionic l'Hôpital"
      src="/images/me.png">
  <p class="site-author-name" itemprop="name">Bionic l'Hôpital</p>
  <div class="site-description" itemprop="description">Ho Kai Kwan's Personal Pages</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">13</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/HQJ2221" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;HQJ2221" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/about/" title="About-Me → &#x2F;about&#x2F;" rel="noopener me"><i class="fa fa-user-circle fa-fw"></i>About-Me</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hqj2221.github.io/2024/09/09/Computer-Networks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/me.png">
      <meta itemprop="name" content="Bionic l'Hôpital">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ho Kai Kwan's Personal Pages">
      <meta itemprop="description" content="Ho Kai Kwan's Personal Pages">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="CS305 计算机网络 | Ho Kai Kwan's Personal Pages">
      <meta itemprop="description" content="Learning about computer network and communication protocol">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          CS305 计算机网络
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-09 14:08:56" itemprop="dateCreated datePublished" datetime="2024-09-09T14:08:56+08:00">2024-09-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2025-01-01 23:39:50" itemprop="dateModified" datetime="2025-01-01T23:39:50+08:00">2025-01-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/2024-Fall/" itemprop="url" rel="index"><span itemprop="name">2024 Fall</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">Learning about computer network and communication protocol</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Chapter-1-Introduction"><a href="#Chapter-1-Introduction" class="headerlink" title="Chapter 1: Introduction"></a>Chapter 1: Introduction</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>1.1</strong> what is the Internet?</p>
<p><strong>1.2</strong> network edge</p>
<ul>
<li>end systems, access networks, links</li>
</ul>
<p><strong>1.3</strong> network core</p>
<ul>
<li>packet switching, circuit switching, network, structure</li>
</ul>
<p><strong>1.4</strong> delay, loss, throughput in networks</p>
<p><strong>1.5</strong> protocol layers, service models</p>
<p><strong>1.6</strong> networks under attack: security</p>
<HR style="FILTER: alpha(opacity=0,finishopacity=100,style=1)" width="100%" color="black" size="2">



<blockquote>
<p>Learning top-down, we have 5 layer about computer network</p>
</blockquote>
<ul>
<li>Application: supporting network applications<ul>
<li>IMAP, SMTP, HTTP</li>
</ul>
</li>
<li>Transport: process-process data transfer<ul>
<li>TCP, UDP</li>
</ul>
</li>
<li>Network: routing of datagrams from source to destination<ul>
<li>IP, routing protocols</li>
</ul>
</li>
<li>Link: data transfer between neighboring  network elements<ul>
<li>Ethernet, 802.11 (WiFi), P2P</li>
</ul>
</li>
<li>Physical: bits “on the wire”</li>
</ul>
<h2 id="1-1-Structure-of-Internet"><a href="#1-1-Structure-of-Internet" class="headerlink" title="1.1. Structure of Internet"></a>1.1. Structure of Internet</h2><table>
<tr>
<td><img src="/2024/09/09/Computer-Networks/cn1.png" style="zoom:60%"></td>
<td><img src="/2024/09/09/Computer-Networks/cn2.png" style="zoom:60%"></td>
</tr>
</table>



<h2 id="1-2-Network-edge"><a href="#1-2-Network-edge" class="headerlink" title="1.2. Network edge"></a>1.2. Network edge</h2><ul>
<li>end systems (hosts):<ul>
<li>run application programs</li>
<li>e.g. Web, email</li>
<li>at “edge of network”</li>
</ul>
</li>
<li>client/server model<ul>
<li>client host requests, receives service from always-on server</li>
<li>e.g., Web browser/server; email client/server</li>
</ul>
</li>
<li>peer-peer model:<ul>
<li>minimal (or no) use of dedicated servers</li>
<li>e.g. Skype,  BitTorrent</li>
</ul>
</li>
</ul>
<p><strong>Hosts: sends packets of data</strong></p>
<p>Host sending function:</p>
<ul>
<li>takes application message</li>
<li>breaks into smaller chunks, known as packets, of length $L$ bits</li>
<li>transmits packet into access network at transmission rate $R$<ul>
<li>aka link capacity, bandwidth (即链路容量或带宽)</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn3.png" style="zoom:80%"></p>
<blockquote class="blockquote-center">
<p>$<br>\text{packet transmission delay}=\frac{L\text{(bits)}}{R\text{(bits/sec)}}<br>$</p>

</blockquote>
<h2 id="Plus-Access-Networks-接入网"><a href="#Plus-Access-Networks-接入网" class="headerlink" title="Plus: Access Networks(接入网)"></a>Plus: Access Networks(接入网)</h2><p><strong>Def.</strong> The network that physically connects an <font color="red">end system</font> to the <font color="red">first router (edge router)</font> on a path from the end system to any other distant end system.</p>
<p>Different kinds of access networks:</p>
<ul>
<li>Cable network</li>
<li>Digital subscriber line (DSL)</li>
<li>Home network</li>
<li>Wireless access network</li>
<li>Enterprise access network</li>
</ul>
<p><strong>Cable network</strong></p>
<p><img src="/2024/09/09/Computer-Networks/cn4.png" style="zoom:60%"></p>
<ul>
<li>Cable Internet access makes use of the cable television company’s existing <font color="blue">cable television infrastructure</font>.</li>
<li>Shared broadcast medium<ul>
<li>Shared downstream and upstream</li>
<li>Distributed multiple access control: avoid collision (分频段控制)</li>
</ul>
</li>
<li>Applying Frequency division multiplexing (频分复用)</li>
<li>Hybrid fiber coax (HFC): fiber + coaxial cable (光纤+同轴电缆)<ul>
<li>asymmetric: up to 30 Mbps downstream transmission rate(下行传输效率), 2 Mbps upstream transmission rate</li>
</ul>
</li>
<li>network of cable, fiber attaches homes to ISP router<ul>
<li>homes share access network to cable headend(多家庭网络接入同一电缆头部)</li>
</ul>
</li>
</ul>
<p><strong>DSL(digital subscriber line)</strong></p>
<ul>
<li>Digital subscriber line (DSL) makes use of the its wired local phone(有线本地电话) access of local telephone company (telco).</li>
<li>Use existing telephone line to central office DSLAM<ul>
<li>data over DSL phone line goes to Internet</li>
<li>voice over DSL phone line goes to telephone net</li>
</ul>
</li>
<li>&lt; 2.5 Mbps upstream transmission rate (typically &lt; 1 Mbps)</li>
<li>&lt; 24 Mbps downstream transmission rate (typically &lt; 10 Mbps)</li>
</ul>
<p><strong>Wireless Access Network</strong></p>
<ul>
<li>Shared wireless access network connects end systems to router<ul>
<li>via base station aka “access point”</li>
</ul>
</li>
<li>Wireless LANs(WLAN):<ul>
<li>within building (100 ft)</li>
<li>802.11b/g/n/ac (WiFi): 11, 54, 800, 1733 Mbps transmission rate</li>
</ul>
</li>
<li>Wide-area wireless access<ul>
<li>provide by telco (cellular) operator</li>
<li>10 Mbps, 100Mbps, 10Gbps </li>
<li>3G, 4G, 5G</li>
</ul>
</li>
</ul>
<blockquote>
<p>补充：信号传输物理介质</p>
<ul>
<li>单位：bit</li>
<li>有向介质<ul>
<li>固体介质如铜，光纤和同轴缆线</li>
</ul>
</li>
<li>无向介质<ul>
<li>无线电</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="1-3-Network-Core-网络核心"><a href="#1-3-Network-Core-网络核心" class="headerlink" title="1.3. Network Core(网络核心)"></a>1.3. Network Core(网络核心)</h2><p><strong>Def.</strong>  The mesh(链路网格) of packet switches and links that interconnects the Internet’s end systems.</p>
<h3 id="Packet-switching-vs-Circuit-switching"><a href="#Packet-switching-vs-Circuit-switching" class="headerlink" title="Packet switching vs. Circuit switching"></a>Packet switching vs. Circuit switching</h3><p><strong>Packet Switching</strong></p>
<p>Basic thought: Hosts break long messages into packets and each packet is forwarded independently.</p>
<p><img src="/2024/09/09/Computer-Networks/cn5.png" style="zoom:60%"></p>
<ul>
<li><font color="red">store-and-forward</font></li>
<li>each packet is transmitted at <font color="red">full link capacity</font></li>
<li><font color="red">not reserved</font> → queueing delay and packet loss<ul>
<li>queuing delay: packets will queue, wait to be transmitted on link</li>
<li>packet loss(丢包): packets can be dropped (lost) if memory (buffer) fills up</li>
</ul>
</li>
</ul>
<blockquote>
<p>Make it clear: what’s routing ? what’s forwarding ?</p>
<p><font color="red">Routing</font> is global actions: determine source-destination paths taken by packets, and need routing algorithm</p>
<p><font color="red">Forwarding</font> is local actions (inside 1 router): move arriving packets from router’s input link to appropriate router output link</p>
</blockquote>
<p><strong>Circuit Switching: FDM vs. TDM</strong></p>
<p>Basic thought: Determine path before the message being transmitted (called).</p>
<ul>
<li>Advantage: Guaranteed constant rate</li>
<li>Reserved (dedicated resources): buffer, link</li>
<li>Limitation: Circuit idle（空闲）if not used by call (no sharing)</li>
</ul>
<ul>
<li>About <strong>FDM</strong>(频分复用) and <strong>TDM</strong>(时分复用)<ul>
<li>FDM divides frequencies into (narrow) frequency bands → bandwidth<ul>
<li>transmit at max rate of that narrow band</li>
</ul>
</li>
<li>TDM divides time into slots<ul>
<li>at maximum rate of (wider) frequency band, but only during its time slot(s)</li>
<li>have T virtual links in each frame (graph below)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn6.png" style="zoom:60%"></p>
<p>An example to calculate delay in <strong>Circuit Switching</strong>: </p>
<p><img src="/2024/09/09/Computer-Networks/cn7.png" style="zoom:60%"></p>
<p align="center">----- COMPARISON -----</p>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Packet Switching</th>
<th style="text-align:center">Circuit Switching</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">not reserved</td>
<td style="text-align:center">reserved (dedicated resources):<br>buffer, link, transmission rate</td>
</tr>
<tr>
<td style="text-align:center">packet forwarded independently(每步独立)</td>
<td style="text-align:center">establish an end-to-end link</td>
</tr>
<tr>
<td style="text-align:center">at full link capacity</td>
<td style="text-align:center">a fraction of each link’s capacity</td>
</tr>
<tr>
<td style="text-align:center">queuing delay</td>
<td style="text-align:center">guaranteed constant rate</td>
</tr>
<tr>
<td style="text-align:center">packet loss</td>
<td style="text-align:center">circuit segment idle</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>Therefore, Packet Switching is more used in network(more users but have low prob to online at the same time), Circuit Switching is more used in telephone call(assuring rate and connection).</p>
</blockquote>
<h3 id="Network-Structure"><a href="#Network-Structure" class="headerlink" title="Network Structure"></a>Network Structure</h3><p><img src="/2024/09/09/Computer-Networks/cn8.png" style="zoom:60%"></p>
<ul>
<li>Different ISPs from different business</li>
<li><font color="red">Internet exchange point(IXP)</font> as a connection between ISPs, or direct linking by <font color="red">peering links</font></li>
<li>Regional network may arise to connect access nets to ISPs</li>
<li><font color="red">Content provider networks</font>(e.g. Google, Microsoft) may run their own network, to bring services, content close to end users.</li>
</ul>
<h2 id="1-4-Performance-Metric"><a href="#1-4-Performance-Metric" class="headerlink" title="1.4. Performance Metric"></a>1.4. Performance Metric</h2><ul>
<li>Delay<ul>
<li>Nodal delay &amp; end-to-end delay</li>
</ul>
</li>
<li>Packet Loss</li>
<li>Throughput<ul>
<li>the amount of data per second that can be transferred between end systems</li>
</ul>
</li>
</ul>
<font color="green">Recall: Packet Switching would make packets queuing at each router(delay), if a router is full, the new packet would be dropped(loss).</font>



<h3 id="Delay-Nodal-vs-End-to-end"><a href="#Delay-Nodal-vs-End-to-end" class="headerlink" title="Delay: Nodal vs. End-to-end"></a>Delay: Nodal vs. End-to-end</h3><p><strong>Nodal Delay</strong></p>
<blockquote class="blockquote-center">
<p>$<br>d_{\text{nodal}}=d_{\text{proc}}+d_{\text{queue}}+d_{\text{trans}}+d_{\text{prop}}<br>$</p>

</blockquote>
<ul>
<li>$d_{\text{proc}}$ : nodal processing<ul>
<li>check bit errors</li>
<li>determine output link</li>
<li>typically &lt; 1 msec</li>
</ul>
</li>
<li>$d_{\text{queue}}$ : <ul>
<li>time waiting at output link for transmission </li>
<li>depends on congestion(拥堵) level of router</li>
</ul>
</li>
<li>$d_{\text{trans}}$ : 传输时延<ul>
<li>$L$: packet length (bits) </li>
<li>$R$: transmission rate (bps)</li>
<li>$d_{\text{trans}} = L/R$</li>
</ul>
</li>
<li>$d_{\text{prop}}$ : 传播时延<ul>
<li>$d$: length of physical link</li>
<li>$s$: propagation speed in medium (~$2x10^8$ m/sec)</li>
<li>$d_{\text{prop}} = d/s$</li>
</ul>
</li>
</ul>
<blockquote>
<p>Easy way to understand $d_{\text{trans}}$ and $d_{\text{prop}}$</p>
<p>Assume that a ten-car caravan(packets) is moving through tollbooth (end/routers). Think of a car as a bit data.<br>Suppose that the Tollbooth takes 12 sec to service one car (transmission time) and cars runs at a speed of 100 km/hr (propagation speed).</p>
<font color="red">Q: How long does it take the <b>last car</b> to arrive at the 2nd tollbooth?</font>

<p>Now the time to “push” entire caravan through tollbooth onto highway = 12 * 10 = 120 sec, known as <font color="blue">Transmission Delay</font>;</p>
<p>The time for last car to propagate from 1st to 2nd tollbooth: 100km / (100km/hr) = 1 hr, known as <font color="blue">Propagation Delay</font>.</p>
<font color="green">A: 62 mins</font>



</blockquote>
<ul>
<li>Special: Queuing Delay — Vary from packet to packet<ul>
<li>When characterizing queuing delay, statistical measures:<ul>
<li>average queuing delay</li>
<li>variance of queuing delay</li>
<li>the probability that the queuing delay exceeds some specified value</li>
</ul>
</li>
<li>Use Traffic intensity $=\lambda L / R$ to measure avg queuing delay.<ul>
<li>$\lambda$ : average packet arrival rate (packets per sec)</li>
<li>$\lambda L / R \to 0$: avg. queueing delay small</li>
<li>$\lambda L / R \to 1$: avg. queueing delay $\to \infty$ (queuing theory)</li>
<li>$\lambda L / R \gt 1$: more “work” arriving than can be serviced, average delay infinite!</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>End-to-end Delay</strong></p>
<blockquote class="blockquote-center">
<p>$<br>d_{\text{end-end}}=N(d_{\text{proc}}+d_{\text{trans}}+d_{\text{prop}})<br>$</p>

</blockquote>
<p align="center">What do "real" Internet delay & loss look like?</p>

<blockquote>
<p>Refer to <a href="#lab01">Lab 1</a></p>
</blockquote>
<h3 id="Throughput-吞吐量"><a href="#Throughput-吞吐量" class="headerlink" title="Throughput(吞吐量)"></a>Throughput(吞吐量)</h3><p><strong>Def.</strong> rate (bits/time unit) at which bits transferred between sender/receiver.</p>
<blockquote>
<p>Throughput is decided by the pipe with minimum fluid-carry-rate.</p>
</blockquote>
<ul>
<li>More complex condition: 10 connections (fairly) share backbone bottleneck link R bits/sec<ul>
<li>Per-connection end-end throughput: $\min{\{R_c, R_s, R/10\}}$</li>
<li>In practice: $R_c$ or $R_s$ is often bottleneck</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn9.png" style="zoom:40%"></p>
<h2 id="1-5-Protocol-layers-amp-Service-models"><a href="#1-5-Protocol-layers-amp-Service-models" class="headerlink" title="1.5. Protocol layers &amp; Service models"></a>1.5. Protocol layers &amp; Service models</h2><blockquote>
<font color="red">Q: Why layering?</font>

<p>To deal with complex systems: </p>
<ul>
<li>Explicit structure allows identification, relationship of complex system’s pieces</li>
<li>modularization eases maintenance, updating of system</li>
</ul>
<font color="red">Q: Any drawbacks?</font>

<ul>
<li>One layer may duplicate lower layer functionality</li>
<li>Functionality at one layer may need information that is present only in another layer</li>
</ul>
</blockquote>
<ul>
<li>An easy model to describe how networks layering:</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn10.png" style="zoom:60%"></p>
<ul>
<li>Layers: Each layer provide services to the layer above<ul>
<li>via its own internal-layer actions</li>
<li>relying on services provided by layer below</li>
</ul>
</li>
</ul>
<p><strong>Encapsulation</strong></p>
<ul>
<li>Used to keep content of data safe and assure the layer below to acquire enough info to transmit.</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn11.png" style="zoom:40%"></p>
<h2 id="1-6-Security"><a href="#1-6-Security" class="headerlink" title="1.6. Security"></a>1.6. Security</h2><p><strong>Attack Type</strong></p>
<ol>
<li>Malware(恶意软件) into hosts via Internet<ul>
<li>virus</li>
<li>worm</li>
</ul>
</li>
<li>Attack server: Denial of Service(DoS), make resources(server, bandwidth) unavailable to legitimate(合法的) traffic by overwhelming resource with bogus(伪造的) traffic.<ul>
<li>aka. 更改 domain 地址</li>
</ul>
</li>
<li>Sniff packets(拆包，拦截):<ul>
<li>broadcast media</li>
<li>read all packets passing by</li>
</ul>
</li>
<li>Use fake addresses:<ul>
<li>send packet with false source address</li>
</ul>
</li>
</ol>
<p><strong>Defense Lines</strong></p>
<ul>
<li>authentication</li>
<li>confidentiality(密保): via encryption</li>
<li>integrity checks(多重检测)</li>
<li>access restrictions</li>
<li>firewalls: <ul>
<li>off-by-default: filter packets</li>
<li>detecting / reacting to DoS attacks</li>
</ul>
</li>
</ul>
<h1 id="Chapter-2-Application-Layer"><a href="#Chapter-2-Application-Layer" class="headerlink" title="Chapter 2: Application Layer"></a>Chapter 2: Application Layer</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>2.1</strong> principles of network applications</p>
<p><strong>2.2</strong> Web and HTTP</p>
<p><strong>2.3</strong> Electronic mail</p>
<ul>
<li>SMTP, POP3, IMAP</li>
</ul>
<p><strong>2.4</strong> DNS</p>
<p><strong>2.5</strong> P2P applications</p>
<p><strong>2.6</strong> video streaming and content distribution networks</p>
<p><strong>2.7</strong> socket programming with UDP and TCP</p>
<HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<blockquote>
<p>Learning Goals: </p>
<p>有关网络应用协议的概念与实现：包括用户-服务端架构，peer-to-peer 架构和传输层服务模型</p>
<p>学习一些广泛使用的应用层协议：如HTTP，POP3，DNS等</p>
<p>学习如何搭建简单网络应用：assignment 1 相关，用 python 建立用户-服务端之间的相互通信</p>
</blockquote>
<h2 id="2-1-Principles-of-network-applications"><a href="#2-1-Principles-of-network-applications" class="headerlink" title="2.1. Principles of network applications"></a>2.1. Principles of network applications</h2><ul>
<li>Consider building a network application :<ul>
<li><font color="red">Q1: Which architecture?</font> client-server or peer-to-peer?</li>
<li><font color="red">Q2: Which transport layer protocol to choose?</font> TCP? UDP?</li>
<li><font color="red">Q3: Which protocol to follow?</font> HTTP for Web? SMTP for email? Customized?</li>
</ul>
</li>
</ul>
<h3 id="Architecture-of-network"><a href="#Architecture-of-network" class="headerlink" title="Architecture of network"></a>Architecture of network</h3><p><strong>Client-Server Architecture</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Server</th>
<th style="text-align:center">Client</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">always-on host</td>
<td style="text-align:center">communicate with server(can shutdown)</td>
</tr>
<tr>
<td style="text-align:center">permanent(fixed, well-known) IP address</td>
<td style="text-align:center">may have dynamic IP addresses</td>
</tr>
<tr>
<td style="text-align:center">data centers for scaling</td>
<td style="text-align:center">no direct communication with each other</td>
</tr>
</tbody>
</table>
</div>
<p><strong>P2P Architecture</strong></p>
<ul>
<li><em>no</em> always-in server, directly communicate</li>
<li>peers <em>request</em> service from other peers, <em>provide</em> service in return to otehr peers<ul>
<li><font color="red">self scalability:</font> new peers bring new service capacity and new service demands</li>
</ul>
</li>
</ul>
<blockquote>
<p>Hybrid arch: client-server + P2P</p>
</blockquote>
<h3 id="Transport-layer-protocol"><a href="#Transport-layer-protocol" class="headerlink" title="Transport layer protocol"></a>Transport layer protocol</h3><blockquote>
<p>Q: How do apps (at end systems) exchange messages? (E.g. how does a browser exchange message with a server?)</p>
<p>A: Split to 2 questions:</p>
<ul>
<li><font color="red">Who send/recv msg to/from network?</font> <font color="green">Process(进程)</font></li>
<li><font color="red">Where does process send/recv msg to/from?</font> <font color="green">Sockets(套接字)</font>

</li>
</ul>
</blockquote>
<p>Comparison:</p>
<ol>
<li><ul>
<li>Processes within same host communicate using  <font color="red">inter-process communication</font> (defined by OS)</li>
<li>Processes in different hosts communicate by exchanging messages across the <font color="red">computer network</font></li>
</ul>
</li>
<li><ul>
<li><strong>client process:</strong> process that initiates communication (发送方轮询)</li>
<li><strong>server process:</strong> process that waits to be contacted (接收方阻塞)</li>
</ul>
</li>
<li>(2) is compatible in :<ul>
<li>Client-server architecture</li>
<li>P2P architectures having client processes &amp; server processes</li>
</ul>
</li>
</ol>
<h4 id="Interface-between-Process-and-Computer-Networks-Sockets"><a href="#Interface-between-Process-and-Computer-Networks-Sockets" class="headerlink" title="Interface between Process and Computer Networks: Sockets"></a>Interface between Process and Computer Networks: Sockets</h4><p><img src="/2024/09/09/Computer-Networks/cn12.png"></p>
<ul>
<li><p>Process sends/receives messages to/from the network through socket</p>
<ul>
<li><font color="blue">sending process</font> shoves(推送) message <strong>“out door”</strong></li>
<li><font color="blue">sending process</font> relies on transport infrastructure (on other side of door) to deliver message to socket at <font color="blue">receiving process</font>
</li>
</ul>
</li>
<li><p>To receive messages, sockets must be identified by</p>
<ul>
<li>The address of the host: <font color="red">IP address</font></li>
<li>An identifier that specifies the receiving process/socket: <font color="red">port numbers</font> (标识进程)</li>
<li>Some default port number:<ul>
<li>HTTP server: 80</li>
<li>HTTPS server: 433</li>
<li>mail server: 25</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<font color="red">Q: How to choose transport service?</font>

<font color="green">A: choose one of the available transport-layer protocols (e.g., UDP, TCP)</font>

</blockquote>
<ul>
<li>Measurements for transport service choosing:<ul>
<li>Throughput</li>
<li>Timing</li>
<li>Security</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn13.png"></p>
<ul>
<li>以上是部分应用的需求，下面我们可以看到这些应用选择了哪项传输服务。</li>
</ul>
<h4 id="Brief-looking-on-transport-protocols"><a href="#Brief-looking-on-transport-protocols" class="headerlink" title="Brief looking on transport protocols"></a>Brief looking on transport protocols</h4><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">TCP Service</th>
<th style="text-align:center">UDP Service</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><font color="red">connection-oriented:</font> setup required between client and server processes (TCP connection/full-duplex)</td>
<td style="text-align:center"><font color="red">connectionless</font></td>
</tr>
<tr>
<td style="text-align:center"><font color="red">reliable transport</font> between sending and receiving process</td>
<td style="text-align:center"><font color="red">unreliable data transfer</font> between sending and receiving process</td>
</tr>
<tr>
<td style="text-align:center"><font color="red">congestion(拥堵) control</font>: throttle(阻断) sender when network overloaded</td>
<td style="text-align:center">-</td>
</tr>
<tr>
<td style="text-align:center"><font color="red">no provide</font>: timing, minimum throughput guarantee, security</td>
<td style="text-align:center"><font color="red">no provide</font>: reliability, congestion control, timing, throughput guarantee, security, or connection setup</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>注意！TCP 和 UDP 都不直接保证安全性。TCP 保证连接稳定，UDP 保证传输效率。</p>
<p>UDP 适用于时间敏感的通信中。当遇到丢包比延迟要好的情况时，就使用 UDP 传输。</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn14.png"></p>
<h3 id="Application-level-protocols-Brief"><a href="#Application-level-protocols-Brief" class="headerlink" title="Application-level protocols (Brief)"></a>Application-level protocols (Brief)</h3><ul>
<li>App-layer protocol defines<ul>
<li><font color="red">types of messages exchanged</font><ul>
<li>e.g., request, response </li>
</ul>
</li>
<li><font color="red">message syntax (语法)</font><ul>
<li>what fields in messages &amp; how fields are delineated</li>
</ul>
</li>
<li><font color="red">message semantics (语义)</font> <ul>
<li>meaning of information in fields</li>
</ul>
</li>
<li><font color="red">rules</font> for when and how processes send &amp; respond to messages</li>
</ul>
</li>
</ul>
<blockquote>
<p>应用层协议只是应用的一部分：</p>
<p>以 Web 为例：Web 是一个服务端-客户端应用，允许用户从 Web 服务器获取文档，其组成有</p>
<ul>
<li>一个文档标准格式（HTML）</li>
<li>Web 浏览器（Browsers）</li>
<li>Web 服务器</li>
<li>应用层协议</li>
</ul>
</blockquote>
<h2 id="2-2-Web-and-HTTP"><a href="#2-2-Web-and-HTTP" class="headerlink" title="2.2. Web and HTTP"></a>2.2. Web and HTTP</h2><ul>
<li><font color="red">Web page</font> consists of <font color="red">base HTML-file</font> which includes <font color="red">several referenced objects</font></li>
<li>each object is addressable by a <font color="red">URL</font></li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn15.png"></p>
<ul>
<li>Web<ul>
<li>client-server architecture</li>
<li>use HTTP as its application layer protocol</li>
</ul>
</li>
<li>HTTP (hypertext transfer protocol) defines <ul>
<li>HTTP request: how <font colo="red">Web clients request</font> Web pages from Web servers</li>
<li>HTTP response: how <font color="red">servers transfer</font> Web pages to clients</li>
</ul>
</li>
</ul>
<table>
    <tr>
        <td><p>Client-server architecture:</p><p><font color="red">client</font>: browser that requests, receives, (using HTTP protocol) and “displays” Web objects</p><p><font color="red">server</font>: Web server sends (using HTTP protocol) objects in response to  requests</p></td>
        <td><img src="/2024/09/09/Computer-Networks/cn16.png"></td>
    </tr>
</table>

<h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p><strong>Outline</strong></p>
<ul>
<li>HTTP Overview<ul>
<li>HTTP runs over TCP</li>
<li>HTTP is stateless</li>
<li>Persistent and non-persistent connection</li>
</ul>
</li>
<li>Request and response messages</li>
<li>Cookies</li>
<li>Web caching</li>
</ul>
<h4 id="HTTP-overview-TCP"><a href="#HTTP-overview-TCP" class="headerlink" title="HTTP overview: TCP"></a>HTTP overview: TCP</h4><ul>
<li>client initiates TCP connection (creates socket) to server,  port 80</li>
<li>server accepts TCP connection from client</li>
<li>HTTP messages (application-layer protocol messages) exchanged between browser (HTTP client) and Web server (HTTP server)</li>
<li>TCP connection closed</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn17.png"></p>
<p><b><font color="red">HTTP is “stateless” !</font></b></p>
<ul>
<li>Server maintains no information about past client requests.</li>
<li>If a client asks for the same object twice, the server resends the object.</li>
</ul>
<p><b><font color="red">Persistent &amp; non-persistent connection</font></b></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">persistent HTTP</th>
<th style="text-align:center">non-persistent HTTP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">multiple objects can be sent over single TCP connection between client and server</td>
<td style="text-align:center">at most one object sent over TCP connection, then connection closed</td>
</tr>
<tr>
<td style="text-align:center">server leaves connection open after sending response;<br>server closes a connection when it isn’t used <font color="red">for a certain time</font></td>
<td style="text-align:center">OS overhead (TCP buffer, variables) for each TCP connection</td>
</tr>
<tr>
<td style="text-align:center">client sends requests <font color="red">as soon as</font> it encounters a referenced object</td>
<td style="text-align:center">browsers often open <font color="red">parallel TCP connections</font> to fetch referenced objects</td>
</tr>
</tbody>
</table>
</div>
<center>-----        Calculation        -----</center>

<blockquote>
<p><strong>Conception.</strong> RTT(round-trip-time) is time for a small packet to travel from client to server and back (一个来回)</p>
</blockquote>
<ul>
<li>For persistent HTTP, time from init TCP conn to, e.g., $n$ times files received is : <blockquote class="blockquote-center">
<p>$<br>\text{Time}=1\text{RTT}+n\times\text{RTT}<br>$</p>

</blockquote></li>
<li>For non-persistent HTTP, is :<blockquote class="blockquote-center">
<p>$<br>\text{Time} = 2\times \text{RTT}<br>$</p>

</blockquote>
</li>
</ul>
<h4 id="Messages"><a href="#Messages" class="headerlink" title="Messages"></a>Messages</h4><ol>
<li>HTTP request messages</li>
</ol>
<table><tr>
    <td><img src="/2024/09/09/Computer-Networks/cn18.png"></td>
    <td><img src="/2024/09/09/Computer-Networks/cn19.png"></td>
</tr><tr>
    <td>Particular case</td>
    <td>General cases</td>
</tr></table>

<ol>
<li>HTTP response messages</li>
</ol>
<table><tr>
    <td><img src="/2024/09/09/Computer-Networks/cn20.png"></td>
    <td><img src="/2024/09/09/Computer-Networks/cn21.png"></td>
</tr><tr>
    <td>Particular case</td>
    <td>General cases</td>
</tr></table>

<p><strong>Status Code</strong></p>
<ul>
<li><code>200 OK</code></li>
<li><code>301 Moved Permanently</code></li>
<li><code>400 Bad Request</code></li>
<li><code>404 Not Found</code></li>
<li><code>505 HTTP Version Not Supported</code></li>
</ul>
<h4 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h4><blockquote>
<p>因为 HTTP 是无状态的，但是 Web 应用有保存用户状态的需求，所以需要一个机制识别用户</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn22.png"></p>
<blockquote>
<p>Cookies 的工作原理</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn23.png"></p>
<ul>
<li>Cookies are associated with <font color="red">web browser</font><ul>
<li>E.g. Suppose “Bob” register for Amazon server, then he get a cookie for himself (user-level), but “Susan” have no cookie for Amazon. If she also register(even in same host), the web browser will store a cookie for her.</li>
</ul>
</li>
<li>Cookies and privacy:<ul>
<li>cookies permit sites to learn a lot about you</li>
<li>you may supply name and e-mail to sites</li>
</ul>
</li>
</ul>
<h4 id="Web-caches-proxy-代理-server"><a href="#Web-caches-proxy-代理-server" class="headerlink" title="Web caches: proxy(代理) server"></a>Web caches: proxy(代理) server</h4><blockquote>
<p>目的：用户无需访问原始服务器来获取资源</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn24.png"></p>
<ul>
<li>Cache (Proxy server) acts as both client and server<ul>
<li>server for original requesting client</li>
<li>client to origin server</li>
</ul>
</li>
<li>typically cache is <font color="red">installed by ISP</font> (university, company, residential ISP)</li>
<li>Why Web caching?<ul>
<li><font color="green">reduce <u>response time</u> for client request (bottleneck bandwidth)</font></li>
<li><font color="green"><u>reduce traffic</u> on an institution’s access link</font></li>
<li><font color="green">Internet dense with caches: enables “poor” content providers to <u>effectively deliver content</u> (so does P2P file sharing)</font>



</li>
</ul>
</li>
</ul>
<center>-----        Calculation        -----</center>

<ul>
<li>Assume that<ul>
<li>avg object size: $1M$ bits</li>
<li>avg request rate from browsers to origin servers: $15$ requests/sec</li>
<li>avg data rate to all browsers: $15 Mbps$</li>
<li>RTT from router A to any origin server: 2 sec (Internet delay)</li>
<li>access link rate: $15.4 Mbps$</li>
</ul>
</li>
<li>Consequences:<ul>
<li>LAN utilization: $15Mbps/100Mbps=0.15$</li>
<li>access link utilization: $15/15.4=0.974$</li>
<li>total delay = Internet delay + access delay + LAN delay = $2sec+\text{minutes} + \text{milliseconds}$</li>
</ul>
</li>
</ul>
<table><tr>
    <td><img src="/2024/09/09/Computer-Networks/cn25.png"></td>
    <td><img src="/2024/09/09/Computer-Networks/cn26.png"></td>
</tr><tr>
    <td><center>Large access link</center></td>
    <td><center>Cache server</center></td>
</tr></table>

<ul>
<li>Assume that<ul>
<li>access link rate: 150 Mbps (p1)</li>
</ul>
</li>
<li>Therefore:<ul>
<li>access link utilization: $15/150=0.1$</li>
<li>total delay = $2sec + \text{milliseconds} + \text{milliseconds}$</li>
</ul>
</li>
</ul>
<ul>
<li>Now we have cache server ! (p2)<ul>
<li>suppose cachee hit rate is 0.4 (40% at cache, 60% at origin)</li>
</ul>
</li>
<li>Therefore:<ul>
<li>(avg) data rate to browsers over access link $=0.6\times 15 Mbps=9Mbps$</li>
<li>(avg) access link utilization $=9/15.4=0.58$</li>
<li>avg delay $=0.6\times \text{(delay from origin servers)}+0.4\times \text{(delay when satisfied at  cache)}=0.6\times 2.01 +0.4\times (~msecs) = ~1.2secs$</li>
<li>Conclusion: faster than with 150 Mbps link and cheaper!</li>
</ul>
</li>
</ul>
<center>-----        Calculation End        -----</center>

<blockquote>
<p>Q: 用户向代理服务器请求内容，如果初始服务器的内容更改，而代理服务器的内容未更新，如何解决？</p>
<p>A: Conditional <code>GET</code> → <code>GET</code> method + <code>If-Modified-Since</code></p>
</blockquote>
<ul>
<li>Proxy cache: specify date of cached copy in HTTP request: <code>If-modified-since: &lt;date&gt;</code></li>
<li>Server: response contains no object if cached copy is up-to-date: <code>HTTP/1.0 304 Not Modified</code> or <code>HTTP /1.0 200 OK</code> if modified</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn27.png"></p>
<h2 id="2-3-Electronic-Mail"><a href="#2-3-Electronic-Mail" class="headerlink" title="2.3. Electronic Mail"></a>2.3. Electronic Mail</h2><ul>
<li>Overview<ul>
<li>Main components</li>
<li>Alice sends an email to Bob</li>
</ul>
</li>
<li>SMTP</li>
<li>Mail Message Format</li>
<li>Mail Access Protocol<ul>
<li>POP3</li>
<li>IMAP</li>
<li>HTTP: Web-based Email</li>
</ul>
</li>
</ul>
<h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p><img src="/2024/09/09/Computer-Networks/cn28.png"></p>
<p>3 major components:</p>
<ul>
<li>User agents<ul>
<li>Allow users to read, reply to, forward, save and compose messages</li>
<li>e.g. Outlook, iPhone mail client</li>
</ul>
</li>
<li>Mail servers<ul>
<li>Always-on hosts</li>
<li><font color="red">User mailbox</font> contains outgoing, incoming messages</li>
<li><font color="red">Message queue</font> of outgoing (to be sent) mail messages</li>
<li><font color="red">Simple Mail Transfer Protocol (SMTP)</font> between mail servers to send email messages (见上图)</li>
<li>Both client and server sides of SMTP run on mail server.<ul>
<li>client process: sending mail server</li>
<li>server  process: receiving mail server</li>
</ul>
</li>
</ul>
</li>
<li><font color="red">simple mail transfer protocol</font> (SMTP): use TCP</li>
</ul>
<p><strong>Learning by scenario: Alice sends message to Bob</strong></p>
<p><img src="/2024/09/09/Computer-Networks/cn29.png"></p>
<ol>
<li>Alice uses user agent to compose message “to” <code>bob@hamburger.edu</code></li>
<li>Alice’s user agent sends message to her mail server; message placed in message queue</li>
<li>client side of SMTP opens TCP connection with Bob’s mail server</li>
<li>SMTP client sends Alice’s message over the TCP connection</li>
<li>Bob’s mail server places the message in Bob’s mailbox</li>
<li>Bob invokes his user agent to read message</li>
</ol>
<h3 id="Simple-Mail-Transfer-Protocol-SMTP"><a href="#Simple-Mail-Transfer-Protocol-SMTP" class="headerlink" title="Simple Mail Transfer Protocol(SMTP)"></a>Simple Mail Transfer Protocol(SMTP)</h3><table><tr>
    <td><ul><li>Uses TCP to reliably transfer email message from client to server, port 25</li><li>Direct transfer: sending server to receiving server (no intermediate server)</li><li>Three phases of transfer</li><ul><li>handshaking (greeting): indicate email address</li><li>transfer of messages: persistent connection</li><li>closure</li></ul><li>Two types of messages (like HTTP)</li><ul><li>commands: text</li><li>response: status code and phrase</li></ul></ul></td>
    <td><img src="/2024/09/09/Computer-Networks/cn30.png"></td>
</tr></table>



<font color="red">Properties of SMTP :</font>


<ul>
<li>SMTP uses persistent connections</li>
<li>SMTP requires message (header &amp; body) to be in  ASCII</li>
<li>SMTP server uses <font color="red">CRLF</font>(回车换行符) to determine end of message</li>
</ul>
<p>Comparison with HTTP :</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">HTTP</th>
<th style="text-align:center">SMTP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">pull</td>
<td style="text-align:center">push //TODO</td>
</tr>
<tr>
<td style="text-align:center">ASCII in header</td>
<td style="text-align:center">ASCII in header and body</td>
</tr>
<tr>
<td style="text-align:center">each object encapsulated in its own response message</td>
<td style="text-align:center">multiple objects sent in one message</td>
</tr>
</tbody>
</table>
</div>
<p><img src="/2024/09/09/Computer-Networks/cn31.png"></p>
<blockquote>
<font color="red">Q: Why not having mail servers directly on user’s local PC?</font>

<font color="green">A: Mail server manages mailboxes and runs the client and server sides of SMTP. (Bob's PC have to remain always on in order to receive new mail)</font>

</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn32.png"></p>
<blockquote>
<font color="red">Q: Why not letting Alice send to Bob’s mail server directly?</font>

<p><font color="green">A: Bob’s mail server may fail; need to repeatedly send the message until success.</font> // TODO</p>
</blockquote>
<h3 id="Mail-Message-Format"><a href="#Mail-Message-Format" class="headerlink" title="Mail Message Format"></a>Mail Message Format</h3><blockquote>
<p>How do you write an e-mail …</p>
<p>Header lines, e.g., <code>To:</code>, <code>From:</code>, <code>Subject:</code>, etc.<br>Body, the messages</p>
</blockquote>
<h3 id="Mail-Access-Protocol"><a href="#Mail-Access-Protocol" class="headerlink" title="Mail Access Protocol"></a>Mail Access Protocol</h3><blockquote>
<p>Well, <code>SMTP</code> is used to delivery mail to receiver’s server (a push operation), but how does Bob obtain the mail ?</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn33.png"></p>
<ul>
<li><strong>POP3</strong>: Post Office Protocol 3: authorization, download <ul>
<li><font color="blue">TCP, port 110(未加密) or 995(加密)</font></li>
</ul>
</li>
<li><strong>IMAP</strong>: Internet Mail Access Protocol: more features, including maintain folders, keep user state</li>
<li><strong>HTTP</strong>: gmail, Hotmail, Yahoo! Mail, etc. [Web-based Email]</li>
</ul>
<ul>
<li>More about <code>POP3</code> ——</li>
<li>Authorization phase<ul>
<li>client commands: <ul>
<li><code>user</code>: declare username</li>
<li><code>pass</code>: password</li>
</ul>
</li>
<li>server responses<ul>
<li><code>+OK</code></li>
<li><code>-ERR</code></li>
</ul>
</li>
</ul>
</li>
<li>Transaction phase<ul>
<li>client:<ul>
<li><code>list</code>: list message numbers</li>
<li><code>retr</code>: retrieve message by number</li>
<li><code>dele</code>: delete</li>
<li><code>quit</code></li>
</ul>
</li>
</ul>
</li>
<li><p>Update phase (After <code>Quit</code>, the mail server deletes the messages marked as deletion)</p>
</li>
<li><p>比较 POP3 和 IMAP</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">POP3</th>
<th style="text-align:center">IMAP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">邮件下载到本地设备，通常在下载后会从服务器上删除</td>
<td style="text-align:center">邮件保留在服务器上，用户可以在多个设备上访问同一封邮件</td>
</tr>
<tr>
<td style="text-align:center">不支持在多个设备之间同步邮件</td>
<td style="text-align:center">能够保持所有设备之间的邮件（状态）一致性</td>
</tr>
<tr>
<td style="text-align:center">通常不支持文件夹管理</td>
<td style="text-align:center">支持文件夹管理</td>
</tr>
<tr>
<td style="text-align:center">下载后可以在没有互联网的情况下查看邮件</td>
<td style="text-align:center">设计用于在线访问，包括搜索、标记等操作</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2-4-Domain-Name-System-DNS-重点"><a href="#2-4-Domain-Name-System-DNS-重点" class="headerlink" title="2.4. Domain Name System(DNS) [重点!]"></a>2.4. Domain Name System(DNS) [重点!]</h2><ul>
<li>DNS Services</li>
<li>DNS Structure<ul>
<li>Hierarchical structure</li>
<li>Iterated and recursive query</li>
</ul>
</li>
<li>DNS protocol<ul>
<li>DNS Records</li>
<li>Query and reply messages</li>
</ul>
</li>
<li>Inserting records into DNS</li>
</ul>
<h3 id="DNS-Services"><a href="#DNS-Services" class="headerlink" title="DNS Services"></a>DNS Services</h3><p><strong>Def.</strong> hostname to IP address translation</p>
<ul>
<li>Host aliasing<ul>
<li><code>www.ibm.com</code> (alias) is really <code>servereast.backup2.ibm.com</code> (canonical 本名)</li>
</ul>
</li>
<li>load distribution<ul>
<li>replicated Web servers: many IP addresses correspond to one name (多个 IP 共享一个名字)</li>
<li>rotation distributes the traffic (作用是减轻负担)</li>
</ul>
</li>
</ul>
<blockquote>
<p>How does APPs invoke DNS Service?</p>
</blockquote>
<ol>
<li>An application invokes the client side of DNS<ul>
<li>specifying the hostname that needs to be translated</li>
</ul>
</li>
<li>DNS in the user’s host takes over, sending a query message into the network. <ul>
<li>DNS query and reply messages </li>
<li><font color="blue">UDP datagrams to port 53.</font> (faster)</li>
</ul>
</li>
<li>After a delay, ranging from milliseconds to seconds, DNS in the user’s host receives a DNS reply message that provides the desired mapping.</li>
<li>The <font color="red">mapping (hostname - IP)</font> is then passed to the invoking application.</li>
</ol>
<h3 id="DNS-Structure"><a href="#DNS-Structure" class="headerlink" title="DNS Structure"></a>DNS Structure</h3><blockquote>
<p>为何分层级？</p>
<p>考虑到容错率（单点报错），速度或地区访问差异等。</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn34.png"></p>
<p><strong>Properties.</strong> DNS is a distributed, hierarchical database.</p>
<ul>
<li><font color="red">Root DNS Servers:</font>  find IP address of the <code>.com</code> <font color="red">TLD DNS server</font> (网址越靠后的部分越在顶层)<ul>
<li>Provide the IP addresses of the TLD servers</li>
</ul>
</li>
<li><font color="red">Top-Level Domain (TLD) DNS:</font> client queries <code>.com</code> DNS server to get <code>google.com</code> <font color="red">authoritative DNS server</font><ul>
<li>Top-level domains: com, org, net, edu, aero, jobs, museums; </li>
<li>Top-level country domains: uk, fr, cn, jp;</li>
</ul>
</li>
<li>Authoritative <font color="red">DNS servers:</font> client queries  <code>google.com</code>  DNS server to get  IP address for  <code>www.google.com / scholar.google.com</code><ul>
<li>organization’s own DNS server(s), providing authoritative hostname to IP mappings for organization’s named hosts </li>
<li>can be maintained by <font color="blue">organization</font> or <font color="blue">service provider</font></li>
</ul>
</li>
</ul>
<blockquote>
<p>Local DNS Server</p>
<ul>
<li>Does not strictly belong to hierarchy</li>
<li>Each ISP (residential ISP, company, university) has one<ul>
<li>also called “default name server”</li>
</ul>
</li>
</ul>
<p>When a host connects to an ISP, the ISP provides the <font color="red">IP addresses</font> of one or more of local DNS servers</p>
<p>When host makes DNS query, query is sent to <font color="red">local DNS server</font></p>
<ul>
<li>acts as <font color="blue">proxy</font>, forwards query into hierarchy</li>
<li>has <font color="blue">local cache</font> of recent name-to-address translation pairs (but may be out of date!)</li>
</ul>
</blockquote>
<table>
    <tr>
    <td><img src="/2024/09/09/Computer-Networks/cn35.png"></td>
    <td><img src="/2024/09/09/Computer-Networks/cn36.png"></td>
    </tr><tr>
    <td><center>Iterated query</center></td>
    <td><center>Recursive query</center></td>
    </tr>
</table>

<blockquote>
<p>补充：关于如何解决本地 DNS 缓存过期的问题，目前主流的方法是通过设置合理的 TTL (Time to live) 值。时间到了就会重新查询上游 DNS 服务器。</p>
</blockquote>
<h3 id="DNS-Protocol"><a href="#DNS-Protocol" class="headerlink" title="DNS Protocol"></a>DNS Protocol</h3><p><strong>Properties.</strong> DNS is a distributed database storing <font color="red">resource records</font> (RR).</p>
<blockquote class="blockquote-center">
<p>$<br>\text{RR format}=\text{(name, value, type, TTL)}<br>$</p>

</blockquote>
<ul>
<li><font color="red">type = A</font><ul>
<li><code>name</code> is hostname</li>
<li><code>value</code> is IP address</li>
</ul>
</li>
<li><font color="red">type = NS</font><ul>
<li><code>name</code> is domain (e.g., <code>foo.com</code>)</li>
<li><code>value</code> is hostname of authoritative server for this domain (e.g., <code>dns.foo.com</code>)</li>
</ul>
</li>
<li>type = CNAME<ul>
<li><code>name</code> is alias name for some “canonical” (the real) name</li>
<li><code>www.ibm.com</code> is really <code>servereast.backup2.ibm.com</code></li>
<li><code>value</code> is canonical name</li>
</ul>
</li>
<li><p>type = MX</p>
<ul>
<li><code>value</code> is canonical name(真名) of the mailserver with <code>name</code> (alias name)</li>
</ul>
</li>
<li><p>If a DNS server is <font color="red">authoritative</font> for a particular hostname</p>
<ul>
<li>the DNS server will contain a <u>Type A record</u> for the hostname</li>
<li>(Even if the DNS server is not authoritative, it may contain a Type A record in its cache.) </li>
</ul>
</li>
<li>If a server is <font color="red">not authoritative</font> for a hostname<ul>
<li>the server will contain a <u>Type NS record</u> for the domain that includes the hostname</li>
<li>it will also contain a <u>Type A record</u> that provides the IP address of the DNS server in the <code>value</code> field of the NS record.</li>
</ul>
</li>
<li>Example: an <code>.edu</code> TLD server is not authoritative for <code>gaia.cs.umass.edu</code><ul>
<li><code>(umass.edu, dns.umass.edu, NS)  // NS record</code></li>
<li><code>(dns.umass.edu, 128.119.40.111, A)  // A record</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>DNS 协议支持查询（Query）和回复（Reply）两种操作，且消息的格式相同。</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn37.png"></p>
<p><img src="/2024/09/09/Computer-Networks/cn38.png"></p>
<ul>
<li><p>Example: a reply to an MX query</p>
</li>
<li><p><u>Answer section</u>: Type MX</p>
<ul>
<li>an RR providing the canonical hostname (at <code>value</code>) of a mail server. </li>
</ul>
</li>
<li><u>Additional section</u>: Type A<ul>
<li>the IP address (at <code>value</code>) for the canonical hostname (at <code>name</code>) of the mail server.</li>
</ul>
</li>
</ul>
<h3 id="Inserting-records-into-DNS"><a href="#Inserting-records-into-DNS" class="headerlink" title="Inserting records into DNS"></a>Inserting records into DNS</h3><p><strong>Example</strong></p>
<ul>
<li>New startup “Network Utopia”</li>
<li>Register name <code>networkuptopia.com</code> at <font color="red">DNS register</font> (e.g., Network Solutions)<ul>
<li>provide <font color="red">names, IP addresses</font> of authoritative DNS server (primary and secondary)</li>
<li>registrar inserts two RRs into <code>.com</code> TLD server :<ul>
<li><code>(networkutopia.com, dns1.networkutopia.com, NS)</code></li>
<li><code>(dns1.networkutopia.com, 212.212.212.1, A)</code></li>
</ul>
</li>
</ul>
</li>
<li>Then users can access by recursive query in the ways shown 👇</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn39.png"></p>
<blockquote>
<p>Attack DNS (略)</p>
</blockquote>
<h2 id="2-5-P2P-applications"><a href="#2-5-P2P-applications" class="headerlink" title="2.5. P2P applications"></a>2.5. P2P applications</h2><ul>
<li>Properties<ul>
<li>no always-on server</li>
<li>arbitrary end systems directly communicate</li>
<li>peers are intermittently connected and change IP addresses (IP 可变)</li>
</ul>
</li>
<li>Example<ul>
<li>file distribution (BitTorrent)</li>
<li>Streaming (KanKan)</li>
<li>VoIP (Skype)</li>
</ul>
</li>
</ul>
<h3 id="P2P-vs-Client-Server"><a href="#P2P-vs-Client-Server" class="headerlink" title="P2P vs. Client-Server"></a>P2P vs. Client-Server</h3><p>Question: How much time to distribute file (size F) from one server to N peers?</p>
<ul>
<li>Suppose $u_s$ is server upload capacity, $d_i$ is download capacity of peer $i$</li>
<li>Time to distribute file to all peers $D_{C-S}$ is :</li>
</ul>
<blockquote class="blockquote-center">
<p>$<br>D_{C-S}\ge \max{NF/u_s, F/d_{\text{min}}}<br>$</p>

</blockquote>
<ul>
<li>So the $D$ increases linearly in $N$</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn40.png"></p>
<ul>
<li>As each host provide $u_i$ for uploading capacity</li>
<li>Server must upload at least one copy ($F/u_s$)</li>
<li>time $D_{P2P}$ is :</li>
</ul>
<blockquote class="blockquote-center">
<p>$<br>D_{P2P}\ge \max{F/d_{min}, F/u_s, NF/(u_s+\sum{u_i})}<br>$</p>

</blockquote>
<h3 id="P2P-file-distribution-BitTorrent"><a href="#P2P-file-distribution-BitTorrent" class="headerlink" title="P2P file distribution: BitTorrent"></a>P2P file distribution: BitTorrent</h3><blockquote>
<p>How P2P works 👇</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn41.png"></p>
<ul>
<li>Some points:<ul>
<li><font color="red">TCP connection</font> with other peers</li>
<li>Once get entire file, one will leave or remain in BitTorrent</li>
</ul>
</li>
</ul>
<center>Machanism about BitTorrent</center>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"><font color="red">requesting</font> chunks</th>
<th style="text-align:center"><font color="red">sending</font> chunks: tit-for-tat</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">at any time, different peers have different subsets of file chunks</td>
<td style="text-align:center">maintain a priority list of top-N peers</td>
</tr>
<tr>
<td style="text-align:center">periodically, asks each “neighbor” for list of chunks</td>
<td style="text-align:center">periodically, select one additional peer(“optimistically unchoke”) to start sending chunks, and chokes others</td>
</tr>
<tr>
<td style="text-align:center">request missing chunks, rarest first</td>
<td style="text-align:center">sends chunks to those who sending me chunks at highest rate</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>通俗解释：请求发包优先找请求得最少的，发包优先发请求最多的。(符合常理)</p>
</blockquote>
<p><strong>tit-for-tat</strong></p>
<ul>
<li>(1) Alice “optimistically unchokes” Bob</li>
<li>(2) Alice becomes one of Bob’s top-four providers; Bob reciprocates</li>
<li>(3) Bob becomes one of Alice’s top-four providers</li>
</ul>
<h2 id="2-6-video-streaming-and-content-distribution-networks"><a href="#2-6-video-streaming-and-content-distribution-networks" class="headerlink" title="2.6. video streaming and content distribution networks"></a>2.6. video streaming and content distribution networks</h2><ul>
<li>Challenge<ul>
<li>scale —— how to reach ~1B users?</li>
<li>heterogeneity (异质性) —— different users have different capabilities</li>
<li>video traffic (视频流量) —— major consumer of Internet bandwidth</li>
</ul>
</li>
<li>Solution<ul>
<li>distributed, application-level infrastructure</li>
</ul>
</li>
</ul>
<blockquote>
<p>Video has demand of multiple images per sec (e.g. 60 FPS needs 60 img/sec)</p>
<p>Use redundancy within and between images to decrease # bits used to encode image (前后帧图像分块，同色的块不再传输)</p>
<p>A more efficient way below 👇</p>
</blockquote>
<h3 id="Streaming-multimedia-DASH"><a href="#Streaming-multimedia-DASH" class="headerlink" title="Streaming multimedia: DASH"></a>Streaming multimedia: DASH</h3><ul>
<li>DASH: Dynamic, Adaptive Streaming over HTTP</li>
<li>Server:<ul>
<li>divides video file into <font color="red">multiple chunks</font></li>
<li>each chunk stored, encoded at different rates </li>
<li>manifest file: provides URLs for different chunks encoded at different rates </li>
</ul>
</li>
<li>Client:<ul>
<li>periodically measures server-to-client bandwidth</li>
<li>consulting manifest, requests one chunk at a time <ul>
<li>chooses maximum coding rate sustainable given current bandwidth</li>
<li>can choose different coding rates at different points in time (depending on available bandwidth at time)</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>在这里 client 是自由的。何时请求数据块，用哪种编码速率，向哪个地址请求数据块，都由 client 自己决定。</p>
</blockquote>
<h3 id="Content-Distribution-Network-CDN"><a href="#Content-Distribution-Network-CDN" class="headerlink" title="Content Distribution Network(CDN)"></a>Content Distribution Network(CDN)</h3><blockquote>
<p>Why not using “mega-server” ?</p>
<p>单点错误（容错率低），巨大负载，对远距离用户不友好等</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn42.png"></p>
<p><strong>Solution.</strong> CDN store/serve multiple copies of videos at multiple geographically distributed sites</p>
<ul>
<li>In practice, push CDN servers deep into many access networks; (inside ISPs)</li>
<li>Or smaller number (10’s) of larger clusters in Internet Exchange Point (IXP); (outside ISPs)</li>
</ul>
<p><strong>E.g.</strong> See how Bob request video by CDN : </p>
<p><img src="/2024/09/09/Computer-Networks/cn43.png"></p>
<blockquote>
<p>用户查找“最近” CDN 服务器的两种策略：地理距离最短或实时计算最短延迟</p>
</blockquote>
<h2 id="2-7-Socket-programming-with-UDP-and-TCP"><a href="#2-7-Socket-programming-with-UDP-and-TCP" class="headerlink" title="2.7. Socket programming with UDP and TCP"></a>2.7. Socket programming with UDP and TCP</h2><p><strong>Goal:</strong> learn how to build client/server applications that communicate using sockets.</p>
<p><strong>Socket:</strong> door between application process and end-end-transport protocol</p>
<h3 id="Socket-programming-with-UDP"><a href="#Socket-programming-with-UDP" class="headerlink" title="Socket programming with UDP"></a>Socket programming with UDP</h3><ul>
<li>No “connections”</li>
<li>Transmitted data may be lost or received out-of-order</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn44.png"></p>
<ul>
<li>Implementation 【server】</li>
</ul>
<figure class="highlight python"><figcaption><span>server.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">serverPort = <span class="number">12000</span></span><br><span class="line">serverSocket = socket(AF_INET, SOCK_DGRAM)  <span class="comment"># create socket</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;UDP socket is identified by destination IP address and port number&#x27;&#x27;&#x27;</span></span><br><span class="line">serverSocket.bind((<span class="string">&#x27;&#x27;</span>, serverPort))</span><br><span class="line"><span class="built_in">print</span> (“The server <span class="keyword">is</span> ready to receive”)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;clientAddress = IP + port&#x27;&#x27;&#x27;</span></span><br><span class="line">    message, clientAddress = serverSocket.recvfrom(<span class="number">2048</span>)</span><br><span class="line">    modifiedMessage = message.decode().upper()  <span class="comment"># what server do</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;response to client&#x27;&#x27;&#x27;</span></span><br><span class="line">    serverSocket.sendto(modifiedMessage.encode(), clientAddress)</span><br></pre></td></tr></table></figure>
<ul>
<li>Implemetation 【client】</li>
</ul>
<figure class="highlight python"><figcaption><span>client.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;Client do not need to specify port-num&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">from</span> socket <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">serverName = <span class="string">&#x27;hostname&#x27;</span>  <span class="comment"># either IP address or hostname</span></span><br><span class="line">serverPort = <span class="number">12000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;AF_INET -&gt; IPv4, SOCK_DGRAM -&gt; UDP&#x27;&#x27;&#x27;</span></span><br><span class="line">clientSocket = socket(AF_INET, SOCK_DGRAM)</span><br><span class="line">message = raw_input(<span class="string">&#x27;Input lowercase sentence:&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;Direct send, no connection&#x27;&#x27;&#x27;</span></span><br><span class="line">clientSocket.sendto(message.encode(), (serverName, serverPort))</span><br><span class="line">modifiedMessage, serverAddress = clientSocket.recvfrom(<span class="number">2048</span>)</span><br><span class="line"><span class="built_in">print</span>(modifiedMessage.decode())</span><br><span class="line">clientSocket.close()  <span class="comment"># client leave</span></span><br></pre></td></tr></table></figure>
<h3 id="Socket-programming-with-TCP"><a href="#Socket-programming-with-TCP" class="headerlink" title="Socket programming with TCP"></a>Socket programming with TCP</h3><ul>
<li>Client must contact server<ul>
<li>server process must first be running</li>
<li>server must have created socket (door) that welcomes client’s contact (<font color="blue">welcome socket</font>)</li>
</ul>
</li>
<li>Client contacts server by: <ul>
<li>Creating TCP socket, specifying IP address, port number of server process</li>
<li>Client TCP establishes connection to server TCP</li>
<li>when contacted by client, <font color="red">server TCP creates new socket</font> for server process to communicate with that particular client (允许服务端与多个客户连接)</li>
</ul>
</li>
</ul>
<blockquote>
<p>Identifications difference between UDP and TCP socket (对应到同一个套接字所需参数): </p>
<p>UDP = dst.IP + dst.port</p>
<p>TCP = dst.IP + dst.port + src.IP + src.port</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn45.png"></p>
<ul>
<li>Implementation 【server】</li>
</ul>
<figure class="highlight python"><figcaption><span>server.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">serverPort = <span class="number">12000</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;SOCK_STREAM -&gt; TCP&#x27;&#x27;&#x27;</span></span><br><span class="line">serverSocket = socket(AF_INET,SOCK_STREAM)</span><br><span class="line">serverSocket.bind((<span class="string">&#x27;&#x27;</span>,serverPort))</span><br><span class="line">serverSocket.listen(<span class="number">1</span>)  <span class="comment"># Times to listening, must before client</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;The server is ready to receive&#x27;</span>)</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    connectionSocket, addr = serverSocket.accept()</span><br><span class="line">     </span><br><span class="line">    sentence = connectionSocket.recv(<span class="number">1024</span>).decode()</span><br><span class="line">    capitalizedSentence = sentence.upper()  <span class="comment"># what server do</span></span><br><span class="line">    connectionSocket.send(capitalizedSentence.encode())</span><br><span class="line">    connectionSocket.close()</span><br></pre></td></tr></table></figure>
<ul>
<li>Implementation 【client】</li>
</ul>
<figure class="highlight python"><figcaption><span>client.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">serverName = <span class="string">&#x27;servername&#x27;</span></span><br><span class="line">serverPort = <span class="number">12000</span></span><br><span class="line">clientSocket = socket(AF_INET, SOCK_STREAM)</span><br><span class="line">clientSocket.connect((serverName,serverPort))  <span class="comment"># set up connection(SYN)</span></span><br><span class="line">sentence = raw_input(<span class="string">&#x27;Input lowercase sentence:&#x27;</span>)</span><br><span class="line">clientSocket.send(sentence.encode())  <span class="comment"># &quot;3rd hand-shaking&quot;</span></span><br><span class="line">modifiedSentence = clientSocket.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span> (‘From Server:’, modifiedSentence.decode())</span><br><span class="line">clientSocket.close()  <span class="comment"># client leave first</span></span><br></pre></td></tr></table></figure>
<h1 id="Chapter-3-Transport-Layer"><a href="#Chapter-3-Transport-Layer" class="headerlink" title="Chapter 3: Transport Layer"></a>Chapter 3: Transport Layer</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>3.1</strong> transport-layer services</p>
<p><strong>3.2</strong> multiplexing and demultiplexing</p>
<p><strong>3.3</strong> connectionless transport: UDP</p>
<p><strong>3.4</strong> principles of reliable data transfer</p>
<p><strong>3.5</strong> connection-oriented transport: TCP</p>
<ul>
<li>segment structure</li>
<li>reliable data transfer</li>
<li>flow control</li>
<li>connection management</li>
</ul>
<p><strong>3.6</strong> principles of congestion control</p>
<p><strong>3.7</strong> TCP congestion control</p>
<HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<h2 id="3-1-Transport-Layer-Services"><a href="#3-1-Transport-Layer-Services" class="headerlink" title="3.1. Transport Layer Services"></a>3.1. Transport Layer Services</h2><ul>
<li><strong>Transport vs. App</strong><ul>
<li>logical communication between <font color="blue">app processes</font> running on different <font color="red">hosts</font></li>
<li>Transport protocols run in <font color="red">end systems</font><ul>
<li>send side: breaks app messages into segments, passes to network layer</li>
<li>rcv side: reassembles segments into messages, passes to app layer (<font color="green">Recall encapsulations</font>)</li>
</ul>
</li>
</ul>
</li>
<li><strong>Transport vs. Network</strong></li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn46.png"></p>
<ul>
<li>hosts = houses</li>
<li>processes = kids</li>
<li>app messages = letters in envelopes</li>
<li><font color="red">transport protocol = Ann and Bill</font></li>
<li><font color="red">network-layer protocol = postal service</font>

</li>
</ul>
<blockquote>
<p>大部分传输层的服务包含在网络层中（如确保延迟时间和带宽的服务，因此 UDP 和 TCP 都不包含此服务），但仍有一些是网络层不提供的（如安全保障，rdt等）。</p>
</blockquote>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">TCP</th>
<th style="text-align:center">UDP</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">reliable, in-order delivery</td>
<td style="text-align:center">unreliable, unordered delivery</td>
</tr>
<tr>
<td style="text-align:center">connection setup</td>
<td style="text-align:center">no-frills(简洁的) extension</td>
</tr>
<tr>
<td style="text-align:center">congestion control and flow control</td>
<td style="text-align:center">process-to-process data delivery and error checking</td>
</tr>
</tbody>
</table>
</div>
<h2 id="3-2-Multiplexing-Demultiplexing"><a href="#3-2-Multiplexing-Demultiplexing" class="headerlink" title="3.2. Multiplexing / Demultiplexing"></a>3.2. Multiplexing / Demultiplexing</h2><p><strong>Def.</strong> extending the host-to-host delivery service to a process-to-process delivery service for applications running on the hosts.</p>
<p><img src="/2024/09/09/Computer-Networks/cn47.png"></p>
<blockquote>
<p>在 Ann and Bill 的例子里，这就像每个小朋友（进程）都有对应的名字和 ID，通过对此进行标识，可以让通信双方的 Socket 知道如何进行下一步传输。</p>
</blockquote>
<ul>
<li>Sending host： Host uses <font color="red">IP addresses &amp; port numbers</font> to direct segment to appropriate socket</li>
<li>Receiving host：Host receives IP datagrams from network layer<ul>
<li>each datagram has source IP address, destination IP address</li>
<li>each datagram carries one transport-layer segment</li>
</ul>
</li>
</ul>
<h3 id="UDP-Connectionless-demux"><a href="#UDP-Connectionless-demux" class="headerlink" title="UDP: Connectionless demux"></a>UDP: Connectionless demux</h3><p><img src="/2024/09/09/Computer-Networks/cn48.png"></p>
<ul>
<li>IP datagrams with same <code>dst.port</code> #, but <font color="red">different source IP addresses</font> and/or source port numbers will be directed to <font color="red">same</font> socket at destination.</li>
</ul>
<h3 id="TCP-Connection-oriented-demux"><a href="#TCP-Connection-oriented-demux" class="headerlink" title="TCP: Connection-oriented demux"></a>TCP: Connection-oriented demux</h3><p><img src="/2024/09/09/Computer-Networks/cn49.png"></p>
<blockquote>
<p>图中的 Socket 不再对应于进程，而是对应线程</p>
</blockquote>
<ul>
<li>Web servers have different sockets for each connecting client<ul>
<li>Both the initial connection-establishment segments and the segments carrying HTTP requests will have destination <strong>port 80</strong>.</li>
<li>non-persistent HTTP will have different socket for each request</li>
</ul>
</li>
</ul>
<h2 id="3-3-Connectionless-transport-UDP"><a href="#3-3-Connectionless-transport-UDP" class="headerlink" title="3.3. Connectionless transport: UDP"></a>3.3. Connectionless transport: UDP</h2><ul>
<li>UDP is used in:<ul>
<li>streaming multimedia apps (loss tolerant, rate sensitive)</li>
<li>DNS</li>
</ul>
</li>
<li>reliable transfer over UDP: (都是在其他层解决的，所以说 UDP 是不可靠的传输)<ul>
<li>add reliability at application layer</li>
<li>application-specific error recovery!</li>
</ul>
</li>
</ul>
<h3 id="UDP-Checksum"><a href="#UDP-Checksum" class="headerlink" title="UDP Checksum"></a>UDP Checksum</h3><p><strong>Goal:</strong> detect “errors” (e.g., flipped bits) in transmitted segment (from source to destination)</p>
<ul>
<li>Q: Why UDP using checksum?</li>
<li>A: <ul>
<li>no guarantee that all the links provide error checking</li>
<li>bit errors could be introduced when segments are in memory</li>
<li>Lower cost comparing to checking in app-level.</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn50.png"></p>
<ul>
<li>Sender:<ul>
<li>treat segment contents, including header fields,  as sequence of 16-bit integers</li>
<li>checksum: 1s complement of the sum of segment contents</li>
<li>sender puts checksum value into UDP checksum field</li>
</ul>
</li>
<li>Receiver:<ul>
<li>check the sum of the segment<ul>
<li>All bits are equal to 1 - no error detected. But maybe errors nonetheless? More later…</li>
<li>Otherwise: error detected</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<p><img src="/2024/09/09/Computer-Networks/cn51.png" style="zoom:60%"></p>
<p><img src="/2024/09/09/Computer-Networks/cn52.png" style="zoom:60%"></p>
<blockquote>
<p>一个更简单的证明例子：</p>
<p>设三个加数为 <code>0101</code>, <code>1101</code>, <code>1011</code></p>
<p>$0101+1101=10010 \rightarrow +1011=11101$ ，补位得 <code>1110</code>，取反得 <code>0001</code></p>
<p>接收方计算：$0101+1101=10010 \rightarrow +1011=11101 \rightarrow + 0001=11110$，补位得 <code>1111</code></p>
<p>全 1 符合条件，暂时检测不出错误。</p>
</blockquote>
<h2 id="3-4-Principles-of-Reliable-Data-Transfer-rdt"><a href="#3-4-Principles-of-Reliable-Data-Transfer-rdt" class="headerlink" title="3.4. Principles of Reliable Data Transfer (rdt)"></a>3.4. Principles of Reliable Data Transfer (rdt)</h2><h3 id="Overview-1"><a href="#Overview-1" class="headerlink" title="Overview"></a>Overview</h3><p><img src="/2024/09/09/Computer-Networks/cn53.png"></p>
<blockquote>
<p>We mainly use FSM to describe rdt clearly. Template as pic above.</p>
</blockquote>
<ul>
<li>Perfectly reliable channel: <code>rdt1.0</code></li>
<li>Channel with bit error: <ul>
<li>bit error in packet: <code>rdt 2.0</code></li>
<li>bit error in ACK: <code>2.1</code></li>
<li>NAK-free: <code>2.2</code></li>
</ul>
</li>
<li>Lossy channel: <code>rdt 3.0</code></li>
</ul>
<h3 id="rdt-1-0"><a href="#rdt-1-0" class="headerlink" title="rdt 1.0"></a>rdt 1.0</h3><ul>
<li>Underlying channel “perfectly reliable”<ul>
<li>no bit error</li>
<li>no loss of packet</li>
</ul>
</li>
<li>Therefore, no control for feedback</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn54.png" style="zoom:50%"></p>
<h3 id="rdt-2-0"><a href="#rdt-2-0" class="headerlink" title="rdt 2.0"></a>rdt 2.0</h3><ul>
<li>Underlying channel may <font color="blue">flip bits</font> (0 → 1) in packet</li>
<li><font color="red">Q: how to recover from errors?</font><ul>
<li>acknowledgements (ACKs): receiver explicitly tells sender that pkt received OK</li>
<li>negative acknowledgements (NAKs): receiver explicitly tells sender that pkt had errors</li>
<li>sender retransmits pkt on receipt of NAK</li>
</ul>
</li>
</ul>
<ul>
<li>New Machanism in <code>rdt 2.0</code><ul>
<li>Error detection: checksum</li>
<li>Receiver feedback: control msgs (ACK,NAK) <code>rcvr-&gt;sender</code></li>
<li>Retransmission</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn55.png" style="zoom:50%"></p>
<ul>
<li><code>rdt 2.0</code> has a <font color="red">fatal flaw</font> !</li>
<li><font color="red">What if ACK / NAK packet is corrupted?</font></li>
<li>Handling corrupted ACKs or NAKs:<ul>
<li>Op1. Keep asking until get answer ( foolish ! )</li>
<li>Op2. add enough checksum to recover</li>
<li>Op3. when garbled ACK or NAK, retransmit (👈seems better, but still some probs)</li>
</ul>
</li>
</ul>
<h3 id="rdt-2-1"><a href="#rdt-2-1" class="headerlink" title="rdt 2.1"></a>rdt 2.1</h3><p><img src="/2024/09/09/Computer-Networks/cn56.png" style="zoom:50%"></p>
<p><img src="/2024/09/09/Computer-Networks/cn57.png" style="zoom:50%"></p>
<ul>
<li>Recv maintain seq # as Sender do (正常情况下持有相同状态值)</li>
<li>Sender check if received ACK/NAK corrupted</li>
<li>Recv check if received packet is duplicate</li>
</ul>
<blockquote>
<p>例：sender 在状态 0，receiver 在状态 0</p>
<p>此时 sender 发送一个 seq0 的包，recv 正常收到，解包并发送 ACK，然后转向状态 1。</p>
<p>但是 sender 没收到 ACK，重发 seq0。recv 则会再发 ACK（根据 FSM），如此到 sender 收到 ACK，然后转向状态 1。然后 sender 发送 seq1 的包。如此循环。</p>
</blockquote>
<h3 id="rdt-2-2"><a href="#rdt-2-2" class="headerlink" title="rdt 2.2"></a>rdt 2.2</h3><p><img src="/2024/09/09/Computer-Networks/cn58.png" style="zoom:50%"></p>
<ul>
<li>Optimization<ul>
<li>using ACKs only (sends ACK for last pkt received OK)</li>
<li>must send ACK with seq #</li>
</ul>
</li>
</ul>
<h3 id="rdt-3-0"><a href="#rdt-3-0" class="headerlink" title="rdt 3.0"></a>rdt 3.0</h3><ul>
<li><font color="red">New Assumption:</font> underlying channel can also lose packets (data, ACKs)</li>
<li>Approach: sender waits “reasonable” amount of time for ACK </li>
<li>retransmits if no ACK received in this time</li>
<li>if pkt (or ACK) just delayed (not lost):<ul>
<li>retransmission will be duplicate, but seq. #’s already handles this</li>
<li>receiver must specify seq # of pkt being ACKed</li>
</ul>
</li>
<li>requires countdown timer<ul>
<li>start timer, timer interrupt, stop timer</li>
</ul>
</li>
</ul>
<ul>
<li>Sender in <code>rdt 3.0</code></li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn59.png" style="zoom:50%"></p>
<blockquote>
<p>Some calculations: </p>
<p>How to calc the utilization of sender ($U_{\text{sender}}$) ? Suppose that $RTT = 30 msec$, $R = 1 Gbps$, $L = 8000 bits$</p>
<p>$U_{\text{sender}}=\frac{L/R}{RTT + L/R}=\frac{.008}{30.008}=0.00027$</p>
<p>Utilization 可以理解成某个终端的有效工作时间占比</p>
</blockquote>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p><strong>Key techniques</strong></p>
<ul>
<li>Checksum (2.0)</li>
<li>ACK packet (2.0)</li>
<li>Retransmission (2.0)</li>
<li>Sequence number (2.1)</li>
<li>Timeout (3.0)</li>
</ul>
<h3 id="Pipelined-Protocols"><a href="#Pipelined-Protocols" class="headerlink" title="Pipelined Protocols"></a>Pipelined Protocols</h3><ul>
<li>Go-Back-N<ul>
<li>Timer for the oldest unACKed packet</li>
<li>Cumulative ACK</li>
<li>Retransmit all packets in the window </li>
</ul>
</li>
<li>Selective repeat<ul>
<li>Timer for each packet in window</li>
<li>Individual ACK for each correctly received packets</li>
<li>Retransmit only those packets that might be lost or corrupted</li>
</ul>
</li>
</ul>
<h4 id="Go-Back-N"><a href="#Go-Back-N" class="headerlink" title="Go-Back-N"></a>Go-Back-N</h4><p><img src="/2024/09/09/Computer-Networks/cn60.png" style="zoom:70%"></p>
<ul>
<li>$k$-bits seq # in pkt header: range $[0, 2^k -1]$</li>
<li>At most $N$ pkts in flight(in the “window”) are allowed</li>
</ul>
<ul>
<li><font color="blue">Sender:</font> When <code>rdt_send()</code> is called from above, <ul>
<li>window is not full: a packet is sent, variables are updated. </li>
<li>window is full: simply returns the data back to the upper laye</li>
<li>A timer for the <font color="red">oldest</font> transmitted but not yet ACKed packet<ul>
<li>timeout occurs: resends all packets in the window;</li>
<li><code>ACK(n)</code>: slide window; restart timer </li>
</ul>
</li>
</ul>
</li>
<li><font color="blue">Receiver:</font> Receipt of an ACK.<ul>
<li><font color="red">Cumulative acknowledgment (ACK)</font></li>
<li><code>ACK(n)</code>: all packets with a sequence # <font color="red">up to and including</font> $n$ have been correctly received at the receiver<ul>
<li>Expect $n$ and receive $n$: <code>ACK(n)</code></li>
<li>Expect $n$ and receive others: previous <code>ACK</code>; discard packet</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Obvious that GBN didn’t have a receiver buffering (discard out-of-order pkt), and generate many dup-ACKs as well !</p>
</blockquote>
<h4 id="Selective-Repeat"><a href="#Selective-Repeat" class="headerlink" title="Selective Repeat"></a>Selective Repeat</h4><ul>
<li>Receiver individually acknowledge <font color="red">all</font> correcly received pkts<ul>
<li>buffers pkts for eventual in-order delivery to upper layer</li>
<li>Receiver need to keep track of the <font color="red">out-of-packets</font></li>
</ul>
</li>
<li>Sender only resends pkts for which ACK not received<ul>
<li>sender maintain timer for <font color="red">each</font> unACKed pkt</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn61.png" style="zoom:60%"></p>
<p><img src="/2024/09/09/Computer-Networks/cn62.png" style="zoom:60%"></p>
<blockquote>
<p>Well, it may be hard to understand. So I offer an easy example, with window size is only 4, to show that how would the receiver (more significant) respond to unexpected packet receiving.</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn63.png" style="zoom:50%"></p>
<ul>
<li>When <code>ack2</code> arrives, sender’s window move with <code>pkt6</code> being the sendbase.</li>
<li><font color="red">But here's a problem !</font></li>
<li>Consider seq # = [0, 3] , and window size N = 3<ul>
<li>Left case is Okay, but consider the wrost case(Right)</li>
</ul>
</li>
</ul>
<table><tr>
    <td><img src="/2024/09/09/Computer-Networks/cn64.png" style="zoom:50%"></td>
    <td><img src="/2024/09/09/Computer-Networks/cn65.png" style="zoom:50%"></td>
</tr></table>

<ul>
<li>The receiver will recognize the <font color="blue">retransmit</font> <code>pkt0</code> as the latter one, and think that the 2 <code>pkt0</code> are both ACKed.</li>
<li>Then receiver send <code>ACK(0)</code> back to sender.<ul>
<li>If sender receive <code>ACK(0)</code>, then everything goes on, but receiver lose the former 3 pkts forever !</li>
<li>If send doesn’t receive, then sender window sticks to (0, 1, 2), receiver window sticks to (3, 0, 1), which is a deadlock, until sender get <code>ACK(0)</code>.</li>
</ul>
</li>
<li><font color="red">How to deal ?</font> <font color="green">Constraint: Window size N must be less than or equal to half of seq # range.</font>

</li>
</ul>
<blockquote>
<p>More detail refer to <a href="#lab08">Lab 8</a></p>
</blockquote>
<h2 id="3-5-Connection-Oriented-Transport-TCP"><a href="#3-5-Connection-Oriented-Transport-TCP" class="headerlink" title="3.5. Connection-Oriented Transport: TCP"></a>3.5. Connection-Oriented Transport: TCP</h2><h3 id="Overview-2"><a href="#Overview-2" class="headerlink" title="Overview"></a>Overview</h3><ul>
<li><strong>point-to-point</strong><ul>
<li>one sender, one receiver</li>
<li>No buffers or variables are allocated to network elements between hosts</li>
</ul>
</li>
<li><strong>reliable, in-order byte stream</strong><ul>
<li>no “message boundaries”</li>
<li>Seq # and ACK # are in unit of byte, rather than pkt</li>
</ul>
</li>
<li><strong>pipelined</strong><ul>
<li>TCP congestion and flow control set window size</li>
</ul>
</li>
<li><strong>full duplex data</strong><ul>
<li>bi-directional data flow in same connection</li>
<li>Maximum Segment Size (MSS)</li>
</ul>
</li>
<li><strong>connection-oriented</strong><ul>
<li>handshakings init sender and receiver state before data transfer</li>
</ul>
</li>
<li><strong>flow controlled</strong><ul>
<li>sender will never overwhelm receiver (ensure safety)</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn66.png" style="zoom:60%"></p>
<ul>
<li>TCP grab chunk of data from the sender buffer<ul>
<li>MSS: maximum segment size, typically 1460 bytes</li>
<li>MTU: maximum transmission unit (link-layer frame), typically 1500 bytes<ul>
<li>Application data + TCP/IP header ( typically 40 bytes )</li>
</ul>
</li>
</ul>
</li>
<li>TCP receive a segment at the other end, place it in receiver buffer</li>
<li>Application reads the stream from the receiver buffer</li>
</ul>
<h3 id="TCP-RDT"><a href="#TCP-RDT" class="headerlink" title="TCP RDT"></a>TCP RDT</h3><h4 id="Segment-Structure"><a href="#Segment-Structure" class="headerlink" title="Segment Structure"></a>Segment Structure</h4><p><img src="/2024/09/09/Computer-Networks/cn67.png" style="zoom:60%"></p>
<ul>
<li>TCP view data as <font color="blue">an untrusted, but ordered, stream of bytes</font>.</li>
<li>Seq numbers are over the stream of transmitted bytes and not over the series of transmitted segment.<ul>
<li>seq #: byte stream “number” of first byte in the segment’s data</li>
<li>ACK #: seq # of next byte expected from the other side<ul>
<li>e.g. receiver has received bytes 0 - 535 and 900 - 1000; then, acknowledgement number is 536.</li>
</ul>
</li>
</ul>
</li>
<li>E.g. Telnet case: User types a <code>char</code> at host A, and host A sends it to host B</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn68.png" style="zoom:60%"></p>
<h4 id="RTT-estimation"><a href="#RTT-estimation" class="headerlink" title="RTT estimation"></a>RTT estimation</h4><font color="green">Recall: Round-trip Time (RTT), the time from sender sending the pkt  to sender receiving corresponding ACK.</font>

<ul>
<li><font color="red">Q: How to set TCP timeout value?</font></li>
<li>longer than RTT 👉 But RTT <strong>varies</strong></li>
<li>too short 👉 premature timeout, unnecessary retransmission</li>
<li>too long 👉 slow reaction to segment loss</li>
</ul>
<ul>
<li><font color="red">Q: How to estimate RTT?</font></li>
<li>Sample RTT: measure time from segment transmission until ACK receipt (<strong>ignore retransmissions</strong>)</li>
<li>But it maybe vary. 👉 average several <em>recent</em> measurements, not just <font color="red">current SampleRTT</font>.</li>
</ul>
<blockquote class="blockquote-center">
<p>$<br>\text{EstimatedRTT}=(1-\alpha)\times \text{EstimatedRTT}+\alpha \times \text{SampleRTT}<br>$</p>

</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn68.png" style="zoom:60%"></p>
<blockquote>
<p>Typically value $\alpha=0.125$</p>
</blockquote>
<ul>
<li>Also we need an interval for the toleration of the variability of RTT (typically $\beta=0.25$)</li>
</ul>
<blockquote class="blockquote-center">
<p>$<br>\begin{array}{c}<br>\text{DevRTT}=(1-\beta)\times\text{DevRTT}+\alpha \times | \text{SampleRTT} - \text{EstimatedRTT} | \\<br>\text{TimeoutInterval}=\text{EstimatedRTT} + 4 \times \text{DevRTT}<br>\end{array}<br>$</p>

</blockquote>
<h4 id="Reliable-Data-Transfer"><a href="#Reliable-Data-Transfer" class="headerlink" title="Reliable Data Transfer"></a>Reliable Data Transfer</h4><blockquote>
<p>TCP thinks that IP below itself as unreliable, so it provide reliable data transfer</p>
</blockquote>
<ul>
<li>Sender Events<ul>
<li>data received from app:<ul>
<li>create segment with <font color="red">seq num</font> (which is byte-stream number of first data byte in  segment)</li>
<li>start timer if not already running</li>
</ul>
</li>
<li>timeout: <ul>
<li>retransmit the timeout segment</li>
<li>restart timer</li>
</ul>
</li>
<li>ack received: <ul>
<li>if ack num from previously unacked segments, update that segments (unACKed 👉 ACKed)</li>
<li>if there are still unACKed segments, <font color="blue">start timer</font></li>
</ul>
</li>
</ul>
</li>
<li>Receiver Events</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn70.png" style="zoom:60%"></p>
<p><strong>Double Timeout</strong></p>
<ul>
<li>Each time TCP retransmits, it sets the <font color="red">next timeout interval to twice</font> the previous value</li>
</ul>
<p><strong>Fast retransmission</strong></p>
<p>…</p>
<h4 id="Flow-Control"><a href="#Flow-Control" class="headerlink" title="Flow Control"></a>Flow Control</h4><p><strong>Def.</strong>  Receiver controls sender, so sender won’t <font color="red">overflowz</font> receiver’s buffer by transmitting too much, too fast.</p>
<p><img src="/2024/09/09/Computer-Networks/cn71.png" style="zoom:60%"></p>
<ul>
<li>And sender will try to limit the unACKed data to receiver’s <code>rwnd</code> value</li>
</ul>
<h4 id="Control-Managment"><a href="#Control-Managment" class="headerlink" title="Control Managment"></a>Control Managment</h4><ul>
<li>Before data transfer, “Alice” and “Bob” (using TCP) will have a <font color="red">three-way handshakes</font> to guarantee connection.</li>
<li>Three flags to convey the info about connection: <code>RST</code>, <code>SYN</code>, <code>FIN</code></li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn72.png" style="zoom:60%"></p>
<ul>
<li>Once three handshakes finish, the server and client can start data transfer.</li>
<li>In the future sements, <code>SYNbit</code> = 0.</li>
<li>After all segments ACKed, the sender closes the connection 👇</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn73.png" style="zoom:60%"></p>
<h2 id="3-6-Principles-of-Congestion-Control"><a href="#3-6-Principles-of-Congestion-Control" class="headerlink" title="3.6. Principles of Congestion Control"></a>3.6. Principles of Congestion Control</h2><p><strong>Def.</strong> <font color="red">Congestion</font> is too many sources sending too much data too fast for <font color="red">network</font> to handle.</p>
<h3 id="Causes-Costs-of-congestion"><a href="#Causes-Costs-of-congestion" class="headerlink" title="Causes / Costs of congestion"></a>Causes / Costs of congestion</h3><p>(1) 2 senders ＜(＾－＾)＞ 2 receivers; <font color="red">one router</font> with infinite buffer but output link capacity is $R$ ; <font color="red">No retransmission</font></p>
<p>(2) Consider retransmission</p>
<p>(3) More than one router</p>
<p><strong>Summary</strong></p>
<ul>
<li>Cause<ul>
<li>Shared link; limited link capacity</li>
<li>Sending at a high rate</li>
</ul>
</li>
<li>Cost of Congestion<ul>
<li>Delay</li>
<li>Packet lost  and retransmission</li>
<li>Unneeded retransmission: waste</li>
<li>“upstream” transmission capacity was wasted</li>
</ul>
</li>
<li>Approaches to Congestion Control<ul>
<li>End-to-end<ul>
<li>TCP segment loss or round-trip segment delay </li>
<li>TCP decreases its window size accordingly</li>
</ul>
</li>
<li>Network-assisted congestion control:<ul>
<li>routers provide feedback to the sender and/or receiver</li>
<li>a single bit indicating congestion at a link; the maximum host sending rate the router can support</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="3-7-TCP-Congestion-Control"><a href="#3-7-TCP-Congestion-Control" class="headerlink" title="3.7. TCP Congestion Control"></a>3.7. TCP Congestion Control</h2><ul>
<li><font color="red">Q1:</font> How does a TCP sender limit the rate at which it sends traffic into its connection? <ul>
<li>Congestion window</li>
<li>LastByteSend - LastByteAcked $\le$ min {cwnd, rwnd}</li>
</ul>
</li>
<li><font color="red">Q2:</font> How does a TCP sender perceive that there is congestion on the path between itself and the destination? <ul>
<li>timeout</li>
<li>three duplicate ACKs</li>
</ul>
</li>
<li><font color="red">Q3:</font> What algorithm should the sender use to change its send rate as a function of perceived end-to-end congestion?</li>
</ul>
<h3 id="Congestion-Control-Details"><a href="#Congestion-Control-Details" class="headerlink" title="Congestion Control: Details"></a>Congestion Control: Details</h3><ul>
<li>Three components:<ul>
<li>Slow start：exponentially increase</li>
<li>Congestion avoidance: linearly increase</li>
<li>Fast recovery(as shown below) :</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn74.png" style="zoom:60%"></p>
<ul>
<li>TCP congestion control: additive increase multiplicative decrease<ul>
<li><font color="red">additive increase:</font> increase cwnd by 1 MSS every RTT until loss detected</li>
<li><font color="red">multiplicative decrease:</font> cut cwnd in half after loss </li>
</ul>
</li>
<li>TCP throughput<ul>
<li>ignore slow start, assume always data to send</li>
<li>$W$: window size (measured in bytes) where loss occurs</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn75.png" style="zoom:80%"></p>
<h3 id="TCP-Fairness"><a href="#TCP-Fairness" class="headerlink" title="TCP Fairness"></a>TCP Fairness</h3><p><strong>Fairness goal:</strong> if $K$ TCP sessions share same  bottleneck link of bandwidth $R$, each should have  average rate of $R/K$</p>
<h1 id="Chapter-4-Network-Layer"><a href="#Chapter-4-Network-Layer" class="headerlink" title="Chapter 4: Network Layer"></a>Chapter 4: Network Layer</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>4.1</strong> Overview of Network layer</p>
<ul>
<li>data plane</li>
<li>control plane</li>
</ul>
<p><strong>4.2</strong> What’s inside a router</p>
<p><strong>4.3</strong> IP: Internet Protocol</p>
<ul>
<li>datagram format</li>
<li>fragmentation</li>
<li>IPv4 addressing</li>
<li>network address translation</li>
<li>IPv6</li>
</ul>
<p><strong>4.4</strong> Generalized Forward and SDN</p>
<ul>
<li>match</li>
<li>action</li>
<li>OpenFlow  examples of match-plus-action in action</li>
</ul>
<HR style="FILTER: alpha(opacity=0,finishopacity=100,style=1)" width="100%" color="black" size="2">



<h2 id="4-1-Overview-of-Network-Layer"><a href="#4-1-Overview-of-Network-Layer" class="headerlink" title="4.1. Overview of Network Layer"></a>4.1. Overview of Network Layer</h2><ul>
<li>transport segment from sending to receiving host </li>
<li>on sending side encapsulates segments into datagrams</li>
<li>on receiving side, delivers segments to transport layer</li>
<li>network layer protocols in every host, router</li>
<li>router examines header fields in all IP datagrams passing through it</li>
</ul>
<p><strong>Two key network-core functions</strong></p>
<ul>
<li>Forwarding: move packets from router’s input to appropriate router output <ul>
<li><font color="red">Data Plane</font></li>
</ul>
</li>
<li>Routing: determine route taken by packets from source to destination<ul>
<li>routing algorithm</li>
<li><font color="red">Control Plane</font>



</li>
</ul>
</li>
</ul>
<h2 id="4-2-What’s-inside-a-router"><a href="#4-2-What’s-inside-a-router" class="headerlink" title="4.2. What’s inside a router"></a>4.2. What’s inside a router</h2><p><img src="/2024/09/09/Computer-Networks/cn76.png"></p>
<h3 id="Router-Overview"><a href="#Router-Overview" class="headerlink" title="Router Overview"></a>Router Overview</h3><ul>
<li>Input port</li>
<li>Switch fabrics</li>
<li>Output port</li>
<li>Queuing<ul>
<li>Input port queue</li>
<li>Output port queue</li>
<li>Scheduling</li>
</ul>
</li>
</ul>
<h3 id="Input-port-amp-Output-port-function"><a href="#Input-port-amp-Output-port-function" class="headerlink" title="Input port &amp; Output  port function"></a>Input port &amp; Output  port function</h3><h3 id="Switching-Fabrics"><a href="#Switching-Fabrics" class="headerlink" title="Switching Fabrics"></a>Switching Fabrics</h3><p><img src="/2024/09/09/Computer-Networks/cn77.png" style="zoom:70%"></p>
<h3 id="Queueing-calculation"><a href="#Queueing-calculation" class="headerlink" title="Queueing calculation"></a>Queueing calculation</h3><blockquote>
<p>How much buffering ?</p>
</blockquote>
<ul>
<li>$RTT \times \text{link capacity } C$ </li>
<li>Recent recommendation: with N flows, buffering = $\frac{RTT \times C}{\sqrt{N}}$</li>
</ul>
<h2 id="4-3-IP-Internet-Protocol"><a href="#4-3-IP-Internet-Protocol" class="headerlink" title="4.3. IP: Internet Protocol"></a>4.3. IP: Internet Protocol</h2><h3 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h3><ul>
<li>datagram format</li>
<li>fragmentation</li>
<li>IPv4 addressing</li>
<li>network address translation</li>
<li>IPv6</li>
</ul>
<blockquote>
<p>See about network layer</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn78.png" style="zoom:70%"></p>
<h3 id="Datagram-format"><a href="#Datagram-format" class="headerlink" title="Datagram format"></a>Datagram format</h3><p><img src="/2024/09/09/Computer-Networks/cn79.png" style="zoom:70%"></p>
<h3 id="IP-fragmentation"><a href="#IP-fragmentation" class="headerlink" title="IP fragmentation"></a>IP fragmentation</h3><ul>
<li>network links have <strong>max transmission unit (MTU)</strong> - largest possible link-level frame<ul>
<li>different link types, different MTUs</li>
</ul>
</li>
<li>large IP datagram divided (“fragmented”) within net <font color="grey">[类似传输层的分块]</font><ul>
<li>one datagram becomes several datagrams reassembly</li>
<li>“reassembled” only at <font color="red">final destination</font></li>
<li>IP header bits used to identify, order related fragments</li>
</ul>
</li>
</ul>
<h3 id="IPv4"><a href="#IPv4" class="headerlink" title="IPv4"></a>IPv4</h3><h4 id="Addressing"><a href="#Addressing" class="headerlink" title="Addressing"></a>Addressing</h4><ul>
<li>IP address: 32-bit identifier for interface of hosts and routers</li>
<li>Interface: (network interface card) connection between host/router and physical link<ul>
<li>router’s typically have multiple interfaces</li>
<li>host typically has one or two interfaces (e.g., wired Ethernet, wireless 802.11)</li>
</ul>
</li>
</ul>
<h4 id="Subnet"><a href="#Subnet" class="headerlink" title="Subnet"></a>Subnet</h4><ul>
<li>What is a subnet ?<ul>
<li>device interfaces with same subnet part of IP address</li>
<li>can physically reach each other without intervening router </li>
</ul>
</li>
<li>each <font color="red">isolated network</font> is called a subnet</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn80.png" style="zoom:70%"></p>
<blockquote>
<p>E.g. How many subnet here ?</p>
<p>Answer: 6.</p>
</blockquote>
<h4 id="How-to-assign-obtain-IP-address"><a href="#How-to-assign-obtain-IP-address" class="headerlink" title="How to assign/obtain IP address?"></a>How to assign/obtain IP address?</h4><ul>
<li>Classless InterDomain Routing (CIDR)<ul>
<li>A method to assign blocks of IP address</li>
<li>subnet portion of address of arbitrary length</li>
<li>address format: <code>a.b.c.d/x</code>, where <code>x</code> is # bits in subnet portion of address<ul>
<li>e.g. address is <code>200.23.16.0/23</code>, then the subnet is <code>255.255.254.0</code></li>
</ul>
</li>
</ul>
</li>
<li><font color="red">Q1: How does an ISP get block of addresses ?</font><ul>
<li><font color="green">A1: ICANN: Internet Corporation for Assigned Names and Numbers</font><ul>
<li>allocates addresses</li>
<li>manages DNS</li>
<li>assigns domain names, resolves disputes</li>
</ul>
</li>
</ul>
</li>
<li><font color="red">Q2: How does a subnet get block of addresses ?</font><ul>
<li><font color="green">A2: gets allocated portion of its provider ISP’s address space</font><ul>
<li>e.g. ISP’s block is <code>200.23.16.0/20</code>, then the Organizations IP address can be :</li>
<li><code>200.23.16.0/23</code>, <code>200.23.18.0/23</code>, <code>200.23.20.0/23</code>… <code>200.23.30.0/23</code>(8 Organizations, 3 bits changed)</li>
<li>Another example to explain this :</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn81.png"><br><img src="/2024/09/09/Computer-Networks/cn82.png"></p>
<ul>
<li><font color="red">Q3: How does a subnet get block of addresses ?</font><ul>
<li><font color="green">DHCP: Dynamic Host Configuration Protocol: dynamically get address from as server</font></li>
<li>goal: allow host to <font color="blue">dynamically</font> obtain its IP address from network server when it joins network<ul>
<li>can renew its lease on address in use</li>
<li>allows reuse of addresses (only hold address while connected/“on”)</li>
<li>support for mobile users who want to join network (more shortly)</li>
</ul>
</li>
<li>Let’s see how DHCP works in a case :</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn83.png"></p>
<ul>
<li>DHCP can return more than just allocated IP address on subnet:<ul>
<li>address of first-hop router for client</li>
<li>name and IP address of DNS sever</li>
<li>network mask (indicating network versus host portion of address)</li>
</ul>
</li>
</ul>
<h3 id="NAT-Network-Address-Translation"><a href="#NAT-Network-Address-Translation" class="headerlink" title="NAT (Network Address Translation)"></a>NAT (Network Address Translation)</h3><ul>
<li>NAT: reserve blocks of IP addresses for LANs<ul>
<li>private network using private IP addr</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn84.png"></p>
<ul>
<li><font color="red">Motivation:</font> local network uses just one IP address<ul>
<li>just one IP address for all devices</li>
<li>can change addresses of devices in local network without notifying outside world (内部对外部独立)</li>
<li>can change ISP without changing addresses of devices in local network (外部对内部独立)</li>
<li>devices inside local network not explicitly addressable, visible by outside world (a security plus)</li>
</ul>
</li>
<li><font color="red">Implementation:</font><ul>
<li><strong>Outgoing datagrams:</strong> replace <code>(source IP address, port #)</code> of every outgoing datagram to <code>(NAT IP address, new port #)</code>. Remote clients/servers will respond using <code>(NAT IP address, new port #)</code> as destination addr <font color="blue">(Not genial addr)</font></li>
<li>In NAT translation table, record all translation pairs</li>
<li><strong>Incoming datagrams:</strong> replace <code>(NAT IP address, new port #)</code> in dest fields of every incoming datagram with corresponding <code>(source IP address, port #)</code> stored in NAT table</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn85.png"></p>
<h3 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h3><h4 id="Format"><a href="#Format" class="headerlink" title="Format"></a>Format</h4><ul>
<li>IPv6 using:<ul>
<li>128-bit address space</li>
<li>fixed-length 40 byte header</li>
<li>no fragmentation allowed</li>
</ul>
</li>
</ul>
<blockquote>
<p>Why ?</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn89.png" style="zoom:70%"></p>
<ul>
<li><strong>priority</strong>:  identify priority among datagrams in flow</li>
<li><strong>flow Label</strong>: identify datagrams in same “flow.”  (concept of“flow” not well defined).</li>
<li><strong>next header</strong>: identify upper layer protocol for data (for example, to TCP or UDP).</li>
<li>Other changes<ul>
<li><strong>checksum</strong>: removed entirely to reduce processing time at each hop</li>
<li><strong>options</strong>: allowed, but outside of header, indicated by “Next Header” field</li>
<li>no fragmentation:<ul>
<li>too large to be forwarded over the outgoing link</li>
<li>the router simply drops the datagram and sends a “Packet Too Big” ICMP error message</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="Tunneling"><a href="#Tunneling" class="headerlink" title="Tunneling"></a>Tunneling</h4><ul>
<li>not all routers can be upgraded simultaneously 👉 mixed IPv4 and IPv6</li>
<li>Solution — Tunneling: IPv6 datagram carried as payload in IPv4 datagram among IPv4 routers</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn90.png" style="zoom:70%"></p>
<ul>
<li>transfer in routers 👇</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn91.png" style="zoom:70%"></p>
<h2 id="4-4-Generalized-Forward-and-SDN"><a href="#4-4-Generalized-Forward-and-SDN" class="headerlink" title="4.4. Generalized Forward and SDN"></a>4.4. Generalized Forward and SDN</h2><ul>
<li>Each router contains a flow table that is computed and distributed by a logically centralized routing controller.</li>
<li>Flow Table defines router’s <font color="red">match &amp; action rules</font></li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn92.png" style="zoom:70%"></p>
<h3 id="OpenFlow-data-plane-abstraction"><a href="#OpenFlow-data-plane-abstraction" class="headerlink" title="OpenFlow data plane abstraction"></a>OpenFlow data plane abstraction</h3><table>
<tr>
<td><img src="/2024/09/09/Computer-Networks/cn97.png"></td>
<td><img src="/2024/09/09/Computer-Networks/cn98.png"></td>
</tr>
<tr>
<td><img src="/2024/09/09/Computer-Networks/cn99.png"></td>
<td><img src="/2024/09/09/Computer-Networks/cn100.png"></td>
</tr>
</table>

<ul>
<li>Summary of Openflow</li>
<li><strong>match+action:</strong> unifies different kinds of devices</li>
<li>Router<ul>
<li>match: longest destination IP prefix</li>
<li>action: forward out a link</li>
</ul>
</li>
<li>Switch<ul>
<li>match: destination MAC address</li>
<li>action: forward</li>
</ul>
</li>
<li>Firewall<ul>
<li>match: IP addresses and TCP/UDP port numbers</li>
<li>action: permit or deny </li>
</ul>
</li>
<li>NAT<ul>
<li>match: IP address and port</li>
<li>action: rewrite address and port</li>
</ul>
</li>
</ul>
<h1 id="Chapter-5-Network-Layer-–-The-Control-Plane"><a href="#Chapter-5-Network-Layer-–-The-Control-Plane" class="headerlink" title="Chapter 5: Network Layer – The Control Plane"></a>Chapter 5: Network Layer – The Control Plane</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>5.1</strong>  introduction</p>
<p><strong>5.2</strong> routing protocols</p>
<ul>
<li>link state (global)</li>
<li>distance vector (decentralized)</li>
</ul>
<p><strong>5.3</strong> intra-AS routing in the Internet: OSPF</p>
<p><strong>5.4</strong> routing among the ISPs: BGP</p>
<p><strong>5.5</strong> The SDN control plane</p>
<p><strong>5.6</strong> ICMP: The Internet Control Message Protocol </p>
<p><strong>5.7</strong> Network management and SNMP</p>
<HR style="FILTER: alpha(opacity=0,finishopacity=100,style=1)" width="100%" color="black" size="2">



<h2 id="5-1-Intro"><a href="#5-1-Intro" class="headerlink" title="5.1. Intro"></a>5.1. Intro</h2><blockquote>
<p><font color="green">Recall:</font> two network-layer functions</p>
<p>forwarding: move packets from router’s input to appropriate router output<br>(data plane)</p>
<p>routing: determine route taken by packets from source to destination<br>(control plane)</p>
</blockquote>
<ul>
<li>Two approaches to structuring network control plane:<ul>
<li>per-router control (traditional)</li>
<li>logically centralized control (software defined networking)<ul>
<li>A distinct (typically remote) controller interacts with local control agents (CAs) in routers to compute forwarding tables</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="5-2-routing-protocols"><a href="#5-2-routing-protocols" class="headerlink" title="5.2. routing protocols"></a>5.2. routing protocols</h2><h3 id="link-state-——-getting-global-info"><a href="#link-state-——-getting-global-info" class="headerlink" title="link state —— getting global info"></a>link state —— getting global info</h3><ul>
<li>A linke-state routing algorithm: <strong>Dijkstra</strong> !!!</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Init:</span><br><span class="line">N = &#123;u&#125;</span><br><span class="line">for all nodes v </span><br><span class="line">  if v adjacent to u        </span><br><span class="line">    then D(v) = c(u,v) </span><br><span class="line">  else D(v) = INF</span><br><span class="line"></span><br><span class="line">Loop:</span><br><span class="line">  find w not in N such that D(w) is a minimum</span><br><span class="line">  add w to N</span><br><span class="line">  update D(v) for all v adjacent to w and not in N:</span><br><span class="line">    D(v) &lt;- min(D(v), D(w)+c(w, v))</span><br><span class="line">until all nodes in N</span><br></pre></td></tr></table></figure>
<ul>
<li>An example:</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn86.png"></p>
<h3 id="distance-vector-——-getting-decentralized-info"><a href="#distance-vector-——-getting-decentralized-info" class="headerlink" title="distance vector —— getting decentralized info"></a>distance vector —— getting decentralized info</h3><ul>
<li><font color="blue">Distributed:</font> each node receives some information from one or more of its directly attached neighbors, performs a calculation, and then distributes the results of its calculation back to its neighbors. </li>
<li><font color="blue">Iterative:</font> this process continues on until no more information is exchanged between neighbors. </li>
<li><font color="blue">Asynchronous:</font> it does not require all of the nodes to operate in lockstep with each other.</li>
</ul>
<blockquote>
<p>Introduce <strong>Bellman-Ford Equation</strong></p>
</blockquote>
<ul>
<li>$d_{x}(y):=$ cost of least-cost path from $x$ to $y$</li>
<li>$d_{x}(y)=\min_{v}\{ c(x,v)+d_{v}(y) \}$<ul>
<li>where $v$ represnets all neighbors of $x$</li>
</ul>
</li>
</ul>
<blockquote>
<p>How this work in DV ?</p>
</blockquote>
<ul>
<li>Node $x$:<ul>
<li>knows cost to each neighbor $v$: $c(x,v)$</li>
<li>maintains its recent distance vector $D_x = [D_x(y): y \in N ]$</li>
<li>maintains its neighbors’ recent distance vectors. For each neighbor $v$, $x$ maintains $D_v = [D_v(y): y \in N ]$</li>
</ul>
</li>
<li>Key Idea:<ul>
<li>From time-to-time, each node sends its own <font color="red">recent</font> distance vector (DV) to neighbors</li>
<li>When $x$ receives new DV from neighbor, it updates its own DV using B-F equation</li>
<li>If its DV has changed, sends the updated DV to neighbors </li>
</ul>
</li>
</ul>
<table><tr>
    <td><img src="/2024/09/09/Computer-Networks/cn87.png"></td>
    <td><img src="/2024/09/09/Computer-Networks/cn88.png"></td>
</tr></table>

<blockquote>
<p>Problems: In “good news” (some link cost decrease), the update of forwarding table converge fast (with fewer iterations). But in “bad news” (cost increase), it require more iters to converge the forwarding table!</p>
</blockquote>
<p><strong>Solution: Poisoned reverse</strong></p>
<ul>
<li>(Example above.) If $Z$ routes through $Y$ to get to $X$ :<ul>
<li>$Z$ tells $Y$ its ($Z$’s) distance to $X$ is infinite (so $Y$ won’t route to $X$ via $Z$)</li>
</ul>
</li>
<li>However, when there are <font color="red">more than one loop</font>, this method doesn’t work!</li>
</ul>
<h3 id="Comparison-of-LS-and-DV"><a href="#Comparison-of-LS-and-DV" class="headerlink" title="Comparison of LS and DV"></a>Comparison of LS and DV</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">Link State</th>
<th style="text-align:center">Distance Vector</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">message complexity</td>
<td style="text-align:center">with $n$ nodes, $E$ links, $O(nE)$ msgs sent</td>
<td style="text-align:center">exchange between neighbors only</td>
</tr>
<tr>
<td style="text-align:center">Speed of convergence</td>
<td style="text-align:center">$O(n^2)$ algorithm</td>
<td style="text-align:center">time varies(count-to-infinite problem)</td>
</tr>
<tr>
<td style="text-align:center">Robustness</td>
<td style="text-align:center">node can advertise incorrect link cost, each node computes only its own table</td>
<td style="text-align:center">DV node can advertise incorrect path cost, each node’s table used by others</td>
</tr>
</tbody>
</table>
</div>
<h2 id="5-3-intra-AS-routing-in-the-Internet-OSPF"><a href="#5-3-intra-AS-routing-in-the-Internet-OSPF" class="headerlink" title="5.3. intra-AS routing in the Internet: OSPF"></a>5.3. intra-AS routing in the Internet: OSPF</h2><blockquote>
<p>Both LS and DV have problems in practice</p>
<p>We want to make routing scalable</p>
</blockquote>
<ul>
<li>Solution: aggregate routers into regions known as “autonomous systems” (AS) (a.k.a. “domains”)<ul>
<li>Gateway router: at “edge” of its own AS, has link(s) to router(s) in other AS</li>
<li>Interior router: no link to other AS</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn101.png" style="zoom:60%"></p>
<ul>
<li>intra-AS routing<ul>
<li>routing among hosts, routers in <font color="red">same AS</font> (“network”)</li>
<li>all routers in AS must run same intra-domain protocol</li>
<li>routers in different AS can run different intra-AS routing protocol</li>
</ul>
</li>
<li>inter-AS routing<ul>
<li>routing among AS’es</li>
<li>gateways perform inter-AS routing (as well as intra-AS routing)</li>
</ul>
</li>
</ul>
<blockquote>
<p>Q: How does it function in practice?</p>
<p>A: forwarding table  configured by both intra and inter-AS routing algorithm</p>
</blockquote>
<h3 id="Intra-AS-Routing"><a href="#Intra-AS-Routing" class="headerlink" title="Intra-AS Routing"></a>Intra-AS Routing</h3><ul>
<li>also known as interior gateway protocols (IGP)</li>
<li>most common intra-AS routing protocols:<ul>
<li>RIP: Routing Information Protocol (distance vector-based)</li>
<li>OSPF: Open Shortest Path First (link state based)</li>
<li>IS-IS protocol essentially same as OSPF</li>
<li>IGRP: Interior Gateway Routing Protocol (Cisco proprietary for decades, until 2016)</li>
</ul>
</li>
</ul>
<blockquote>
<p>Inter-AS Routing will be talked in 5.4</p>
</blockquote>
<h3 id="OSPF-Open-Shortest-Path-First"><a href="#OSPF-Open-Shortest-Path-First" class="headerlink" title="OSPF (Open Shortest Path First)"></a>OSPF (Open Shortest Path First)</h3><ul>
<li>“open”: publicly available<ul>
<li>Message format, routing algorithms, link-state broadcast, etc.</li>
</ul>
</li>
<li>uses link-state algorithm <ul>
<li>link state packet dissemination</li>
<li>topology map at each node</li>
<li>route computation using Dijkstra’s algorithm</li>
</ul>
</li>
<li>router floods OSPF link-state advertisements to all other routers in entire AS<ul>
<li>carried in OSPF messages <font color="red">directly over IP</font> (rather than TCP or UDP)</li>
<li>Reliable message transfer, link-state broadcast</li>
</ul>
</li>
</ul>
<p><strong>OSPF “advanced” features</strong></p>
<ul>
<li><font color="red">security:</font> all OSPF messages authenticated (to prevent malicious intrusion) <ul>
<li>Password; private and public key </li>
</ul>
</li>
<li><font color="red">multiple same-cost paths</font> allowed (only one path in RIP)</li>
<li>integrated uni- and <font color="red">multi-cast</font> support: <ul>
<li>Multicast OSPF (MOSPF) uses same topology data base as OSPF</li>
</ul>
</li>
<li><font color="red">hierarchical</font> OSPF in large domains.<ul>
<li><font color="red">Two-level hierarchy:</font> local area, backbone.<ul>
<li>link-state advertisements only in area </li>
<li>each nodes has detailed area topology; only know direction (shortest path) to nets in other areas.</li>
</ul>
</li>
<li><font color="red">Area border routers:</font> routing packets outside the area.</li>
<li><font color="red">Backbone routers:</font> run OSPF routing limited to backbone.</li>
<li><font color="red">Boundary (gateway) routers:</font> connect to other AS’es.</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn102.png"></p>
<h2 id="5-4-Routing-among-the-ISPs-BGP"><a href="#5-4-Routing-among-the-ISPs-BGP" class="headerlink" title="5.4. Routing among the ISPs: BGP"></a>5.4. Routing among the ISPs: BGP</h2><blockquote>
<p>5.3 is about intra-AS routing (inside 1 AS), while 5.4 will talk about <strong>inter-AS</strong> routing (between 2 or more AS)</p>
</blockquote>
<h3 id="Overview-3"><a href="#Overview-3" class="headerlink" title="Overview"></a>Overview</h3><ul>
<li>BGP: iBGP, eBGP</li>
<li>Route Selection</li>
<li>IP-Anycast</li>
<li>BGP Routing Policy</li>
</ul>
<h3 id="BGP"><a href="#BGP" class="headerlink" title="BGP"></a>BGP</h3><ul>
<li>Each pair of BGP (Border Gateway Protocol) routers (“peers”) exchanges BGP messages over TCP connection:<ul>
<li>advertising paths to destination network prefixes (e.g., X)</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn93.png" style="zoom:50%"></p>
<ul>
<li><strong>eBGP:</strong> When AS3 gateway router 3a advertises path AS3,X to AS2 gateway router 2c:<ul>
<li>AS3 promises to AS2 it will forward datagrams towards X</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn94.png" style="zoom:50%"></p>
<ul>
<li><strong>iBGP:</strong> When 1c accept the advertisement from 2a (2a told 1c that “it has a way to X”), 1c will propagate it to <strong>all routers</strong> in AS1</li>
</ul>
<blockquote>
<p><font color="red">Q:</font> how does router set forwarding table entry to distant prefix ?</p>
<p><font color="green">A:</font> Work BGP, OSPF and forwarding table entries together 👇</p>
</blockquote>
<ul>
<li>E.g. <code>1d</code> wants to go to <code>X</code></li>
<li><code>1a</code>, <code>1b</code>, <code>1d</code> learn about dest <code>X</code> via iBGP from <code>1c</code>: “path to X goes through 2a (NEXT-HOP)”</li>
<li>to get to <code>2a-I1</code>, forward over outgoing local interface 1<ul>
<li>Intra-AS protocol</li>
</ul>
</li>
</ul>
<h3 id="Route-Selection"><a href="#Route-Selection" class="headerlink" title="Route Selection"></a>Route Selection</h3><p>Choose route based on one of the severals policies:</p>
<ol>
<li>local preference value attribute: policy decision</li>
<li>shortest AS-PATH </li>
<li>closest NEXT-HOP router: hot potato routing</li>
<li>additional criteria </li>
</ol>
<blockquote>
<p>Hot potato routing: choose local gateway that has least intra domain cost (the shortest way to “go out”!)</p>
</blockquote>
<h3 id="IP-Anycast-Service-CDN-DNS"><a href="#IP-Anycast-Service-CDN-DNS" class="headerlink" title="IP Anycast Service: CDN/DNS"></a>IP Anycast Service: CDN/DNS</h3><p><img src="/2024/09/09/Computer-Networks/cn95.png" style="zoom:60%"></p>
<h3 id="BGP-Routing-Policy"><a href="#BGP-Routing-Policy" class="headerlink" title="BGP Routing Policy"></a>BGP Routing Policy</h3><ul>
<li>policy: <ul>
<li>inter-AS: admin wants control over how its traffic routed, who routes through its net. </li>
<li>intra-AS: single admin, so no policy decisions needed </li>
</ul>
</li>
<li>performance: <ul>
<li>intra-AS: can focus on performance</li>
<li>inter-AS: policy may dominate over performance</li>
</ul>
</li>
<li>scale:<ul>
<li>hierarchical routing saves table size, reduced update traffic</li>
</ul>
</li>
</ul>
<h2 id="5-5-The-SDN-control-plane"><a href="#5-5-The-SDN-control-plane" class="headerlink" title="5.5. The SDN control plane"></a>5.5. The SDN control plane</h2><blockquote>
<p><font color="green">Recall:</font> SDN logically centralized control plane</p>
<p>A distinct (typically remote) controller interacts with local control agents (CAs) in routers to compute forwarding tables</p>
</blockquote>
<p><img src="/2024/09/09/Computer-Networks/cn96.png" style="zoom:60%"></p>
<ul>
<li><font color="red">Q:</font> Why a logically centralized control plane ?</li>
<li>easier network management: avoid router misconfigurations, greater flexibility of traffic flows</li>
<li>table-based forwarding (recall OpenFlow API) allows “programming” routers<ul>
<li>centralized “programming” easier: compute tables centrally and distribute</li>
<li>distributed “programming” more difficult: compute tables as result of distributed algorithm (protocol) implemented in each and every router </li>
</ul>
</li>
<li>open (non-proprietary) implementation of control plane</li>
</ul>
<blockquote>
<p>Traffic engineering has difficulties:</p>
<ol>
<li>To define path needs to know link weights</li>
<li>hard to support multi-path routing (balance traffic)</li>
<li>one switch hard to handle different source to different dst.</li>
</ol>
</blockquote>
<ul>
<li>What SDN do ?<ol>
<li>generalized “flow based” forwarding  (e.g., OpenFlow)</li>
<li>control, data plane  separation</li>
<li>control plane functions external to data plane switches</li>
<li>programmable control applications</li>
</ol>
</li>
</ul>
<h3 id="Components-of-SDN-controller"><a href="#Components-of-SDN-controller" class="headerlink" title="Components of SDN controller"></a>Components of SDN controller</h3><ul>
<li><strong>Interface layer to network control apps</strong>: abstractions API</li>
<li><strong>Network-wide state management layer</strong>: state of networks links, switches, services: a distributed database</li>
<li><strong>communication layer</strong>: communicate between SDN controller and controlled switches (e.g. OpenFlow)</li>
</ul>
<blockquote>
<p>OpenFlow protocol</p>
</blockquote>
<ul>
<li>controller-to-switch messages<ul>
<li><strong>configure</strong>: controller queries/sets  switch configuration parameters</li>
<li><strong>modify-state</strong>: add, delete, modify  flow entries in the OpenFlow tables</li>
<li><strong>Read-state</strong>: collect statistics and  counter values from the switch’s  flow table and ports</li>
<li><strong>packet-out</strong>: controller can send this  packet out of specific switch port</li>
</ul>
</li>
<li>switch-to-controller messages<ul>
<li>packet-in: transfer packet (and its  control) to controller.  See packet out message from controller</li>
<li>flow-removed: flow table entry  deleted at switch</li>
<li>port status: inform controller of a change on a port.</li>
</ul>
</li>
</ul>
<h2 id="5-6-ICMP-The-Internet-Control-Message-Protocol"><a href="#5-6-ICMP-The-Internet-Control-Message-Protocol" class="headerlink" title="5.6. ICMP: The Internet Control Message Protocol"></a>5.6. ICMP: The Internet Control Message Protocol</h2><ul>
<li>used by hosts &amp; routers to communicate network level information<ul>
<li>error reporting: unreachable host, network, port, protocol</li>
<li>echo request/reply (used by ping)</li>
</ul>
</li>
<li>network-layer “above” IP:<ul>
<li>ICMP msgs carried in IP datagrams</li>
</ul>
</li>
<li>ICMP message: <ul>
<li>Type + code + the header and the first 8 bytes of IP datagram causing error</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn103.png" style="zoom:60%"></p>
<h3 id="Traceroute-and-ICMP"><a href="#Traceroute-and-ICMP" class="headerlink" title="Traceroute and ICMP"></a>Traceroute and ICMP</h3><ul>
<li>source sends series of UDP segments to destination<ul>
<li>first set has <code>TTL = 1</code></li>
<li>second set has <code>TTL = 2</code>, etc.</li>
<li>unlike port number</li>
</ul>
</li>
<li>when datagram in nth set arrives to nth router:<ul>
<li>router discards datagram and sends source ICMP message (type 11, code 0)</li>
<li>ICMP message include name of router &amp; IP address</li>
</ul>
</li>
<li>when ICMP message arrives, source records RTTs</li>
<li><strong>OR</strong> traceroute fail: the destination return ICMP “post unreachable” message (type 3, code 3), and source stops.</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn104.png"></p>
<h2 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h2><blockquote>
<p>What we learn in network layer</p>
</blockquote>
<ul>
<li>approaches to network control plane<ul>
<li>per-router control (traditional)</li>
<li>logically centralized control (software defined networking)</li>
</ul>
</li>
<li>traditional routing algorithms<ul>
<li>implementation in Internet: OSPF, BGP</li>
</ul>
</li>
<li>SDN controllers<ul>
<li>implementation in practice: ODL, ONOS</li>
</ul>
</li>
<li>Internet Control Message Protocol</li>
<li>(network management)</li>
</ul>
<h1 id="Chapter-6-Link-Layer"><a href="#Chapter-6-Link-Layer" class="headerlink" title="Chapter 6: Link Layer"></a>Chapter 6: Link Layer</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>6.1</strong>  introduction, services</p>
<p><strong>6.2</strong> error detection, correction </p>
<p><strong>6.3</strong> multiple access protocols</p>
<p><strong>6.4</strong> LANs</p>
<ul>
<li>addressing, ARP</li>
<li>Ethernet</li>
<li>switches</li>
<li>VLANS</li>
</ul>
<p><strong>6.5</strong> link virtualization: MPLS</p>
<p><strong>6.6</strong> data center networking</p>
<p><strong>6.7</strong> a day in the life of a web request</p>
<HR style="FILTER: alpha(opacity=0,finishopacity=100,style=1)" width="100%" color="black" size="2">



<h2 id="6-1-Introduction-amp-Services"><a href="#6-1-Introduction-amp-Services" class="headerlink" title="6.1. Introduction &amp; Services"></a>6.1. Introduction &amp; Services</h2><p><img src="/2024/09/09/Computer-Networks/cn105.png" style="zoom:80%"></p>
<p><strong>Link layer services</strong></p>
<ul>
<li><font color="red">framing, link access</font>: <ul>
<li>encapsulate datagram into frame, adding header, trailer</li>
<li>channel access if shared medium</li>
<li>“MAC” addresses used in frame headers to identify source, destination  <ul>
<li>different from IP address!</li>
</ul>
</li>
</ul>
</li>
<li><font color="red">reliable delivery between adjacent nodes</font>:<ul>
<li>seldom used on low bit-error link (fiber, some twisted pair)</li>
<li>wireless links: high error rates<ul>
<li>Q: why both link-level and end-end reliability?</li>
</ul>
</li>
</ul>
</li>
<li><font color="red">flow control</font>: <ul>
<li>pacing between adjacent sending and receiving nodes</li>
</ul>
</li>
<li><font color="red">error detection</font>: <ul>
<li>errors caused by signal attenuation, noise. </li>
<li>receiver detects presence of errors: <ul>
<li>signals sender for retransmission or drops frame </li>
</ul>
</li>
</ul>
</li>
<li><font color="red">error correction</font>: <ul>
<li>receiver identifies and corrects bit error(s) without resorting to retransmission</li>
</ul>
</li>
<li><font color="red">half-duplex and full-duplex</font>:<ul>
<li>with half duplex, nodes at both ends of link can transmit, but not at same time</li>
</ul>
</li>
</ul>
<p><strong>Adaptors Communicating</strong></p>
<p><img src="/2024/09/09/Computer-Networks/cn106.png"></p>
<ul>
<li>Sending side:<ul>
<li>encapsulates datagrams in frame</li>
<li>adds error checking bits, rdt, flow control, etc.</li>
</ul>
</li>
<li>Receiving side:<ul>
<li>looks for errors, rdt, flow control, etc.</li>
<li>extracts datagram, passes to upper layer at receiving side</li>
</ul>
</li>
</ul>
<h2 id="6-2-Error-detection-amp-correction"><a href="#6-2-Error-detection-amp-correction" class="headerlink" title="6.2. Error detection &amp; correction"></a>6.2. Error detection &amp; correction</h2><p>EDC = Error Detection and Correction bits</p>
<p>D = Data protected by error checking, may include header fields</p>
<p><img src="/2024/09/09/Computer-Networks/cn107.png"></p>
<ul>
<li>Parity check</li>
<li>Check-sum methods (<font color="green">Recall internet checksum</font>)</li>
<li>Cyclic-redundancy check</li>
</ul>
<h3 id="Parity-Check"><a href="#Parity-Check" class="headerlink" title="Parity Check"></a>Parity Check</h3><p><img src="/2024/09/09/Computer-Networks/cn108.png"></p>
<p>Case 1: one-bit error 👉 good performance;</p>
<p>Case 2: multiple-bits error, but in different lines 👉 some correct bits may be detected as incorrect</p>
<p>Case 3: multiple-bits error in one line 👉 may fail to detect</p>
<h3 id="Cyclic-redundancy-check"><a href="#Cyclic-redundancy-check" class="headerlink" title="Cyclic redundancy check"></a>Cyclic redundancy check</h3><p><img src="/2024/09/09/Computer-Networks/cn109.png"></p>
<ul>
<li>view <code>D</code>, and choose (r + 1) bit pattern (generator), <code>G</code></li>
<li>goal: choose r CRC bits, R, such that<ul>
<li>{D, R} exactly divisible by G (modulo 2)</li>
<li>receiver knows G, divides {D, R} by G. If non-zero remainder: error detected!</li>
<li>can detect all consecutive bit errors of r bits or less</li>
</ul>
</li>
<li>E.g. 👇</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn110.png"></p>
<h2 id="6-3-Multiple-Access-Protocol"><a href="#6-3-Multiple-Access-Protocol" class="headerlink" title="6.3. Multiple Access Protocol"></a>6.3. Multiple Access Protocol</h2><p><strong>2 types of “links”</strong></p>
<ul>
<li>point-to-point<ul>
<li>PPP for dial-up access</li>
<li>point-to-point link between Ethernet switch, host</li>
</ul>
</li>
<li><font color="red">broadcast (shared wire or medium)</font>:<ul>
<li>old-fashioned Ethernet</li>
<li>802.11 wireless LAN (WLAN)</li>
</ul>
</li>
</ul>
<h3 id="multiple-access-protocol"><a href="#multiple-access-protocol" class="headerlink" title="multiple access protocol"></a>multiple access protocol</h3><ul>
<li>distributed algorithm that determines how nodes share channel, i.e., determine which and when node can transmit</li>
<li>communication about channel sharing must use channel itself! <ul>
<li>no out-of-band channel for coordination</li>
</ul>
</li>
</ul>
<p><strong>Ideal MAC</strong></p>
<ol>
<li>Given channel of rate $R$ bps, $M$ nodes wanted to transmit can send at rate $R/M$</li>
<li>Fully decentralized<ul>
<li>no special node to coordinate transmissions</li>
<li>no synchronization of clocks, slots</li>
</ul>
</li>
<li>simple</li>
</ol>
<p><strong>Three broad classes</strong></p>
<ul>
<li><font color="red">channel partitioning</font>:<ul>
<li>divide channel into smaller “pieces” (time slots, frequency, code)</li>
<li>allocate piece to node for exclusive use</li>
</ul>
</li>
<li><font color="red">random access</font>:<ul>
<li>channel not divided, allow collisions</li>
<li>“recover” from collisions</li>
</ul>
</li>
<li><font color="red">“taking turns”</font>:<ul>
<li>nodes take turns, but nodes with more to send can take longer turns</li>
</ul>
</li>
</ul>
<h4 id="Channel-partitioning-MAC-protocols"><a href="#Channel-partitioning-MAC-protocols" class="headerlink" title="Channel partitioning MAC protocols"></a>Channel partitioning MAC protocols</h4><ul>
<li>TDMA (Time Division Multiple Access)<ul>
<li>access to channel in “rounds” </li>
<li>each station gets fixed length slot (length = packet transmission time) in each round </li>
<li>unused slots go idle </li>
<li>example: 6-station LAN, 1,3,4 have packets to send, slots 2,5,6 idle</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn111.png"></p>
<ul>
<li>FDMA: frequency division multiple access <ul>
<li>channel spectrum divided into frequency bands</li>
<li>each station assigned fixed frequency band</li>
<li>unused transmission time in frequency bands go idle </li>
<li>example: 6-station LAN, 1, 3, 4 have packet to send, frequency bands 2, 5, 6 idle </li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/cn112.png"></p>
<ul>
<li>Limitations:<ul>
<li>sometimes idle but somtimes full (not efficient enough)</li>
</ul>
</li>
</ul>
<h4 id="Random-access-protocols"><a href="#Random-access-protocols" class="headerlink" title="Random access protocols"></a>Random access protocols</h4><ul>
<li>Random access; if fails, wait for a random time</li>
<li>two or more transmitting nodes 👉  “collision”,</li>
<li>random access MAC protocol specifies: <ul>
<li>how to detect collisions</li>
<li>how to recover from collisions (e.g., via delayed retransmissions)</li>
</ul>
</li>
<li>Advantage: when node has packet to send<ul>
<li>transmit at full channel data rate R.</li>
<li>no a priori coordination among nodes</li>
</ul>
</li>
<li>examples of random access MAC protocols:<ul>
<li>slotted ALOHA</li>
<li>ALOHA</li>
<li>CSMA, CSMA/CD (Ethernet), CSMA/CA (802.11) <font color="grey">[See at Chap 7]</font></li>
</ul>
</li>
</ul>
<h4 id="Slotted-ALOHA-example-of-RAP"><a href="#Slotted-ALOHA-example-of-RAP" class="headerlink" title="Slotted ALOHA: example of RAP"></a>Slotted ALOHA: example of RAP</h4><p><img src="/2024/09/09/Computer-Networks/cn113.png"></p>
<ul>
<li>Operations: when node obtains fresh frame, transmits in next slot<ul>
<li>if no collision: node can send new frame in next slot</li>
<li>if collision: node retransmits frame in each subsequent slot with probability <code>p</code> until success</li>
</ul>
</li>
<li>Pros<ul>
<li>single active node can continuously transmit at full rate of channel</li>
<li>highly decentralized: only slots in nodes need to be in sync</li>
<li>simple</li>
</ul>
</li>
<li>Cons<ul>
<li>collisions, wasting slots</li>
<li>idle slots</li>
<li>clock synchronization</li>
</ul>
</li>
</ul>
<center>---  Calculations ---</center>

<ul>
<li>Suppose: $N$ nodes with many frames to send, each transmits in slot with probability $p$</li>
</ul>
<blockquote>
<p>会算ALOHA的有效传输的效率</p>
<p>CSMA：传输前感知——会遇到collision：传输延迟导致</p>
<p>CSMA+CD (Collision Detection): Lec14 p19</p>
<p>Ethernet CSMA/CD algorithm（了解）</p>
</blockquote>
<h4 id="“Taking-turns”-MAC-protocols"><a href="#“Taking-turns”-MAC-protocols" class="headerlink" title="“Taking turns” MAC protocols"></a>“Taking turns” MAC protocols</h4><p>look for best of both worlds! </p>
<ul>
<li>when one node wants to transmit, it can send at rate $R$. </li>
<li>when $M$ nodes want to transmit, each can send at  average rate $R/M$</li>
</ul>
<blockquote>
<p>概念：master 主机和 slaves 主机</p>
<p>master 轮询（无论 slaves 是否有 frame）</p>
<p>问题：轮询消耗；master 单点错误</p>
<p>另一种方式：token 传输</p>
<p>token 经过节点，有 frame 传 frame，没有直接 pass</p>
<p>问题：token 负载和单点错误</p>
</blockquote>
<h2 id="6-4-LANs"><a href="#6-4-LANs" class="headerlink" title="6.4 LANs"></a>6.4 LANs</h2><blockquote>
<p>概念：lec14 p29</p>
<p>MAC （或 LAN或以太网）地址：适配器（在网络接口）的地址</p>
<p>链路层 switches 没有 MAC 地址</p>
<p>作用：获取“本地”（同一个子网？）的 frame</p>
<p>概念： LAN 地址和 ARP</p>
<p>Lec14 p29：每个 LAN 上的适配器有一个唯一的 LAN 地址</p>
<ul>
<li>MAC 地址类似 ID；IP 地址类似邮政编码</li>
</ul>
</blockquote>
<ul>
<li>一个适配器给另一个适配器发送 frame<ul>
<li>用 dst 的MAC地址封装然后发送到局域网</li>
</ul>
</li>
<li>适配器接收到时检查是否匹配，选择是否解封装或丢弃</li>
<li>MAC 广播地址 <code>FF-FF-FF-FF-FF-FF</code></li>
</ul>
<blockquote>
<p>Q: How to determine interface’s MAC address, given its  IP address?</p>
</blockquote>
<h3 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h3><p><strong>Def.</strong> Resolve addresses only for  interfaces on the same subnet.</p>
<ul>
<li><strong>ARP table</strong>: each IP node (host,  router) on LAN has table</li>
</ul>
<h4 id="ARP-protocol"><a href="#ARP-protocol" class="headerlink" title="ARP protocol"></a>ARP protocol</h4><ul>
<li>same LAN<ul>
<li>broadcast</li>
</ul>
</li>
<li>diff LAN<ul>
<li>focus on addressing – at IP (datagram) and MAC layer (frame)</li>
<li>assume A knows B’s IP address, knows IP address of first hop router (e.g. R) or knows R’s MAC address?</li>
<li>Lec14 p37-p41</li>
</ul>
</li>
</ul>
<h3 id="Ethernet"><a href="#Ethernet" class="headerlink" title="Ethernet"></a>Ethernet</h3><ul>
<li>first widely used LAN technology </li>
<li>simpler, cheap </li>
<li>kept up with speed race: 10 Mbps – 10 Gbps</li>
</ul>
<blockquote>
<p>概念：bus，star</p>
</blockquote>
<ul>
<li>了解：Ethernet frame structure<ul>
<li><strong>Preamble</strong>: 7 bytes with pattern <code>10101010</code> followed by one byte with  pattern <code>10101011</code></li>
<li>dst / src addresses: 6 byte source, destination MAC addresses</li>
<li><strong>type</strong>: indicates higher layer protocol (mostly IP)</li>
<li><strong>CRC</strong>: cyclic redundancy check at receiver (with error detection)</li>
</ul>
</li>
<li>Connectionless and Unreliable<ul>
<li>no handshaking between sending and  receiving NICs</li>
<li>receiving NIC doesn’t send acks or nacks  to sending NIC</li>
</ul>
</li>
<li>Ethernet’s MAC protocol: <font color="red">unslotted CSMA/CD with  binary backoff</font> </li>
</ul>
<blockquote>
<p>Ethernet 有普遍的 MAC 协议和帧格式，但是物理网络（网线/传输速度）不同</p>
</blockquote>
<h3 id="Switch"><a href="#Switch" class="headerlink" title="Switch"></a>Switch</h3><blockquote>
<p>介绍：Ethernet Switch——链路层设备，用于中转帧（含选择）</p>
<p>switch 实现多并发传输</p>
<p>switch 无需人工配置（自学习），维护一个 switch table：(MAC address of host, interface  to reach host, time stamp)</p>
<p>自学习例子：终端 A 对应接口 x，终端 B 对应接口（未知），A 往 B 发送帧：</p>
<ul>
<li>switch 中未学习到B的接口：往x以外的所有接口输送</li>
<li>发现 B 对应接口 x ：丢弃帧</li>
<li>发现 B 对应接口 y ：forward</li>
</ul>
</blockquote>
<p>了解：企业（机构）网络 Lec14 p57</p>
<blockquote>
<p>对比 bus/hub，switch 的优势：</p>
<ul>
<li>Elimination of collisions (one frame on a time)</li>
<li>Heterogeneous links (diff link with diff speed)</li>
<li>Management (disconnect malfunctions NI)</li>
</ul>
</blockquote>
<h3 id="VLANs"><a href="#VLANs" class="headerlink" title="VLANs"></a>VLANs</h3><blockquote>
<p>Motivation:</p>
<ul>
<li>single broadcast domain (效率，安全)</li>
<li>Inefficient use of switches</li>
</ul>
</blockquote>
<h4 id="Port-based-VLAN"><a href="#Port-based-VLAN" class="headerlink" title="Port-based VLAN"></a>Port-based VLAN</h4><ul>
<li>traffic isolation (defined by switch port or MAC addresses)</li>
<li>dynamic membership</li>
<li>forwarding between VLANS: done  via routing (just as with separate  switches)</li>
</ul>
<blockquote>
<p>Q: what if one VLAN over multiple switches ?</p>
<p>A: one trunk port to connect two switches.</p>
</blockquote>
<h2 id="6-6-data-center-networking-略"><a href="#6-6-data-center-networking-略" class="headerlink" title="6.6 data center networking (略)"></a>6.6 data center networking (略)</h2><h2 id="6-7-a-day-in-the-life-of-a-web-request"><a href="#6-7-a-day-in-the-life-of-a-web-request" class="headerlink" title="6.7 a day in the life of a web request"></a>6.7 a day in the life of a web request</h2><ol>
<li>connecting to the Internet<ul>
<li>send DHCP to DHCP server, which reply DHCP ACK to endpoint</li>
<li>get IP address, info of DNS server and first-hop router IP</li>
</ul>
</li>
<li>ARP: get MAC address of first-hop</li>
<li>DNS: get IP of <code>www.google.com</code> , for example</li>
<li>TCP connection carrying HTTP</li>
<li>HTTP request/reply</li>
</ol>
<h1 id="Chapter-7-Wireless-and-Mobile-Networks"><a href="#Chapter-7-Wireless-and-Mobile-Networks" class="headerlink" title="Chapter 7. Wireless and Mobile Networks"></a>Chapter 7. Wireless and Mobile Networks</h1><HR style="FILTER: alpha(opacity=0, finishopacity=100,style=1)" width="100%" color="black" size="2">

<center><font face="STXinwei" size="5">Layout</font></center>

<p><strong>7.1</strong>  introduction</p>
<p><strong>Wireless</strong></p>
<p><strong>7.2</strong> Wireless links, characteristics</p>
<ul>
<li>CDMA</li>
</ul>
<p><strong>7.3</strong> IEEE 802.11 wireless LANs (“Wi-Fi”)</p>
<p><strong>7.4</strong> Cellular Internet Access</p>
<ul>
<li>architecture</li>
<li>standards (e.g., 3G, LTE)</li>
</ul>
<p><strong>Mobility</strong></p>
<p><strong>7.5</strong> Principles: addressing and routing to mobile users</p>
<p><strong>7.6</strong> Mobile IP</p>
<p><strong>7.7</strong> Handling mobility in cellular networks</p>
<p><strong>7.8</strong> Mobility and higher-layer protocols</p>
<HR style="FILTER: alpha(opacity=0,finishopacity=100,style=1)" width="100%" color="black" size="2">



<h2 id="7-1-Intro"><a href="#7-1-Intro" class="headerlink" title="7.1 Intro"></a>7.1 Intro</h2><h2 id="Elements"><a href="#Elements" class="headerlink" title="Elements"></a>Elements</h2><ul>
<li>wireless hosts</li>
<li>base station</li>
<li>wireless link</li>
</ul>
<h2 id="7-2-Wireless-links"><a href="#7-2-Wireless-links" class="headerlink" title="7.2 Wireless links"></a>7.2 Wireless links</h2><ul>
<li>Characters<ul>
<li>decreased signal strength</li>
<li>interference from other sources</li>
<li>multipath propagation</li>
</ul>
</li>
</ul>
<blockquote>
<p>概念：SNR: signal-to-noise ratio</p>
</blockquote>
<h3 id="CDMA-Code-Division-Multiple-Access"><a href="#CDMA-Code-Division-Multiple-Access" class="headerlink" title="CDMA: Code Division Multiple Access"></a>CDMA: Code Division Multiple Access</h3><ul>
<li>unique “code” assigned to each user; i.e., code set  partitioning <ul>
<li>all users share same frequency, but each user has own  “chipping” sequence (i.e., code) to encode data </li>
<li>allows multiple users to “coexist” and transmit  simultaneously with minimal interference (if codes are  “orthogonal”) </li>
</ul>
</li>
<li>encoded signal = (original data) x (chipping  sequence) </li>
<li>decoding: inner-product of encoded signal and  chipping sequence</li>
</ul>
<h2 id="7-3-IEEE-802-11-Wireless-LAN"><a href="#7-3-IEEE-802-11-Wireless-LAN" class="headerlink" title="7.3 IEEE 802.11 Wireless LAN"></a>7.3 IEEE 802.11 Wireless LAN</h2><ul>
<li>2.4-5 GHz unlicensed  spectrum </li>
<li>up to 11 Mbps </li>
<li>direct sequence spread  spectrum (DSSS) in physical  layer <ul>
<li>all hosts use same  chipping code</li>
</ul>
</li>
</ul>
<blockquote>
<p>802.11 LAN Architecture: Lec15 p36</p>
<p>Collision Avoidance: RTS-CTS  exchange: Lec15 p38 (熟悉流程)</p>
</blockquote>
<h2 id="7-4-Cellular-Internet-access"><a href="#7-4-Cellular-Internet-access" class="headerlink" title="7.4 Cellular Internet  access"></a>7.4 Cellular Internet  access</h2><blockquote>
<p>蜂窝网络</p>
</blockquote>
<p>Cell</p>
<ul>
<li>covers geographical region </li>
<li>base station (BS)  analogous to 802.11 AP </li>
<li>mobile users  attach to network  through BS </li>
<li>air-interface:  physical and link layer protocol between mobile and BS</li>
</ul>
<h2 id="7-5-Principles-addressing-and-routing-to-mobile-users"><a href="#7-5-Principles-addressing-and-routing-to-mobile-users" class="headerlink" title="7.5 Principles: addressing  and routing to mobile  users"></a>7.5 Principles: addressing  and routing to mobile  users</h2><h1 id="Labs"><a href="#Labs" class="headerlink" title="Labs"></a>Labs</h1><h2 id="Week-1"><a href="#Week-1" class="headerlink" title="Week 1"></a><a name="lab01">Week 1</a></h2><blockquote>
<p>Introduce to Lab 01:</p>
<p>应用层（Application）</p>
<ul>
<li><code>ipconfig</code></li>
<li><code>nslookup</code></li>
</ul>
<p>网络层（Network）</p>
<ul>
<li><code>ping</code></li>
<li><code>tracert</code></li>
<li><code>netstat</code></li>
</ul>
<p>链路层（Link）</p>
<ul>
<li><code>arp</code></li>
</ul>
</blockquote>
<ul>
<li>Protocol layering (TCP/IP)<ul>
<li>Application: HTTP, HTTPS, SMTP, POP3, FTP, DNS, DHCP, etc.</li>
<li>Transport: TCP, UDP</li>
<li>Network: IPv4, IPv6, ICMP, IGMP, ARP</li>
<li>Link</li>
<li>Physical</li>
</ul>
</li>
</ul>
<ul>
<li>Domain name(App Layer)<ul>
<li>www.sustech.edu.cn</li>
<li>www.baidu.com</li>
</ul>
</li>
<li>IP address(Network Layer)<ul>
<li>IPv4 (点分十进制)<ul>
<li>32 bits, dotted decimal notation</li>
<li>e.g. 192.168.1.1</li>
</ul>
</li>
<li>IPv6<ul>
<li>128 bits, hecadecimal notation</li>
<li>e.g. 2002::4ab8:7b76</li>
</ul>
</li>
</ul>
</li>
<li>Physical/MAC address(Link Layer)<ul>
<li>48 bits, hexadecimal notation</li>
<li>e.g. 8a-69-0c-51-98-66</li>
</ul>
</li>
</ul>
<ul>
<li>Use <code>ipconfig</code> to check your PC’s network configurations (Wins)<ul>
<li>use <code>ifconfig</code> in MacOS</li>
<li>IP Address = {Network Number, Host Number}</li>
<li>Subnet Mask (子网掩码): n ‘1’ + m ‘0’ (totally 32 bits)<ul>
<li>e.g. 255.255.252.0 (22 ‘1’ and 10 ‘0’)</li>
</ul>
</li>
<li>Network Number = Subnet Mask &amp; IP Address<ul>
<li>e.g. if IP Address is <code>129.168.1.1</code> and Subnet Mask is <code>255.255.252.0</code>, then Network Number is <code>129.168.0.0</code> and Host Number is <code>0.0.1.1</code></li>
</ul>
</li>
</ul>
</li>
<li>Try <code>ipconfig -release</code> (haha~)<ul>
<li>find your network shutdown! (DHCP disabled)</li>
<li>use <code>ipconfig -renew</code> to apply for a new one.</li>
</ul>
</li>
</ul>
<p><strong>DNS Server</strong></p>
<ul>
<li>Try <code>ipconfig -displaydns</code>: looking for info about network(DNS) cache</li>
<li>Use <code>ipconfig -flushdns</code> to clear and refresh the DNS cache</li>
</ul>
<p><strong>ARP (地址解析协议)</strong></p>
<ul>
<li><code>arp -a</code><ul>
<li>Display all ARP information, that is, the corresponding relationship between all activated IP addresses and physical<br>addresses</li>
</ul>
</li>
<li><code>arp -d</code><ul>
<li>Delete all ARP cache contents. </li>
<li>If the IP address is specified in the command, only the ARP cache information of the IP address is deleted.</li>
</ul>
</li>
<li><code>arp -s</code><ul>
<li>Adding the corresponding relationship between IP address and physical address to ARP cache</li>
<li>e.g. <code>arp -s 172.16.0.19 00-10-5C-BE-11-CC</code></li>
</ul>
</li>
</ul>
<ul>
<li><code>nslookup</code> to find the corresponding IP through the host name, or find the corresponding host by specifying the IP.<ul>
<li>e.g. <code>nslookup www.baidu.com</code> or <code>nslookup 140.207.198.6</code></li>
</ul>
</li>
</ul>
<p><strong>Ping</strong></p>
<ul>
<li>Use <code>ping</code> to check network connectivity<ul>
<li><code>ping /?</code> : look up usage</li>
<li><code>ping -t</code> : ping the specific host ‘til stopped</li>
<li><code>ping -i</code> : Time to live(TTL)</li>
<li><code>ping -n &lt;count&gt;</code> : set echo requests number</li>
</ul>
</li>
</ul>
<p><strong>Tracert: trace route</strong></p>
<ul>
<li>Use <code>tracert</code> to track the routing to check the connectivity of the network.</li>
<li>An example of this(address is fake):</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\xxx&gt; tracert www.baidu.com</span><br><span class="line"></span><br><span class="line">Tracing route to www.a.shifen.com [240e:ff:e020:966:0:ff:b042:f296]</span><br><span class="line">over a maximum of 30 hops:</span><br><span class="line"></span><br><span class="line">  1    14 ms    31 ms    14 ms  3010:dc5:207e:1107::6</span><br><span class="line">  2     7 ms     3 ms     3 ms  3010:dc5:207e:1:1::2</span><br><span class="line">  3     2 ms     2 ms     3 ms  3010:dc5:207e:1::1:1</span><br><span class="line">  4     4 ms     6 ms     3 ms  3010:250:3c02::d:1</span><br><span class="line">  5     2 ms     7 ms     2 ms  cernet2.net [3010:dc5:a2:4400::1101]</span><br><span class="line">  6     4 ms     4 ms     3 ms  3010:dc5:2:121::1</span><br><span class="line">  7     7 ms     7 ms     6 ms  3010:dc5:2:18::1</span><br><span class="line">  8     *        8 ms     6 ms  3010:dc5:2:704::2</span><br><span class="line">  9     9 ms     *        *     240e::e:3:2008:402</span><br><span class="line"> 10     6 ms     7 ms     7 ms  240e::c:3:5200:902</span><br><span class="line"> 11     8 ms     6 ms     7 ms  240e:1f:5000:64::3</span><br><span class="line"> 12   171 ms     *      150 ms  240e:1f:5800:35::3</span><br><span class="line"> 13     9 ms    10 ms     8 ms  240e:ff:e020:8ff::73</span><br><span class="line"> 14    44 ms    44 ms    44 ms  240c:4001:3170::ec2:eb2:3</span><br><span class="line"> 15    42 ms    44 ms    43 ms  240c:4001:3170::eb1:eb2:2</span><br><span class="line"> 16    44 ms    43 ms    43 ms  240c:4051:1317:2eb:1eaf:4:eb01:2</span><br><span class="line"> 17    46 ms    45 ms    44 ms  240c:4051:1317:205:1eaf:4:1b05:5</span><br><span class="line"> 18     8 ms     8 ms     8 ms  240e:ff:e020:966:0:ff:b042:f296</span><br><span class="line"></span><br><span class="line">Trace complete.</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Traceroute program:</strong> provides delay measurement from source to router along end-end Internet path towards destination. For $i$ in $N$ node($N-1$ routers and 1 end):<ul>
<li>sends three packets (as probes) with a time-to-live (TTL) of $i$; will reach router $i$ on path towards destination</li>
<li>router $i$ will return packets to sender</li>
<li>sender times interval between transmission and reply.</li>
</ul>
</li>
</ul>
<h2 id="Week-2"><a href="#Week-2" class="headerlink" title="Week 2"></a>Week 2</h2><h3 id="Wireshark-使用"><a href="#Wireshark-使用" class="headerlink" title="Wireshark 使用"></a>Wireshark 使用</h3><h2 id="Week-8"><a href="#Week-8" class="headerlink" title="Week 8"></a><a name="lab08">Week 8</a></h2><h3 id="SACK"><a href="#SACK" class="headerlink" title="SACK"></a>SACK</h3><font color="green">Review:</font>

<ul>
<li>SACK<ul>
<li>Sliding Window</li>
<li>Retransmission</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/lab1.png" style="zoom:60%"></p>
<ul>
<li>In practice, while applying SACK, the message often containing “edge” to help clarify the state of pkts<ul>
<li><code>SLE</code>: Left Edge of Block is the first sequence number of this block.</li>
<li><code>SRE</code>: Right Edge of Block is the sequence number immediately following the last sequence number of this block.</li>
<li>Each block represents <font color="red">received bytes</font> of data that are <font color="red">contiguous and isolated</font>; that is, the bytes just below the block, (Left Edge of Block - 1), and just above the block, (Right Edge of Block), have <font color="red">NOT</font> been received.</li>
</ul>
</li>
<li>E.g. If <code>Ack = 1461</code>, <code>SLE = 4381, SRE = 5841</code>, it means packet [4381 - 5840] in bytes has been received, the waiting packets is/are [1461 - 4380] in bytes.</li>
<li>E.g. If there is no <code>SLE</code> or <code>SRE</code>, that means <code>Ack</code> is the lowest bytes unreceived.</li>
</ul>
<p><img src="/2024/09/09/Computer-Networks/lab2.png"></p>
<ul>
<li>Retransmission:</li>
<li>Receiver send immediately <code>Dup Ack</code> when receiving out-of-order pkt. Receiver “wants to tell” sender there is something out-of-order and what it expect (ACK #)</li>
<li>But sender doesn’t know whether the <code>Dup Ack</code> is caused by pkt loss or reordering of pkts. (Shown above)<ul>
<li>Assume it’s reordering pkts, then <code>Dup Ack #</code> is few (1 or 2), then receiver will generate a new <code>ACK</code></li>
<li>If it’s pkt loss, then there’re moer than 3 <code>Dup Ack</code>, and sender should retransmit the <code>ACK #</code> pkt</li>
</ul>
</li>
</ul>
<h3 id="QUIC-Quick-UDP-Internet-Connections"><a href="#QUIC-Quick-UDP-Internet-Connections" class="headerlink" title="QUIC: Quick UDP Internet Connections"></a>QUIC: Quick UDP Internet Connections</h3><p><strong>Def.</strong> A UDP-Based Multiplexed and Secure Transport</p>
<h2 id="Week-11"><a href="#Week-11" class="headerlink" title="Week 11"></a>Week 11</h2><h3 id="Use-of-eNSP"><a href="#Use-of-eNSP" class="headerlink" title="Use of eNSP"></a>Use of eNSP</h3><h1 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h1><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">缩写</th>
<th style="text-align:center">释义</th>
<th style="text-align:center">缩写</th>
<th style="text-align:center">释义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">DSL</td>
<td style="text-align:center">数字用户线</td>
<td style="text-align:center">LAN</td>
<td style="text-align:center">局域网</td>
</tr>
<tr>
<td style="text-align:center">DSLAM</td>
<td style="text-align:center">数字用户线接入复用器</td>
<td style="text-align:center">WLAN</td>
<td style="text-align:center">无线局域网</td>
</tr>
<tr>
<td style="text-align:center">HFC(Hybrid fiber coax)</td>
<td style="text-align:center">混合光纤同轴电缆</td>
<td style="text-align:center">WAN</td>
<td style="text-align:center">广域网(无线接入网)</td>
</tr>
<tr>
<td style="text-align:center">ISP</td>
<td style="text-align:center">网络服务提供商</td>
<td style="text-align:center">ARP</td>
<td style="text-align:center">地址解析协议</td>
</tr>
<tr>
<td style="text-align:center">HTML</td>
<td style="text-align:center">超文本标记语言</td>
<td style="text-align:center">HTTP(S)</td>
<td style="text-align:center">超文本传输（安全）协议</td>
</tr>
<tr>
<td style="text-align:center">DNS</td>
<td style="text-align:center">域名系统</td>
<td style="text-align:center">CDN</td>
<td style="text-align:center">内容分发网络</td>
</tr>
<tr>
<td style="text-align:center">URL</td>
<td style="text-align:center">统一资源定位</td>
<td style="text-align:center">SDN</td>
<td style="text-align:center">软件定义网络</td>
</tr>
<tr>
<td style="text-align:center">NIC</td>
<td style="text-align:center">网络接口卡（网卡）</td>
<td style="text-align:center">DHCP</td>
<td style="text-align:center">动态主机配置协议</td>
</tr>
<tr>
<td style="text-align:center">NAT</td>
<td style="text-align:center">网络地址翻译</td>
<td style="text-align:center">MAC</td>
<td style="text-align:center">(Media Access Control)</td>
</tr>
<tr>
<td style="text-align:center">OSPF</td>
<td style="text-align:center">Open Shortest Path First</td>
<td style="text-align:center">BGP</td>
<td style="text-align:center">Border Gateway Protocol</td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
</HR></HR></HR></HR></HR></HR></HR></HR></HR></HR></HR></HR></HR></HR>
    </div>
    
    <div>
      
      <div>
    
        <div style="text-align:center;color: #9d9d9d;font-size:18px;">------------- 本文结束 <i class="fas fa-book-reader"></i> 感谢阅读 -------------</div>
    
</div>
      
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/CSE-Learning/" rel="tag"># CSE Learning</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/08/29/Big-Data-3/" rel="prev" title="MA234 大数据导论与实践（三）">
                  <i class="fa fa-angle-left"></i> MA234 大数据导论与实践（三）
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/09/13/Operating-Systems/" rel="next" title="CS302 计算机操作系统">
                  CS302 计算机操作系统 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","cdn":"//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
