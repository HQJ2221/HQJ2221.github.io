<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icons8-fox-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icons8-fox-16.png">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai+Mono+TC:300,300italic,400,400italic,700,700italic%7CRoboto+Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/black/pace-theme-center-atom.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"hqj2221.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":280,"display":"post","padding":18,"offset":20},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Learning what OS do and how it functions.">
<meta property="og:type" content="article">
<meta property="og:title" content="Êìç‰ΩúÁ≥ªÁªü">
<meta property="og:url" content="http://hqj2221.github.io/2024/09/13/Operation-System/index.html">
<meta property="og:site_name" content="ÁâõÈ©¨ÂÜúÁî∞">
<meta property="og:description" content="Learning what OS do and how it functions.">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os201.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os202.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os203.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os204.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os701.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os702.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os703.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os704.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os705.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os706.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os707.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os708.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os709.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os710.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os711.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os801.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os901.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os902.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os903.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os904.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os905.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os906.png">
<meta property="og:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os907.png">
<meta property="article:published_time" content="2024-09-13T15:27:27.000Z">
<meta property="article:modified_time" content="2024-11-21T13:39:28.969Z">
<meta property="article:author" content="Kigen">
<meta property="article:tag" content="CSE Learning">
<meta property="article:tag" content="Rust">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://hqj2221.github.io/2024/09/13/Operation-System/os201.png">


<link rel="canonical" href="http://hqj2221.github.io/2024/09/13/Operation-System/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://hqj2221.github.io/2024/09/13/Operation-System/","path":"2024/09/13/Operation-System/","title":"Êìç‰ΩúÁ≥ªÁªü"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Êìç‰ΩúÁ≥ªÁªü | ÁâõÈ©¨ÂÜúÁî∞</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">ÁâõÈ©¨ÂÜúÁî∞</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Ê≤°Âú®21‰∏ñÁ∫™ÁöÑ‰∫íËÅîÁΩëÁïô‰∏ãËµõÂçöÊ°àÂ∫ïÁöÑ‰∫∫,</br> Âè™‰ºöÂ∫¶Ëøá‰∏Ä‰∏™Áõ∏ÂØπÂ§±Ë¥•ÁöÑ‰∫∫Áîü„ÄÇ</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">11</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">8</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fas fa-list fa-fw"></i>Categories<span class="badge">6</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
      <div class="search-header">
        <span class="search-icon">
          <i class="fa fa-search"></i>
        </span>
        <div class="search-input-container">
          <input autocomplete="off" autocapitalize="off" maxlength="80"
                placeholder="Searching..." spellcheck="false"
                type="search" class="search-input">
        </div>
        <span class="popup-btn-close" role="button">
          <i class="fa fa-times-circle"></i>
        </span>
      </div>
      <div class="search-result-container">
        <div class="search-result-icon">
          <i class="fa fa-spinner fa-pulse fa-5x"></i>
        </div>
      </div>
    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec01-Intro"><span class="nav-text">Lec01. Intro</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Before-this-course-about"><span class="nav-text">Before this course (about)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Definitions-of-OS"><span class="nav-text">Definitions of OS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#What-does-an-Operating-Systems-do"><span class="nav-text">What does an Operating Systems do ?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OS-Concepts"><span class="nav-text">OS Concepts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Process-%E8%BF%9B%E7%A8%8B"><span class="nav-text">Process (ËøõÁ®ã)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Process-Management"><span class="nav-text">Process Management</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory"><span class="nav-text">Memory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-Management"><span class="nav-text">Memory Management</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#File-System-amp-I-O"><span class="nav-text">File System &amp; I&#x2F;O</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Protection-and-Security"><span class="nav-text">Protection and Security</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec02-OS-Basics"><span class="nav-text">Lec02. OS Basics</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline"><span class="nav-text">Outline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dual-Mode-Operations"><span class="nav-text">Dual-Mode Operations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Overview"><span class="nav-text">Overview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mode-Transitions"><span class="nav-text">Mode Transitions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#System-Calls"><span class="nav-text">System Calls</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Exception-and-Interrupt"><span class="nav-text">Exception and Interrupt</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec03-Process"><span class="nav-text">Lec03. Process</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-1"><span class="nav-text">Outline</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec04-CPU-Scheduler"><span class="nav-text">Lec04. CPU Scheduler</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-2"><span class="nav-text">Outline</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec05-Synchronization"><span class="nav-text">Lec05. Synchronization</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-3"><span class="nav-text">Outline</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec06-Address-Translation"><span class="nav-text">Lec06. Address Translation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-4"><span class="nav-text">Outline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Segmentation"><span class="nav-text">Segmentation</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec07-Paging"><span class="nav-text">Lec07. Paging</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-5"><span class="nav-text">Outline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Intro-to-Paging"><span class="nav-text">Intro to Paging</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Multi-level-page-tables"><span class="nav-text">Multi-level page tables</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-Page-Table-Strctures"><span class="nav-text">Other Page Table Strctures</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Read-world-Paging-Scheme"><span class="nav-text">Read-world Paging Scheme</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Translation-Lookaside-Buffer"><span class="nav-text">Translation Lookaside Buffer</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec08-Demand-Paging"><span class="nav-text">Lec08. Demand Paging</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-6"><span class="nav-text">Outline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swap-Space"><span class="nav-text">Swap Space</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Demand-Paging"><span class="nav-text">Demand Paging</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Lec09-Linux-Memory-Management"><span class="nav-text">Lec09. Linux Memory Management</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Outline-7"><span class="nav-text">Outline</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Address-Space-in-Linux"><span class="nav-text">Address Space in Linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Slab-Allocator"><span class="nav-text">Slab Allocator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Buddy-System"><span class="nav-text">Buddy System</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Kigen"
      src="/images/sparkle.gif">
  <p class="site-author-name" itemprop="name">Kigen</p>
  <div class="site-description" itemprop="description">„Ç≠„Ç≤„É≥„ÅÆÂÄã‰∫∫„Çµ„Ç§„Éà</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/HQJ2221" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;HQJ2221" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/2096936916" title="Bilibili ‚Üí https:&#x2F;&#x2F;space.bilibili.com&#x2F;2096936916" rel="noopener me" target="_blank"><i class="fab fa-bilibili fa-fw"></i>Bilibili</a>
      </span>
  </div>

        </div>
      </div>
        <div class="back-to-top animated" role="button" aria-label="Back to top">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://hqj2221.github.io/2024/09/13/Operation-System/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/sparkle.gif">
      <meta itemprop="name" content="Kigen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ÁâõÈ©¨ÂÜúÁî∞">
      <meta itemprop="description" content="„Ç≠„Ç≤„É≥„ÅÆÂÄã‰∫∫„Çµ„Ç§„Éà">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Êìç‰ΩúÁ≥ªÁªü | ÁâõÈ©¨ÂÜúÁî∞">
      <meta itemprop="description" content="Learning what OS do and how it functions.">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Êìç‰ΩúÁ≥ªÁªü
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2024-09-13 23:27:27" itemprop="dateCreated datePublished" datetime="2024-09-13T23:27:27+08:00">2024-09-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-11-21 21:39:28" itemprop="dateModified" datetime="2024-11-21T21:39:28+08:00">2024-11-21</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/2024-Fall/" itemprop="url" rel="index"><span itemprop="name">2024 Fall</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">Learning what OS do and how it functions.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Lec01-Intro"><a href="#Lec01-Intro" class="headerlink" title="Lec01. Intro"></a>Lec01. Intro</h1><h2 id="Before-this-course-about"><a href="#Before-this-course-about" class="headerlink" title="Before this course (about)"></a>Before this course (about)</h2><ul>
<li>Have basic concept about Computer Organization</li>
<li>Be familiar to at least one programming language (better be <code>C / C++</code>)</li>
<li>We use <code>Rust</code> as example code in this course<ul>
<li>Learning Rust : <a target="_blank" rel="noopener" href="https://doc.rust-lang.org/stable/book/">https://doc.rust-lang.org/stable/book</a></li>
<li>Search for OSTD <code>lib</code> and <code>mod</code> : <a target="_blank" rel="noopener" href="https://docs.rs/ostd/latest/ostd/">https://docs.rs/ostd/latest/ostd/</a></li>
</ul>
</li>
</ul>
<h2 id="Definitions-of-OS"><a href="#Definitions-of-OS" class="headerlink" title="Definitions of OS"></a>Definitions of OS</h2><blockquote>
<p>What is a computer ?</p>
<p>How does a modern computer work ?</p>
<p>What is operating systems ?</p>
</blockquote>
<ul>
<li>Structure of a Computer System (4 parts)<ul>
<li>Hardware<ul>
<li>Provides basic computing resources</li>
<li>CPU, memory, I/O devices</li>
</ul>
</li>
<li>Operating system<ul>
<li>Controls and coordinates use of hardware among various applications and users</li>
</ul>
</li>
<li>Application programs<ul>
<li>Define the ways in which the system resources are used to solve the computing problems of the users</li>
<li>Word processors, compilers, web browsers, database systems, video games</li>
</ul>
</li>
<li>Users<ul>
<li>People, machines, other computers</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Def.</strong> OS is a group of software that makes the computer operate <font color="red">correctly and efficiently</font> in an easy-to-use manner.</p>
<ul>
<li>Execute user programs and make solving user problems easier</li>
<li>Make the computer system convenient to use</li>
<li>Use the computer hardware in an efficient manner (hardware abstraction)</li>
</ul>
<blockquote>
<p>ask again: what is an OS ?</p>
</blockquote>
<ul>
<li>It includes a software program called <fong color="red">kernel&lt;/font&gt;<ul>
<li>manages all the physical devices (e.g., CPU, RAM and hard disk)</li>
<li>exposes some functions such as <font color="red">system calls</font> for others to configure the kernel or build software (e.g., C library)  on top</li>
</ul>
</fong></li>
<li>It includes other ‚Äùhelper‚Äù programs<ul>
<li>Such as a <fong color="red">shell&lt;/font&gt;, which renders a simple command-line user interface with a full set of commands</fong></li>
<li>Such as a <fong color="red">GUI&lt;/font&gt; (graphic user interface), which renders a user friendly interface with icons representing files and folders</fong></li>
<li>Such as a <fong color="red">Browser&lt;/font&gt;, which helps the user to visit websites</fong></li>
</ul>
</li>
</ul>
<blockquote>
<p>ask again and again: what is an OS ?</p>
</blockquote>
<ul>
<li>An OS is a <fong color="red">resource manager&lt;/font&gt;<ul>
<li>Managing CPUs, memory, disks, I/O devices (keyboards, USB drive, sensors, ‚Ä¶)</li>
<li>Arbitrator of conflicting requests for efficient and fair resource use</li>
</ul>
</fong></li>
<li>An OS is a <fong color="red">control program&lt;/font&gt;<ul>
<li>Controls execution of programs to prevent errors and improper use of the computer</li>
</ul>
</fong></li>
</ul>
<blockquote>
<font face="Segoe Script" size="5">SHORT SUMMARY</font>

<p>There is no exact definition about Operating System. It can have so many functions and computer depends on it so much.<br>It‚Äôs like a bridge between users and hardware, between applications and hardware. All of the modern computer cannot live without Operating Systems.</p>
<p>But what an OS actually do ?</p>
</blockquote>
<h2 id="What-does-an-Operating-Systems-do"><a href="#What-does-an-Operating-Systems-do" class="headerlink" title="What does an Operating Systems do ?"></a>What does an Operating Systems do ?</h2><ul>
<li>Virtualization (ËôöÊãüÂåñ)<ul>
<li>Virtualize CPU: Run multiple programs on a single CPU (as if there are many CPUs)</li>
<li>Virtualize memory: Give each process (or programs if you will) the illusion of running in its own memory address space</li>
</ul>
</li>
<li>Concurrency (Âπ∂ÂèëÊÄß)<ul>
<li>Run multi-threaded programs and make sure they execute correctly</li>
</ul>
</li>
<li>Persistence (ÊåÅ‰πÖÊÄß)<ul>
<li>Write data (from volatile SRAM/DRAM) into persistent storage</li>
<li>Performance, crash-resilience</li>
</ul>
</li>
<li>etc.</li>
</ul>
<p><em>Organzied by the functionalities of OS (<strong>three easy pieces</strong>)</em></p>
<ul>
<li>Virtualization (Process, scheduling, memory address space, swapping)</li>
<li>Concurrency (Threads, locks, semaphores)</li>
<li>Persistence (I/O, storage, file systems)</li>
</ul>
<h2 id="OS-Concepts"><a href="#OS-Concepts" class="headerlink" title="OS Concepts"></a>OS Concepts</h2><h3 id="Process-ËøõÁ®ã"><a href="#Process-ËøõÁ®ã" class="headerlink" title="Process (ËøõÁ®ã)"></a>Process (ËøõÁ®ã)</h3><p><strong>Def.</strong> A process is a program in execution. (Program is a passive entity and process is an active entity.)</p>
<p><strong>Properties</strong></p>
<ul>
<li>Process needs resources to accomplish its task<ul>
<li>CPU, memory, I/O, files</li>
<li>Process termination requires reclaim of any reusable resources</li>
</ul>
</li>
<li>Process executes instructions sequentially, one at a time, until completion<ul>
<li>Single-threaded process has one program counter specifying location of next instruction to execute</li>
<li>Multi-threaded process has one program counter per thread</li>
</ul>
</li>
<li>Typically, system has many processes, some user, some operating system running concurrently on one or more CPUs<ul>
<li>Concurrency by multiplexing the CPUs among the processes / threads</li>
</ul>
</li>
</ul>
<h3 id="Process-Management"><a href="#Process-Management" class="headerlink" title="Process Management"></a>Process Management</h3><ul>
<li>Creating and deleting both user and system processes</li>
<li>Suspending and resuming processes</li>
<li>Providing mechanisms for process synchronization</li>
<li>Providing mechanisms for process communication</li>
<li>Providing mechanisms for deadlock handling</li>
</ul>
<h3 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h3><ul>
<li>DRAM (Dynamic Random Access Memory) is the main memory used for all desktop, laptops, servers, and mobile devices</li>
<li>CPU only directly interacts with the main memory during execution<ul>
<li>All data in memory before and after processing</li>
<li>All instructions in memory in order to execute</li>
</ul>
</li>
<li>OS manages the main memory for kernel and processes<ul>
<li>OS dictates which process can access which memory regio</li>
</ul>
</li>
</ul>
<h3 id="Memory-Management"><a href="#Memory-Management" class="headerlink" title="Memory Management"></a>Memory Management</h3><ul>
<li>Memory management determines what is in memory when<ul>
<li>Optimizing CPU utilization and computer response to users</li>
</ul>
</li>
<li>Memory management activities<ul>
<li>Keeping track of which parts of memory are currently being used and by whom</li>
<li>Deciding which processes (or parts thereof) and data to move into and out of memory</li>
<li>Allocating and deallocating memory space as needed</li>
</ul>
</li>
</ul>
<h3 id="File-System-amp-I-O"><a href="#File-System-amp-I-O" class="headerlink" title="File System &amp; I/O"></a>File System &amp; I/O</h3><ul>
<li>File-System management<ul>
<li>Files usually organized into directories</li>
<li>Access control on most systems to determine who can access what</li>
<li>OS activities include<ul>
<li>Creating and deleting files and directories</li>
<li>Primitives to manipulate files and dirs</li>
<li>Mapping files onto secondary storage</li>
<li>Backup files onto stable (non-volatile) storage media</li>
</ul>
</li>
</ul>
</li>
<li>I/O Subsystem<ul>
<li>One purpose of OS is to hide peculiarities of hardware devices from the user</li>
<li>I/O subsystem responsible for<ul>
<li>Memory management of I/O including <ul>
<li>buffering (storing data temporarily while it is being transferred)</li>
<li>caching (storing parts of data in faster storage for performance)</li>
</ul>
</li>
<li>General device-driver interface</li>
<li>Drivers for specific hardware devices</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Protection-and-Security"><a href="#Protection-and-Security" class="headerlink" title="Protection and Security"></a>Protection and Security</h3><ul>
<li>Protection üëâ any mechanism for controlling access of processes or users to resources defined by the OS</li>
<li>Security üëâ defense of the system against internal and external attacks<ul>
<li>Huge range, including denial-of-service (DoS), worms (Ë†ïËô´), viruses, identity theft, theft of service</li>
</ul>
</li>
</ul>
<h1 id="Lec02-OS-Basics"><a href="#Lec02-OS-Basics" class="headerlink" title="Lec02. OS Basics"></a>Lec02. OS Basics</h1><h2 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h2><ul>
<li>Dual-mode operations</li>
<li>Kernel structure</li>
<li>Operating system services</li>
</ul>
<h2 id="Dual-Mode-Operations"><a href="#Dual-Mode-Operations" class="headerlink" title="Dual-Mode Operations"></a>Dual-Mode Operations</h2><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><ul>
<li>Evolution of OS<ul>
<li>A library to handle low-level I/O<ul>
<li>Issue: Fault and security isolation</li>
</ul>
</li>
<li>Kernel: A bigger ‚Äúlibrary‚Äù to handle low-level I/O<ul>
<li>Kernel needs to be protected from faulty/malicious apps</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/13/Operation-System/os201.png"></p>
<ul>
<li>Application code runs in <font color="red">User mode</font></li>
<li>Kernel code runs in <font color="red">Kernel mode</font><ul>
<li>Dual-mode operation allows OS to protect itself and other system components (attack from app can be handle by kernel)</li>
</ul>
</li>
<li><font color="red">Question:</font> What is needed in the hardware to support ‚Äúdual mode‚Äù operation?<ul>
<li>A bit for representing current mode (user/kernel mode bit)</li>
<li>Certain operations / actions only permitted in kernel mode (in user mode they fail or trap)</li>
<li>{ User üëâ Kernel } transition sets kernel mode AND saves the user PC<ul>
<li>Operating system code carefully puts aside user state then performs the necessary operations</li>
</ul>
</li>
<li>{ Kernel üëâ User } transition clears kernel mode AND restores appropriate user PC</li>
</ul>
</li>
</ul>
<p>Mode bits on different architectures üëá</p>
<table><tr>
    <td><img src="/2024/09/13/Operation-System/os202.png"></td>
    <td><img src="/2024/09/13/Operation-System/os203.png"></td>
</tr></table>



<h3 id="Mode-Transitions"><a href="#Mode-Transitions" class="headerlink" title="Mode Transitions"></a>Mode Transitions</h3><p>Three types :</p>
<ul>
<li>System call <ul>
<li>Process requests a system service, e.g., <code>exit</code></li>
<li>Like a function call, but <fotn color="blue">‚Äúoutside‚Äù the process&lt;/font&gt;</fotn></li>
<li>Does not have the address of the system function to call</li>
<li>Marshall (ÊéíÂ∫èÔºü) the syscall id and args in registers and exec syscall</li>
</ul>
</li>
<li>Interrupt<ul>
<li>External asynchronous event <font color="red">triggers context switch</font></li>
<li>e. g., Timer, I/O device</li>
<li>Independent of user process</li>
</ul>
</li>
<li>Trap or Exception<ul>
<li>Internal synchronous event in process triggers context switch</li>
<li>e.g., Protection violation (segmentation fault), Divide by zero, ‚Ä¶</li>
</ul>
</li>
</ul>
<h4 id="System-Calls"><a href="#System-Calls" class="headerlink" title="System Calls"></a>System Calls</h4><p><strong>Def.</strong> Programming interface to the services provided by the OS, typically written in a high-level language (C or C++).</p>
<blockquote>
<p>‰∏≠ÊñáËß£ÈáäÔºöÁ≥ªÁªüË∞ÉÁî®ÊòØ‰∏Ä‰∏™Áî®È´òÁ∫ßÁ®ãÂ∫èËØ≠Ë®ÄÂÆö‰πâÁöÑÔºåË∞ÉÁî®Êìç‰ΩúÁ≥ªÁªüÊèê‰æõÁöÑÊúçÂä°ÁöÑÁ®ãÂ∫èÊé•Âè£„ÄÇ</p>
</blockquote>
<p><strong>Implementation</strong></p>
<ul>
<li>Typically, a number associated with each system call<ul>
<li>System-call interface maintains a table indexed according to these numbers</li>
</ul>
</li>
<li>The system call interface invokes intended system call in OS kernel and returns status of the system call and any return values <font color="blue">(a basic example below)</font></li>
<li>The caller needs to know nothing about how the system call is implemented<ul>
<li>Just needs to obey calling convention and understand what OS will do </li>
<li>Most details of OS interface hidden from programmer by library API<ul>
<li>Managed by run-time support library (set of functions built into libraries included with compiler)</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[allow(dead_code)]</span></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">handle_syscall</span>(user_context: &amp;<span class="keyword">mut</span> UserContext, user_space: &amp;UserSpace) &#123;</span><br><span class="line">  <span class="keyword">const</span> SYS_EXIT: <span class="type">usize</span> = <span class="number">93</span>;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> <span class="variable">args</span> = [</span><br><span class="line">    user_context.<span class="title function_ invoke__">a0</span>(),</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  ];</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">let</span> <span class="variable">ret</span>: <span class="type">Result</span>&lt;SyscallReturn&gt; = <span class="keyword">match</span> user_context.<span class="title function_ invoke__">a7</span>() &#123;</span><br><span class="line">    SYS_EXIT =&gt; &#123;</span><br><span class="line">      <span class="comment">// operations</span></span><br><span class="line">      <span class="title function_ invoke__">Ok</span>(SyscallReturn::NoReturn)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Other syscalls</span></span><br><span class="line">  &#125;</span><br><span class="line">	</span><br><span class="line">  <span class="keyword">match</span> ret &#123;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(val) =&gt; <span class="keyword">match</span> val &#123;</span><br><span class="line">      SyscallReturn::<span class="title function_ invoke__">Return</span>(val) =&gt; user_context.<span class="title function_ invoke__">set_a0</span>(val <span class="keyword">as</span> <span class="type">usize</span>),</span><br><span class="line">      SyscallReturn::NoReturn =&gt; &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_ invoke__">Err</span>(err) =&gt; user_context.<span class="title function_ invoke__">set_a0</span>(-(err.<span class="title function_ invoke__">error</span>() <span class="keyword">as</span> <span class="type">i32</span> <span class="keyword">as</span> <span class="type">isize</span>) <span class="keyword">as</span> <span class="type">usize</span>),</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Types of Syscalls</li>
</ul>
<p><img src="/2024/09/13/Operation-System/os204.png"></p>
<h4 id="Exception-and-Interrupt"><a href="#Exception-and-Interrupt" class="headerlink" title="Exception and Interrupt"></a>Exception and Interrupt</h4><h1 id="Lec03-Process"><a href="#Lec03-Process" class="headerlink" title="Lec03. Process"></a>Lec03. Process</h1><h2 id="Outline-1"><a href="#Outline-1" class="headerlink" title="Outline"></a>Outline</h2><ul>
<li>Process and system calls</li>
<li>Process creation</li>
<li>Kernel view of processes</li>
<li>Kernel view of fork(), exec(), and wait()</li>
<li>More about processes</li>
</ul>
<h1 id="Lec04-CPU-Scheduler"><a href="#Lec04-CPU-Scheduler" class="headerlink" title="Lec04. CPU Scheduler"></a>Lec04. CPU Scheduler</h1><h2 id="Outline-2"><a href="#Outline-2" class="headerlink" title="Outline"></a>Outline</h2><ul>
<li>Scheduler Concept</li>
<li>Different Scheduling Algorithm</li>
<li>Optimization</li>
</ul>
<h1 id="Lec05-Synchronization"><a href="#Lec05-Synchronization" class="headerlink" title="Lec05. Synchronization"></a>Lec05. Synchronization</h1><h2 id="Outline-3"><a href="#Outline-3" class="headerlink" title="Outline"></a>Outline</h2><ul>
<li>Process Communications: Race Condition and Mutual Exclusion</li>
<li>Critical Section Solutions</li>
<li>Spin-based Lock</li>
<li>Sleep-based Lock</li>
</ul>
<h1 id="Lec06-Address-Translation"><a href="#Lec06-Address-Translation" class="headerlink" title="Lec06. Address Translation"></a>Lec06. Address Translation</h1><h2 id="Outline-4"><a href="#Outline-4" class="headerlink" title="Outline"></a>Outline</h2><ul>
<li>Memory Virtualization</li>
<li>Abstraction of Address</li>
<li>Base &amp; Bounds</li>
<li>Segmentation</li>
<li>Trade-off with Best / Worst / First Fit</li>
</ul>
<h2 id="Segmentation"><a href="#Segmentation" class="headerlink" title="Segmentation"></a>Segmentation</h2><p><strong>Problems with Segmentation</strong></p>
<ul>
<li>OS context switch must also save and restore all pairs of segment registers</li>
<li>A segment may grow, which may or may not be possible</li>
<li>Management of free spaces of physical memory with variable sized segments</li>
<li>External fragmentation: gaps between allocated segments<ul>
<li>Segmentation may also have internal fragmentation if more space allocated than needed.</li>
</ul>
</li>
</ul>
<h1 id="Lec07-Paging"><a href="#Lec07-Paging" class="headerlink" title="Lec07. Paging"></a>Lec07. Paging</h1><h2 id="Outline-5"><a href="#Outline-5" class="headerlink" title="Outline"></a>Outline</h2><ul>
<li>Introduction to paging</li>
<li>Multi-level page tables</li>
<li>Other page table structures</li>
<li>Real-world paging schemes</li>
<li>Translation lookaside buffer (<strong>TLB</strong>)</li>
</ul>
<h2 id="Intro-to-Paging"><a href="#Intro-to-Paging" class="headerlink" title="Intro to Paging"></a>Intro to Paging</h2><blockquote>
<p><font color="green">Recall:</font> Solutions on segmentation</p>
</blockquote>
<ul>
<li>Physical memory conceptually divided into <font color="red">fixed size</font><ul>
<li>Each is a <font color="red">page frame</font><ul>
<li>Too big ‚Üí internal fragmentation</li>
<li>Too small ‚Üí page table too big</li>
</ul>
</li>
</ul>
</li>
<li>Virtual address space conceptually divided into the same size<ul>
<li>Each is a <font color="red">page</font></li>
</ul>
</li>
<li>Page mapped to page frame<ul>
<li>One-to-one mapping</li>
<li>Many-to-one mapping üëâ memory sharing</li>
</ul>
</li>
<li>One page table per process<ul>
<li>Resides in physical memory<ul>
<li>One entry for one virtual $\to$ physical translation</li>
</ul>
</li>
</ul>
</li>
</ul>
<table><tr>
<td><img src="/2024/09/13/Operation-System/os701.png" style="zoom:60%"></td>
<td><img src="/2024/09/13/Operation-System/os702.png" style="zoom:60%"></td></tr>
<tr><td><img src="/2024/09/13/Operation-System/os703.png" style="zoom:60%"></td>
<td><img src="/2024/09/13/Operation-System/os704.png" style="zoom:60%"></td>
</tr></table>

<ul>
<li><strong>Virtual Address and Paging</strong><ul>
<li>Length of virtual address determines size of address space </li>
<li>Length of offset determines size of a page / page frame</li>
<li>In case of m-bit virtual address and k-bit offset<ul>
<li>Size of address space: $2^m$ </li>
<li>Size of a page: $2^k$</li>
<li>e.g., 32-bit virtual address, 4KB page: $m = 32$, $k = 12$</li>
</ul>
</li>
</ul>
</li>
<li><strong>Page Table Entry</strong><ul>
<li>An entry in the page table is called a page table entry (<strong>PTE</strong>).</li>
<li>Besides <strong>PFN</strong> (Page Frame Number), <strong>PTE</strong> also contains a <font color="red">valid bit</font><ul>
<li>Virtual pages with no valid mapping: valid bit = 0</li>
<li>Important for sparse address space (e.g., $2^{64}$ bytes)</li>
</ul>
</li>
<li>PTE also contains <font color="red">protection bits</font><ul>
<li>Permission to read from or write, or execute code on this page</li>
</ul>
</li>
<li>PTE also contains <font color="red">an access bit, a dirty bit, a present bit</font><ul>
<li>Present bit: whether this page is in physical memory or on disk</li>
<li>Dirty bit: whether the page has been modified since it was brought into memory</li>
<li>Access bit: whether a page has been accessed</li>
</ul>
</li>
</ul>
</li>
</ul>
<table><tr>
<td><img src="/2024/09/13/Operation-System/os705.png" style="zoom:60%"></td>
<td><img src="/2024/09/13/Operation-System/os706.png" style="zoom:60%"></td>
</tr></table>



<h2 id="Multi-level-page-tables"><a href="#Multi-level-page-tables" class="headerlink" title="Multi-level page tables"></a>Multi-level page tables</h2><ul>
<li>Two level Page Tables<ul>
<li>in order to save space</li>
<li>using ‚ÄúTree‚Äù instead of ‚ÄúList‚Äù to improve performance</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/13/Operation-System/os707.png" style="zoom:60%"></p>
<blockquote>
<p>More detail about ‚Ä¶</p>
</blockquote>
<p><img src="/2024/09/13/Operation-System/os708.png" style="zoom:60%"></p>
<h2 id="Other-Page-Table-Strctures"><a href="#Other-Page-Table-Strctures" class="headerlink" title="Other Page Table Strctures"></a>Other Page Table Strctures</h2><ul>
<li>Hierarchical page tables <ul>
<li>2-level page tables</li>
<li>3-level page tables</li>
<li>4-level page tables</li>
</ul>
</li>
<li>Hashed Page Tables </li>
<li>Inverted Page Tables</li>
</ul>
<h2 id="Read-world-Paging-Scheme"><a href="#Read-world-Paging-Scheme" class="headerlink" title="Read-world Paging Scheme"></a>Read-world Paging Scheme</h2><p><strong>I.</strong> RISC-V support multiple MMU</p>
<ul>
<li><code>RV32</code> : SV32</li>
<li><code>RV64</code> : SV32 &amp; SV48</li>
</ul>
<p><img src="/2024/09/13/Operation-System/os709.png"></p>
<p><strong>II.</strong> IA-32 (Intel‚Äôs 32-bit CPU) uses two stage address translation: segmentation + paging</p>
<p><strong>Issues of Paging</strong></p>
<ul>
<li>Time Complexity<ul>
<li>Extra memory references during address translation</li>
<li>Three-level page tables requires 3 additional memory reads</li>
</ul>
</li>
</ul>
<h2 id="Translation-Lookaside-Buffer"><a href="#Translation-Lookaside-Buffer" class="headerlink" title="Translation Lookaside Buffer"></a>Translation Lookaside Buffer</h2><ul>
<li>A <fotn color="red">translation lookaside buffer (TLB)&lt;/font&gt; is a hardware cache that is part of the MMU (Memory Management Unit)<ul>
<li>A cache for the PTEs: holding a translation likely to be <strong>re-used</strong><ul>
<li>Replacement policy: <strong>LRU</strong> (Recall for ‚ÄúComputer Organization‚Äù), FIFO, random</li>
</ul>
</li>
<li>Each entry holds mapping of a virtual address to a physical address</li>
</ul>
</fotn></li>
<li>Before a virtual-to-physical address translation is to be performed, TLB is looked up using VPN<ul>
<li>TLB hit: VPN is found, and the PFN of the same entry used</li>
<li>TLB miss: VPN not found, page table walk</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/13/Operation-System/os710.png" style="zoom:60%"></p>
<center>TLB hit</center>

<p><img src="/2024/09/13/Operation-System/os711.png" style="zoom:60%"></p>
<center>TLB miss</center>



<blockquote>
<p>Thought: can TLB be big?</p>
<p>No. If it‚Äôs too big, it cannot function as speed-up.</p>
</blockquote>
<ul>
<li><strong>Issues with Context Switch</strong><ul>
<li>Two process may use the same virtual address<ul>
<li>e.g. <code>P1: 100-&gt;170</code>, <code>P2: 100-&gt;110</code></li>
</ul>
</li>
<li>Solutions: <ul>
<li>Flush TLB upon context switch (Invalidate all entries: <code>V-&gt;I</code>)</li>
<li>Extending TLB with address space ID (No need to flush TLB)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id="Lec08-Demand-Paging"><a href="#Lec08-Demand-Paging" class="headerlink" title="Lec08. Demand Paging"></a>Lec08. Demand Paging</h1><h2 id="Outline-6"><a href="#Outline-6" class="headerlink" title="Outline"></a>Outline</h2><h2 id="Swap-Space"><a href="#Swap-Space" class="headerlink" title="Swap Space"></a>Swap Space</h2><blockquote>
<p>Who is responsible for moving data?</p>
<p>For applications, it‚Äôs <strong>memory overlay</strong></p>
<ul>
<li>Application in charge of moving data between memory and disk</li>
<li>e.g., calling a function needs to make sure the code is in memory!</li>
</ul>
<p>For OS, it‚Äôs <strong>demand paging</strong></p>
<ul>
<li>OS configures page table entries</li>
<li>Virtual page maps to physical memory or files in disk</li>
<li>Process sees an abstraction of address space</li>
<li>OS determines where the data is stored</li>
</ul>
</blockquote>
<ul>
<li>Swap space is a partition or a file stored on the disk<ul>
<li>OS swaps pages out of memory to it </li>
</ul>
</li>
<li>OS swaps pages from it into memory<ul>
<li>Swap space conceptually divided into page-sized units</li>
<li>OS maintains a disk address of each page-sized unit</li>
</ul>
</li>
</ul>
<p><img src="/2024/09/13/Operation-System/os801.png" style="zoom:60%"></p>
<h2 id="Demand-Paging"><a href="#Demand-Paging" class="headerlink" title="Demand Paging"></a>Demand Paging</h2><ul>
<li>Load pages from disk to memory only as they are needed <ul>
<li>Pages are loaded ‚Äúon demand‚Äù</li>
</ul>
</li>
<li>Data transferred in the unit of pages</li>
<li>Two possible on-disk locations <ul>
<li>Swap space: <ul>
<li>created by OS for temporary storage of pages on disk</li>
<li>e.g., pages for stack and heap</li>
</ul>
</li>
<li>Program binary files:<ul>
<li>The code pages from this binary are only loaded into memory when they are executed</li>
<li>Read-only, thus never write back</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>Physical Memory as a Cache</strong></p>
<h1 id="Lec09-Linux-Memory-Management"><a href="#Lec09-Linux-Memory-Management" class="headerlink" title="Lec09. Linux Memory Management"></a>Lec09. Linux Memory Management</h1><h2 id="Outline-7"><a href="#Outline-7" class="headerlink" title="Outline"></a>Outline</h2><h2 id="Address-Space-in-Linux"><a href="#Address-Space-in-Linux" class="headerlink" title="Address Space in Linux"></a>Address Space in Linux</h2><p><img src="/2024/09/13/Operation-System/os901.png"></p>
<ul>
<li>Each page split into 3:1 (alike) portions, e.g., 3/4 for user mode and 1/4 for kernel space.</li>
</ul>
<blockquote>
<p>Q: Why is kernel memory mapped into the address space of each process?</p>
<ul>
<li>No need to change page table (i.e., switch CR3) when trapped into the kernel (no TLB flush)</li>
<li>Kernel code may access user memory when needed</li>
</ul>
</blockquote>
<p>Aware! ‚Äî‚Äî The kernel memory in each address space is <font color="red">the same</font></p>
<p><img src="/2024/09/13/Operation-System/os902.png" style="zoom:70%"></p>
<h2 id="Slab-Allocator"><a href="#Slab-Allocator" class="headerlink" title="Slab Allocator"></a>Slab Allocator</h2><h2 id="Buddy-System"><a href="#Buddy-System" class="headerlink" title="Buddy System"></a>Buddy System</h2><ul>
<li>Free physical memory is considered big space of size $2^N$ pages</li>
<li><strong>Allocation:</strong> the free space is divided by two until a block that is big enough to accommodate the request is found<ul>
<li>a further split would result in a space that is too small</li>
</ul>
</li>
<li><strong>Free:</strong> the freed block is recursively merged with its buddy<ul>
<li>Two <strong>buddy blocks</strong> have physical addresses that differ only in <strong>1 bit</strong></li>
</ul>
</li>
</ul>
<table>
<tr>
    <td><img src="/2024/09/13/Operation-System/os903.png"></td>
    <td><img src="/2024/09/13/Operation-System/os904.png"></td>
    <td><img src="/2024/09/13/Operation-System/os905.png"></td>
</tr>
<tr>
    <td><img src="/2024/09/13/Operation-System/os906.png"></td>
    <td><img src="/2024/09/13/Operation-System/os907.png"></td>
    <td>Note that two <b>buddy system</b><br>differ at bit i (where they separate,<br>e.g., A and B at the lowest bit)<br>on their <b>PFN</b></td>
</tr>
</table>





    </div>
    
    <div>
      
      <div>
    
        <div style="text-align:center;color: #9d9d9d;font-size:18px;">------------- Êú¨ÊñáÁªìÊùü <i class="fas fa-book-reader"></i> ÊÑüË∞¢ÈòÖËØª -------------</div>
    
</div>
      
    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/CSE-Learning/" rel="tag"># CSE Learning</a>
              <a href="/tags/Rust/" rel="tag"># Rust</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/09/09/Computer-Networks/" rel="prev" title="ËÆ°ÁÆóÊú∫ÁΩëÁªú">
                  <i class="fa fa-angle-left"></i> ËÆ°ÁÆóÊú∫ÁΩëÁªú
                </a>
            </div>
            <div class="post-nav-item">
            </div>
          </div>
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  <script src="/js/third-party/pace.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","cdn":"//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
